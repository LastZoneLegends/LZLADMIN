function KE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function QE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ev={exports:{}},hc={},Tv={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),YE=Symbol.for("react.portal"),XE=Symbol.for("react.fragment"),JE=Symbol.for("react.strict_mode"),ZE=Symbol.for("react.profiler"),eT=Symbol.for("react.provider"),tT=Symbol.for("react.context"),nT=Symbol.for("react.forward_ref"),rT=Symbol.for("react.suspense"),sT=Symbol.for("react.memo"),iT=Symbol.for("react.lazy"),Cg=Symbol.iterator;function aT(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Iv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sv=Object.assign,kv={};function ta(t,e,n){this.props=t,this.context=e,this.refs=kv,this.updater=n||Iv}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cv(){}Cv.prototype=ta.prototype;function jf(t,e,n){this.props=t,this.context=e,this.refs=kv,this.updater=n||Iv}var Df=jf.prototype=new Cv;Df.constructor=jf;Sv(Df,ta.prototype);Df.isPureReactComponent=!0;var Ng=Array.isArray,Nv=Object.prototype.hasOwnProperty,Of={current:null},Av={key:!0,ref:!0,__self:!0,__source:!0};function bv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Nv.call(e,r)&&!Av.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ho,type:t,key:i,ref:a,props:s,_owner:Of.current}}function oT(t,e){return{$$typeof:Ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ho}function lT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ag=/\/+/g;function vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lT(""+t.key):e.toString(36)}function Zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ho:case YE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+vd(a,0):r,Ng(s)?(n="",t!=null&&(n=t.replace(Ag,"$&/")+"/"),Zl(s,e,n,"",function(d){return d})):s!=null&&(Mf(s)&&(s=oT(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ag,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Ng(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+vd(i,u);a+=Zl(i,e,n,c,s)}else if(c=aT(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+vd(i,u++),a+=Zl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Al(t,e,n){if(t==null)return t;var r=[],s=0;return Zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},eu={transition:null},cT={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Of};function Pv(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!Mf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=ta;he.Fragment=XE;he.Profiler=ZE;he.PureComponent=jf;he.StrictMode=JE;he.Suspense=rT;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cT;he.act=Pv;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Of.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Nv.call(e,c)&&!Av.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Ho,type:t.type,key:s,ref:i,props:r,_owner:a}};he.createContext=function(t){return t={$$typeof:tT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eT,_context:t},t.Consumer=t};he.createElement=bv;he.createFactory=function(t){var e=bv.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:nT,render:t}};he.isValidElement=Mf;he.lazy=function(t){return{$$typeof:iT,_payload:{_status:-1,_result:t},_init:uT}};he.memo=function(t,e){return{$$typeof:sT,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};he.unstable_act=Pv;he.useCallback=function(t,e){return Ft.current.useCallback(t,e)};he.useContext=function(t){return Ft.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};he.useEffect=function(t,e){return Ft.current.useEffect(t,e)};he.useId=function(){return Ft.current.useId()};he.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Ft.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};he.useRef=function(t){return Ft.current.useRef(t)};he.useState=function(t){return Ft.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Ft.current.useTransition()};he.version="18.3.1";Tv.exports=he;var D=Tv.exports;const Rv=QE(D),dT=KE({__proto__:null,default:Rv},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT=D,fT=Symbol.for("react.element"),pT=Symbol.for("react.fragment"),mT=Object.prototype.hasOwnProperty,gT=hT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yT={key:!0,ref:!0,__self:!0,__source:!0};function jv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)mT.call(e,r)&&!yT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fT,type:t,key:i,ref:a,props:s,_owner:gT.current}}hc.Fragment=pT;hc.jsx=jv;hc.jsxs=jv;Ev.exports=hc;var l=Ev.exports,ah={},Dv={exports:{}},an={},Ov={exports:{}},Mv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,te){var se=H.length;H.push(te);e:for(;0<se;){var Se=se-1>>>1,B=H[Se];if(0<s(B,te))H[Se]=te,H[se]=B,se=Se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],se=H.pop();if(se!==te){H[0]=se;e:for(var Se=0,B=H.length,J=B>>>1;Se<J;){var De=2*(Se+1)-1,tt=H[De],We=De+1,ke=H[We];if(0>s(tt,se))We<B&&0>s(ke,tt)?(H[Se]=ke,H[We]=se,Se=We):(H[Se]=tt,H[De]=se,Se=De);else if(We<B&&0>s(ke,se))H[Se]=ke,H[We]=se,Se=We;else break e}}return te}function s(H,te){var se=H.sortIndex-te.sortIndex;return se!==0?se:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],d=[],p=1,g=null,h=3,E=!1,A=!1,C=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(H){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=H)r(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(d)}}function b(H){if(C=!1,k(H),!A)if(n(c)!==null)A=!0,vn(M);else{var te=n(d);te!==null&&Rt(b,te.startTime-H)}}function M(H,te){A=!1,C&&(C=!1,x(w),w=-1),E=!0;var se=h;try{for(k(te),g=n(c);g!==null&&(!(g.expirationTime>te)||H&&!j());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,h=g.priorityLevel;var B=Se(g.expirationTime<=te);te=t.unstable_now(),typeof B=="function"?g.callback=B:g===n(c)&&r(c),k(te)}else r(c);g=n(c)}if(g!==null)var J=!0;else{var De=n(d);De!==null&&Rt(b,De.startTime-te),J=!1}return J}finally{g=null,h=se,E=!1}}var L=!1,_=null,w=-1,I=5,S=-1;function j(){return!(t.unstable_now()-S<I)}function P(){if(_!==null){var H=t.unstable_now();S=H;var te=!0;try{te=_(!0,H)}finally{te?N():(L=!1,_=null)}}else L=!1}var N;if(typeof y=="function")N=function(){y(P)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Pt=pe.port2;pe.port1.onmessage=P,N=function(){Pt.postMessage(null)}}else N=function(){v(P,0)};function vn(H){_=H,L||(L=!0,N())}function Rt(H,te){w=v(function(){H(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){A||E||(A=!0,vn(M))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var te=3;break;default:te=h}var se=h;h=te;try{return H()}finally{h=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=h;h=H;try{return te()}finally{h=se}},t.unstable_scheduleCallback=function(H,te,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,H){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=se+B,H={id:p++,callback:te,priorityLevel:H,startTime:se,expirationTime:B,sortIndex:-1},se>Se?(H.sortIndex=se,e(d,H),n(c)===null&&H===n(d)&&(C?(x(w),w=-1):C=!0,Rt(b,se-Se))):(H.sortIndex=B,e(c,H),A||E||(A=!0,vn(M))),H},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(H){var te=h;return function(){var se=h;h=te;try{return H.apply(this,arguments)}finally{h=se}}}})(Mv);Ov.exports=Mv;var vT=Ov.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=D,sn=vT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lv=new Set,co={};function Js(t,e){Ui(t,e),Ui(t+"Capture",e)}function Ui(t,e){for(co[t]=e,t=0;t<e.length;t++)Lv.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,wT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bg={},Pg={};function xT(t){return oh.call(Pg,t)?!0:oh.call(bg,t)?!1:wT.test(t)?Pg[t]=!0:(bg[t]=!0,!1)}function ET(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TT(t,e,n,r){if(e===null||typeof e>"u"||ET(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lf=/[\-:]([a-z])/g;function Vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lf,Vf);gt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lf,Vf);gt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lf,Vf);gt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uf(t,e,n,r){var s=gt.hasOwnProperty(e)?gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TT(e,n,s,r)&&(n=null),r||s===null?xT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sr=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),gi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),Ff=Symbol.for("react.strict_mode"),lh=Symbol.for("react.profiler"),Vv=Symbol.for("react.provider"),Uv=Symbol.for("react.context"),zf=Symbol.for("react.forward_ref"),uh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),Fv=Symbol.for("react.offscreen"),Rg=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=Rg&&t[Rg]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,_d;function Ua(t){if(_d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_d=e&&e[1]||""}return`
`+_d+t}var wd=!1;function xd(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,u=i.length-1;1<=a&&0<=u&&s[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(s[a]!==i[u]){if(a!==1||u!==1)do if(a--,u--,0>u||s[a]!==i[u]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ua(t):""}function IT(t){switch(t.tag){case 5:return Ua(t.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return t=xd(t.type,!1),t;case 11:return t=xd(t.type.render,!1),t;case 1:return t=xd(t.type,!0),t;default:return""}}function dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yi:return"Fragment";case gi:return"Portal";case lh:return"Profiler";case Ff:return"StrictMode";case uh:return"Suspense";case ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uv:return(t.displayName||"Context")+".Consumer";case Vv:return(t._context.displayName||"Context")+".Provider";case zf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bf:return e=t.displayName||null,e!==null?e:dh(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return dh(t(e))}catch{}}return null}function ST(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dh(e);case 8:return e===Ff?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kT(t){var e=zv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pl(t){t._valueTracker||(t._valueTracker=kT(t))}function Bv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hh(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=as(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $v(t,e){e=e.checked,e!=null&&Uf(t,"checked",e,!1)}function fh(t,e){$v(t,e);var n=as(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ph(t,e.type,n):e.hasOwnProperty("defaultValue")&&ph(t,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ph(t,e,n){(e!=="number"||wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function Ai(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+as(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Og(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Fa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:as(n)}}function Wv(t,e){var n=as(e.value),r=as(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rl,Hv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CT=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){CT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function Gv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function Kv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NT=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yh(t,e){if(e){if(NT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=null;function $f(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wh=null,bi=null,Pi=null;function Lg(t){if(t=Qo(t)){if(typeof wh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=yc(e),wh(t.stateNode,t.type,e))}}function Qv(t){bi?Pi?Pi.push(t):Pi=[t]:bi=t}function Yv(){if(bi){var t=bi,e=Pi;if(Pi=bi=null,Lg(t),e)for(t=0;t<e.length;t++)Lg(e[t])}}function Xv(t,e){return t(e)}function Jv(){}var Ed=!1;function Zv(t,e,n){if(Ed)return t(e,n);Ed=!0;try{return Xv(t,e,n)}finally{Ed=!1,(bi!==null||Pi!==null)&&(Jv(),Yv())}}function fo(t,e){var n=t.stateNode;if(n===null)return null;var r=yc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var xh=!1;if(gr)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){xh=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{xh=!1}function AT(t,e,n,r,s,i,a,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Xa=!1,xu=null,Eu=!1,Eh=null,bT={onError:function(t){Xa=!0,xu=t}};function PT(t,e,n,r,s,i,a,u,c){Xa=!1,xu=null,AT.apply(bT,arguments)}function RT(t,e,n,r,s,i,a,u,c){if(PT.apply(this,arguments),Xa){if(Xa){var d=xu;Xa=!1,xu=null}else throw Error(z(198));Eu||(Eu=!0,Eh=d)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(Zs(t)!==t)throw Error(z(188))}function jT(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vg(s),t;if(i===r)return Vg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a){for(u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function t_(t){return t=jT(t),t!==null?n_(t):null}function n_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n_(t);if(e!==null)return e;t=t.sibling}return null}var r_=sn.unstable_scheduleCallback,Ug=sn.unstable_cancelCallback,DT=sn.unstable_shouldYield,OT=sn.unstable_requestPaint,Ye=sn.unstable_now,MT=sn.unstable_getCurrentPriorityLevel,Wf=sn.unstable_ImmediatePriority,s_=sn.unstable_UserBlockingPriority,Tu=sn.unstable_NormalPriority,LT=sn.unstable_LowPriority,i_=sn.unstable_IdlePriority,fc=null,Un=null;function VT(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(fc,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:zT,UT=Math.log,FT=Math.LN2;function zT(t){return t>>>=0,t===0?32:31-(UT(t)/FT|0)|0}var jl=64,Dl=4194304;function za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~s;u!==0?r=za(u):(i&=a,i!==0&&(r=za(i)))}else a=n&~s,a!==0?r=za(a):i!==0&&(r=za(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kn(e),s=1<<n,r|=t[n],e&=~s;return r}function BT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $T(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-kn(i),u=1<<a,c=s[a];c===-1?(!(u&n)||u&r)&&(s[a]=BT(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a_(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Td(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function WT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function o_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l_,Hf,u_,c_,d_,Ih=!1,Ol=[],Gr=null,Kr=null,Qr=null,po=new Map,mo=new Map,Mr=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(e.pointerId)}}function Aa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qo(e),e!==null&&Hf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HT(t,e,n,r,s){switch(e){case"focusin":return Gr=Aa(Gr,t,e,n,r,s),!0;case"dragenter":return Kr=Aa(Kr,t,e,n,r,s),!0;case"mouseover":return Qr=Aa(Qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return po.set(i,Aa(po.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mo.set(i,Aa(mo.get(i)||null,t,e,n,r,s)),!0}return!1}function h_(t){var e=bs(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=e_(n),e!==null){t.blockedOn=e,d_(t.priority,function(){u_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_h=r,n.target.dispatchEvent(r),_h=null}else return e=Qo(n),e!==null&&Hf(e),t.blockedOn=n,!1;e.shift()}return!0}function zg(t,e,n){tu(t)&&n.delete(e)}function GT(){Ih=!1,Gr!==null&&tu(Gr)&&(Gr=null),Kr!==null&&tu(Kr)&&(Kr=null),Qr!==null&&tu(Qr)&&(Qr=null),po.forEach(zg),mo.forEach(zg)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,Ih||(Ih=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,GT)))}function go(t){function e(s){return ba(s,t)}if(0<Ol.length){ba(Ol[0],t);for(var n=1;n<Ol.length;n++){var r=Ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gr!==null&&ba(Gr,t),Kr!==null&&ba(Kr,t),Qr!==null&&ba(Qr,t),po.forEach(e),mo.forEach(e),n=0;n<Mr.length;n++)r=Mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mr.length&&(n=Mr[0],n.blockedOn===null);)h_(n),n.blockedOn===null&&Mr.shift()}var Ri=Sr.ReactCurrentBatchConfig,Su=!0;function KT(t,e,n,r){var s=Ie,i=Ri.transition;Ri.transition=null;try{Ie=1,Gf(t,e,n,r)}finally{Ie=s,Ri.transition=i}}function QT(t,e,n,r){var s=Ie,i=Ri.transition;Ri.transition=null;try{Ie=4,Gf(t,e,n,r)}finally{Ie=s,Ri.transition=i}}function Gf(t,e,n,r){if(Su){var s=Sh(t,e,n,r);if(s===null)jd(t,e,r,ku,n),Fg(t,r);else if(HT(s,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<qT.indexOf(t)){for(;s!==null;){var i=Qo(s);if(i!==null&&l_(i),i=Sh(t,e,n,r),i===null&&jd(t,e,r,ku,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else jd(t,e,r,null,n)}}var ku=null;function Sh(t,e,n,r){if(ku=null,t=$f(r),t=bs(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ku=t,null}function f_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MT()){case Wf:return 1;case s_:return 4;case Tu:case LT:return 16;case i_:return 536870912;default:return 16}default:return 16}}var $r=null,Kf=null,nu=null;function p_(){if(nu)return nu;var t,e=Kf,n=e.length,r,s="value"in $r?$r.value:$r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function Bg(){return!1}function on(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ml:Bg,this.isPropagationStopped=Bg,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qf=on(na),Ko=Be({},na,{view:0,detail:0}),YT=on(Ko),Id,Sd,Pa,pc=Be({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(Id=t.screenX-Pa.screenX,Sd=t.screenY-Pa.screenY):Sd=Id=0,Pa=t),Id)},movementY:function(t){return"movementY"in t?t.movementY:Sd}}),$g=on(pc),XT=Be({},pc,{dataTransfer:0}),JT=on(XT),ZT=Be({},Ko,{relatedTarget:0}),kd=on(ZT),eI=Be({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),tI=on(eI),nI=Be({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rI=on(nI),sI=Be({},na,{data:0}),Wg=on(sI),iI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oI[t])?!!e[t]:!1}function Yf(){return lI}var uI=Be({},Ko,{key:function(t){if(t.key){var e=iI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yf,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cI=on(uI),dI=Be({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=on(dI),hI=Be({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yf}),fI=on(hI),pI=Be({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=on(pI),gI=Be({},pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=on(gI),vI=[9,13,27,32],Xf=gr&&"CompositionEvent"in window,Ja=null;gr&&"documentMode"in document&&(Ja=document.documentMode);var _I=gr&&"TextEvent"in window&&!Ja,m_=gr&&(!Xf||Ja&&8<Ja&&11>=Ja),Hg=" ",Gg=!1;function g_(t,e){switch(t){case"keyup":return vI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function wI(t,e){switch(t){case"compositionend":return y_(e);case"keypress":return e.which!==32?null:(Gg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Gg?null:t;default:return null}}function xI(t,e){if(vi)return t==="compositionend"||!Xf&&g_(t,e)?(t=p_(),nu=Kf=$r=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m_&&e.locale!=="ko"?null:e.data;default:return null}}var EI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!EI[t.type]:e==="textarea"}function v_(t,e,n,r){Qv(r),e=Cu(e,"onChange"),0<e.length&&(n=new Qf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Za=null,yo=null;function TI(t){A_(t,0)}function mc(t){var e=xi(t);if(Bv(e))return t}function II(t,e){if(t==="change")return e}var __=!1;if(gr){var Cd;if(gr){var Nd="oninput"in document;if(!Nd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Nd=typeof Qg.oninput=="function"}Cd=Nd}else Cd=!1;__=Cd&&(!document.documentMode||9<document.documentMode)}function Yg(){Za&&(Za.detachEvent("onpropertychange",w_),yo=Za=null)}function w_(t){if(t.propertyName==="value"&&mc(yo)){var e=[];v_(e,yo,t,$f(t)),Zv(TI,e)}}function SI(t,e,n){t==="focusin"?(Yg(),Za=e,yo=n,Za.attachEvent("onpropertychange",w_)):t==="focusout"&&Yg()}function kI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mc(yo)}function CI(t,e){if(t==="click")return mc(e)}function NI(t,e){if(t==="input"||t==="change")return mc(e)}function AI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:AI;function vo(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oh.call(e,s)||!Nn(t[s],e[s]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function x_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?x_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E_(){for(var t=window,e=wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wu(t.document)}return e}function Jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bI(t){var e=E_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&x_(n.ownerDocument.documentElement,n)){if(r!==null&&Jf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Jg(n,i);var a=Jg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PI=gr&&"documentMode"in document&&11>=document.documentMode,_i=null,kh=null,eo=null,Ch=!1;function Zg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ch||_i==null||_i!==wu(r)||(r=_i,"selectionStart"in r&&Jf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&vo(eo,r)||(eo=r,r=Cu(kh,"onSelect"),0<r.length&&(e=new Qf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_i)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Ad={},T_={};gr&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function gc(t){if(Ad[t])return Ad[t];if(!wi[t])return t;var e=wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T_)return Ad[t]=e[n];return t}var I_=gc("animationend"),S_=gc("animationiteration"),k_=gc("animationstart"),C_=gc("transitionend"),N_=new Map,ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){N_.set(t,e),Js(e,[t])}for(var bd=0;bd<ey.length;bd++){var Pd=ey[bd],RI=Pd.toLowerCase(),jI=Pd[0].toUpperCase()+Pd.slice(1);fs(RI,"on"+jI)}fs(I_,"onAnimationEnd");fs(S_,"onAnimationIteration");fs(k_,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(C_,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function ty(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RT(r,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;ty(s,u,d),i=c}else for(a=0;a<r.length;a++){if(u=r[a],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;ty(s,u,d),i=c}}}if(Eu)throw t=Eh,Eu=!1,Eh=null,t}function Pe(t,e){var n=e[Rh];n===void 0&&(n=e[Rh]=new Set);var r=t+"__bubble";n.has(r)||(b_(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),b_(n,t,r,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function _o(t){if(!t[Vl]){t[Vl]=!0,Lv.forEach(function(n){n!=="selectionchange"&&(DI.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Rd("selectionchange",!1,e))}}function b_(t,e,n,r){switch(f_(e)){case 1:var s=KT;break;case 4:s=QT;break;default:s=Gf}n=s.bind(null,e,n,t),s=void 0,!xh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function jd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;u!==null;){if(a=bs(u),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}u=u.parentNode}}r=r.return}Zv(function(){var d=i,p=$f(n),g=[];e:{var h=N_.get(t);if(h!==void 0){var E=Qf,A=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":E=cI;break;case"focusin":A="focus",E=kd;break;case"focusout":A="blur",E=kd;break;case"beforeblur":case"afterblur":E=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=JT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=fI;break;case I_:case S_:case k_:E=tI;break;case C_:E=mI;break;case"scroll":E=YT;break;case"wheel":E=yI;break;case"copy":case"cut":case"paste":E=rI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=qg}var C=(e&4)!==0,v=!C&&t==="scroll",x=C?h!==null?h+"Capture":null:h;C=[];for(var y=d,k;y!==null;){k=y;var b=k.stateNode;if(k.tag===5&&b!==null&&(k=b,x!==null&&(b=fo(y,x),b!=null&&C.push(wo(y,b,k)))),v)break;y=y.return}0<C.length&&(h=new E(h,A,null,n,p),g.push({event:h,listeners:C}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",h&&n!==_h&&(A=n.relatedTarget||n.fromElement)&&(bs(A)||A[yr]))break e;if((E||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,E?(A=n.relatedTarget||n.toElement,E=d,A=A?bs(A):null,A!==null&&(v=Zs(A),A!==v||A.tag!==5&&A.tag!==6)&&(A=null)):(E=null,A=d),E!==A)){if(C=$g,b="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=qg,b="onPointerLeave",x="onPointerEnter",y="pointer"),v=E==null?h:xi(E),k=A==null?h:xi(A),h=new C(b,y+"leave",E,n,p),h.target=v,h.relatedTarget=k,b=null,bs(p)===d&&(C=new C(x,y+"enter",A,n,p),C.target=k,C.relatedTarget=v,b=C),v=b,E&&A)t:{for(C=E,x=A,y=0,k=C;k;k=hi(k))y++;for(k=0,b=x;b;b=hi(b))k++;for(;0<y-k;)C=hi(C),y--;for(;0<k-y;)x=hi(x),k--;for(;y--;){if(C===x||x!==null&&C===x.alternate)break t;C=hi(C),x=hi(x)}C=null}else C=null;E!==null&&ny(g,h,E,C,!1),A!==null&&v!==null&&ny(g,v,A,C,!0)}}e:{if(h=d?xi(d):window,E=h.nodeName&&h.nodeName.toLowerCase(),E==="select"||E==="input"&&h.type==="file")var M=II;else if(Kg(h))if(__)M=NI;else{M=kI;var L=SI}else(E=h.nodeName)&&E.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(M=CI);if(M&&(M=M(t,d))){v_(g,M,n,p);break e}L&&L(t,h,d),t==="focusout"&&(L=h._wrapperState)&&L.controlled&&h.type==="number"&&ph(h,"number",h.value)}switch(L=d?xi(d):window,t){case"focusin":(Kg(L)||L.contentEditable==="true")&&(_i=L,kh=d,eo=null);break;case"focusout":eo=kh=_i=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,Zg(g,n,p);break;case"selectionchange":if(PI)break;case"keydown":case"keyup":Zg(g,n,p)}var _;if(Xf)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else vi?g_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(m_&&n.locale!=="ko"&&(vi||w!=="onCompositionStart"?w==="onCompositionEnd"&&vi&&(_=p_()):($r=p,Kf="value"in $r?$r.value:$r.textContent,vi=!0)),L=Cu(d,w),0<L.length&&(w=new Wg(w,t,null,n,p),g.push({event:w,listeners:L}),_?w.data=_:(_=y_(n),_!==null&&(w.data=_)))),(_=_I?wI(t,n):xI(t,n))&&(d=Cu(d,"onBeforeInput"),0<d.length&&(p=new Wg("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=_))}A_(g,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fo(t,n),i!=null&&r.unshift(wo(t,i,s)),i=fo(t,e),i!=null&&r.push(wo(t,i,s))),t=t.return}return r}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ny(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=fo(n,i),c!=null&&a.unshift(wo(n,c,u))):s||(c=fo(n,i),c!=null&&a.push(wo(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var OI=/\r\n?/g,MI=/\u0000|\uFFFD/g;function ry(t){return(typeof t=="string"?t:""+t).replace(OI,`
`).replace(MI,"")}function Ul(t,e,n){if(e=ry(e),ry(t)!==e&&n)throw Error(z(425))}function Nu(){}var Nh=null,Ah=null;function bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,VI=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(UI)}:Ph;function UI(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);go(e)}function Yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ra=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ra,xo="__reactProps$"+ra,yr="__reactContainer$"+ra,Rh="__reactEvents$"+ra,FI="__reactListeners$"+ra,zI="__reactHandles$"+ra;function bs(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iy(t);t!==null;){if(n=t[Ln])return n;t=iy(t)}return e}t=n,n=t.parentNode}return null}function Qo(t){return t=t[Ln]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function yc(t){return t[xo]||null}var jh=[],Ei=-1;function ps(t){return{current:t}}function je(t){0>Ei||(t.current=jh[Ei],jh[Ei]=null,Ei--)}function Ae(t,e){Ei++,jh[Ei]=t.current,t.current=e}var os={},Nt=ps(os),Ht=ps(!1),Ls=os;function Fi(t,e){var n=t.type.contextTypes;if(!n)return os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function Au(){je(Ht),je(Nt)}function ay(t,e,n){if(Nt.current!==os)throw Error(z(168));Ae(Nt,e),Ae(Ht,n)}function P_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,ST(t)||"Unknown",s));return Be({},n,r)}function bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,Ls=Nt.current,Ae(Nt,t),Ae(Ht,Ht.current),!0}function oy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=P_(t,e,Ls),r.__reactInternalMemoizedMergedChildContext=t,je(Ht),je(Nt),Ae(Nt,t)):je(Ht),Ae(Ht,n)}var or=null,vc=!1,Od=!1;function R_(t){or===null?or=[t]:or.push(t)}function BI(t){vc=!0,R_(t)}function ms(){if(!Od&&or!==null){Od=!0;var t=0,e=Ie;try{var n=or;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}or=null,vc=!1}catch(s){throw or!==null&&(or=or.slice(t+1)),r_(Wf,ms),s}finally{Ie=e,Od=!1}}return null}var Ti=[],Ii=0,Pu=null,Ru=0,ln=[],un=0,Vs=null,lr=1,ur="";function ks(t,e){Ti[Ii++]=Ru,Ti[Ii++]=Pu,Pu=t,Ru=e}function j_(t,e,n){ln[un++]=lr,ln[un++]=ur,ln[un++]=Vs,Vs=t;var r=lr;t=ur;var s=32-kn(r)-1;r&=~(1<<s),n+=1;var i=32-kn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,lr=1<<32-kn(e)+s|n<<s|r,ur=i+t}else lr=1<<i|n<<s|r,ur=t}function Zf(t){t.return!==null&&(ks(t,1),j_(t,1,0))}function ep(t){for(;t===Pu;)Pu=Ti[--Ii],Ti[Ii]=null,Ru=Ti[--Ii],Ti[Ii]=null;for(;t===Vs;)Vs=ln[--un],ln[un]=null,ur=ln[--un],ln[un]=null,lr=ln[--un],ln[un]=null}var rn=null,tn=null,Oe=!1,In=null;function D_(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,tn=Yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vs!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rn=t,tn=null,!0):!1;default:return!1}}function Dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Oh(t){if(Oe){var e=tn;if(e){var n=e;if(!ly(t,e)){if(Dh(t))throw Error(z(418));e=Yr(n.nextSibling);var r=rn;e&&ly(t,e)?D_(r,n):(t.flags=t.flags&-4097|2,Oe=!1,rn=t)}}else{if(Dh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,rn=t}}}function uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function Fl(t){if(t!==rn)return!1;if(!Oe)return uy(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bh(t.type,t.memoizedProps)),e&&(e=tn)){if(Dh(t))throw O_(),Error(z(418));for(;e;)D_(t,e),e=Yr(e.nextSibling)}if(uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=Yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=rn?Yr(t.stateNode.nextSibling):null;return!0}function O_(){for(var t=tn;t;)t=Yr(t.nextSibling)}function zi(){tn=rn=null,Oe=!1}function tp(t){In===null?In=[t]:In.push(t)}var $I=Sr.ReactCurrentBatchConfig;function Ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var u=s.refs;a===null?delete u[i]:u[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function zl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cy(t){var e=t._init;return e(t._payload)}function M_(t){function e(x,y){if(t){var k=x.deletions;k===null?(x.deletions=[y],x.flags|=16):k.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=es(x,y),x.index=0,x.sibling=null,x}function i(x,y,k){return x.index=k,t?(k=x.alternate,k!==null?(k=k.index,k<y?(x.flags|=2,y):k):(x.flags|=2,y)):(x.flags|=1048576,y)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function u(x,y,k,b){return y===null||y.tag!==6?(y=Bd(k,x.mode,b),y.return=x,y):(y=s(y,k),y.return=x,y)}function c(x,y,k,b){var M=k.type;return M===yi?p(x,y,k.props.children,b,k.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Dr&&cy(M)===y.type)?(b=s(y,k.props),b.ref=Ra(x,y,k),b.return=x,b):(b=cu(k.type,k.key,k.props,null,x.mode,b),b.ref=Ra(x,y,k),b.return=x,b)}function d(x,y,k,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=$d(k,x.mode,b),y.return=x,y):(y=s(y,k.children||[]),y.return=x,y)}function p(x,y,k,b,M){return y===null||y.tag!==7?(y=Os(k,x.mode,b,M),y.return=x,y):(y=s(y,k),y.return=x,y)}function g(x,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Bd(""+y,x.mode,k),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bl:return k=cu(y.type,y.key,y.props,null,x.mode,k),k.ref=Ra(x,null,y),k.return=x,k;case gi:return y=$d(y,x.mode,k),y.return=x,y;case Dr:var b=y._init;return g(x,b(y._payload),k)}if(Fa(y)||Ca(y))return y=Os(y,x.mode,k,null),y.return=x,y;zl(x,y)}return null}function h(x,y,k,b){var M=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:u(x,y,""+k,b);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bl:return k.key===M?c(x,y,k,b):null;case gi:return k.key===M?d(x,y,k,b):null;case Dr:return M=k._init,h(x,y,M(k._payload),b)}if(Fa(k)||Ca(k))return M!==null?null:p(x,y,k,b,null);zl(x,k)}return null}function E(x,y,k,b,M){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(k)||null,u(y,x,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return x=x.get(b.key===null?k:b.key)||null,c(y,x,b,M);case gi:return x=x.get(b.key===null?k:b.key)||null,d(y,x,b,M);case Dr:var L=b._init;return E(x,y,k,L(b._payload),M)}if(Fa(b)||Ca(b))return x=x.get(k)||null,p(y,x,b,M,null);zl(y,b)}return null}function A(x,y,k,b){for(var M=null,L=null,_=y,w=y=0,I=null;_!==null&&w<k.length;w++){_.index>w?(I=_,_=null):I=_.sibling;var S=h(x,_,k[w],b);if(S===null){_===null&&(_=I);break}t&&_&&S.alternate===null&&e(x,_),y=i(S,y,w),L===null?M=S:L.sibling=S,L=S,_=I}if(w===k.length)return n(x,_),Oe&&ks(x,w),M;if(_===null){for(;w<k.length;w++)_=g(x,k[w],b),_!==null&&(y=i(_,y,w),L===null?M=_:L.sibling=_,L=_);return Oe&&ks(x,w),M}for(_=r(x,_);w<k.length;w++)I=E(_,x,w,k[w],b),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?w:I.key),y=i(I,y,w),L===null?M=I:L.sibling=I,L=I);return t&&_.forEach(function(j){return e(x,j)}),Oe&&ks(x,w),M}function C(x,y,k,b){var M=Ca(k);if(typeof M!="function")throw Error(z(150));if(k=M.call(k),k==null)throw Error(z(151));for(var L=M=null,_=y,w=y=0,I=null,S=k.next();_!==null&&!S.done;w++,S=k.next()){_.index>w?(I=_,_=null):I=_.sibling;var j=h(x,_,S.value,b);if(j===null){_===null&&(_=I);break}t&&_&&j.alternate===null&&e(x,_),y=i(j,y,w),L===null?M=j:L.sibling=j,L=j,_=I}if(S.done)return n(x,_),Oe&&ks(x,w),M;if(_===null){for(;!S.done;w++,S=k.next())S=g(x,S.value,b),S!==null&&(y=i(S,y,w),L===null?M=S:L.sibling=S,L=S);return Oe&&ks(x,w),M}for(_=r(x,_);!S.done;w++,S=k.next())S=E(_,x,w,S.value,b),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?w:S.key),y=i(S,y,w),L===null?M=S:L.sibling=S,L=S);return t&&_.forEach(function(P){return e(x,P)}),Oe&&ks(x,w),M}function v(x,y,k,b){if(typeof k=="object"&&k!==null&&k.type===yi&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case bl:e:{for(var M=k.key,L=y;L!==null;){if(L.key===M){if(M=k.type,M===yi){if(L.tag===7){n(x,L.sibling),y=s(L,k.props.children),y.return=x,x=y;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Dr&&cy(M)===L.type){n(x,L.sibling),y=s(L,k.props),y.ref=Ra(x,L,k),y.return=x,x=y;break e}n(x,L);break}else e(x,L);L=L.sibling}k.type===yi?(y=Os(k.props.children,x.mode,b,k.key),y.return=x,x=y):(b=cu(k.type,k.key,k.props,null,x.mode,b),b.ref=Ra(x,y,k),b.return=x,x=b)}return a(x);case gi:e:{for(L=k.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(x,y.sibling),y=s(y,k.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=$d(k,x.mode,b),y.return=x,x=y}return a(x);case Dr:return L=k._init,v(x,y,L(k._payload),b)}if(Fa(k))return A(x,y,k,b);if(Ca(k))return C(x,y,k,b);zl(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,k),y.return=x,x=y):(n(x,y),y=Bd(k,x.mode,b),y.return=x,x=y),a(x)):n(x,y)}return v}var Bi=M_(!0),L_=M_(!1),ju=ps(null),Du=null,Si=null,np=null;function rp(){np=Si=Du=null}function sp(t){var e=ju.current;je(ju),t._currentValue=e}function Mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Du=t,np=Si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if(np!==t)if(t={context:t,memoizedValue:e,next:null},Si===null){if(Du===null)throw Error(z(308));Si=t,Du.dependencies={lanes:0,firstContext:t}}else Si=Si.next=t;return e}var Ps=null;function ip(t){Ps===null?Ps=[t]:Ps.push(t)}function V_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ip(e)):(n.next=s.next,s.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Or=!1;function ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vr(t,n)}return s=r.interleaved,s===null?(e.next=e,ip(r)):(e.next=s.next,s.next=e),r.interleaved=e,vr(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qf(t,n)}}function dy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ou(t,e,n,r){var s=t.updateQueue;Or=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;a=0,p=d=c=null,u=i;do{var h=u.lane,E=u.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,C=u;switch(h=e,E=n,C.tag){case 1:if(A=C.payload,typeof A=="function"){g=A.call(E,g,h);break e}g=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=C.payload,h=typeof A=="function"?A.call(E,g,h):A,h==null)break e;g=Be({},g,h);break e;case 2:Or=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[u]:h.push(u))}else E={eventTime:E,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=E,c=g):p=p.next=E,a|=h;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;h=u,u=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fs|=a,t.lanes=a,t.memoizedState=g}}function hy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Yo={},Fn=ps(Yo),Eo=ps(Yo),To=ps(Yo);function Rs(t){if(t===Yo)throw Error(z(174));return t}function op(t,e){switch(Ae(To,e),Ae(Eo,t),Ae(Fn,Yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gh(e,t)}je(Fn),Ae(Fn,e)}function $i(){je(Fn),je(Eo),je(To)}function F_(t){Rs(To.current);var e=Rs(Fn.current),n=gh(e,t.type);e!==n&&(Ae(Eo,t),Ae(Fn,n))}function lp(t){Eo.current===t&&(je(Fn),je(Eo))}var Ve=ps(0);function Mu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Md=[];function up(){for(var t=0;t<Md.length;t++)Md[t]._workInProgressVersionPrimary=null;Md.length=0}var iu=Sr.ReactCurrentDispatcher,Ld=Sr.ReactCurrentBatchConfig,Us=0,Fe=null,nt=null,ot=null,Lu=!1,to=!1,Io=0,WI=0;function xt(){throw Error(z(321))}function cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function dp(t,e,n,r,s,i){if(Us=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?KI:QI,t=n(r,s),to){i=0;do{if(to=!1,Io=0,25<=i)throw Error(z(301));i+=1,ot=nt=null,e.updateQueue=null,iu.current=YI,t=n(r,s)}while(to)}if(iu.current=Vu,e=nt!==null&&nt.next!==null,Us=0,ot=nt=Fe=null,Lu=!1,e)throw Error(z(300));return t}function hp(){var t=Io!==0;return Io=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Fe.memoizedState=ot=t:ot=ot.next=t,ot}function gn(){if(nt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ot===null?Fe.memoizedState:ot.next;if(e!==null)ot=e,nt=t;else{if(t===null)throw Error(z(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Fe.memoizedState=ot=t:ot=ot.next=t}return ot}function So(t,e){return typeof e=="function"?e(t):e}function Vd(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=a=null,c=null,d=i;do{var p=d.lane;if((Us&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,a=r):c=c.next=g,Fe.lanes|=p,Fs|=p}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=u,Nn(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,Fs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ud(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Nn(i,e.memoizedState)||(qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function z_(){}function B_(t,e){var n=Fe,r=gn(),s=e(),i=!Nn(r.memoizedState,s);if(i&&(r.memoizedState=s,qt=!0),r=r.queue,fp(q_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,ko(9,W_.bind(null,n,r,s,e),void 0,null),lt===null)throw Error(z(349));Us&30||$_(n,e,s)}return s}function $_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function W_(t,e,n,r){e.value=n,e.getSnapshot=r,H_(e)&&G_(t)}function q_(t,e,n){return n(function(){H_(e)&&G_(t)})}function H_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function G_(t){var e=vr(t,1);e!==null&&Cn(e,t,1,-1)}function fy(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:t},e.queue=t,t=t.dispatch=GI.bind(null,Fe,t),[e.memoizedState,t]}function ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K_(){return gn().memoizedState}function au(t,e,n,r){var s=Mn();Fe.flags|=t,s.memoizedState=ko(1|e,n,void 0,r===void 0?null:r)}function _c(t,e,n,r){var s=gn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var a=nt.memoizedState;if(i=a.destroy,r!==null&&cp(r,a.deps)){s.memoizedState=ko(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=ko(1|e,n,i,r)}function py(t,e){return au(8390656,8,t,e)}function fp(t,e){return _c(2048,8,t,e)}function Q_(t,e){return _c(4,2,t,e)}function Y_(t,e){return _c(4,4,t,e)}function X_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J_(t,e,n){return n=n!=null?n.concat([t]):null,_c(4,4,X_.bind(null,e,t),n)}function pp(){}function Z_(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ew(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tw(t,e,n){return Us&21?(Nn(n,e)||(n=a_(),Fe.lanes|=n,Fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function qI(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Ld.transition;Ld.transition={};try{t(!1),e()}finally{Ie=n,Ld.transition=r}}function nw(){return gn().memoizedState}function HI(t,e,n){var r=Zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rw(t))sw(e,n);else if(n=V_(t,e,n,r),n!==null){var s=Vt();Cn(n,t,r,s),iw(n,e,r)}}function GI(t,e,n){var r=Zr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rw(t))sw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,u=i(a,n);if(s.hasEagerState=!0,s.eagerState=u,Nn(u,a)){var c=e.interleaved;c===null?(s.next=s,ip(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=V_(t,e,s,r),n!==null&&(s=Vt(),Cn(n,t,r,s),iw(n,e,r))}}function rw(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function sw(t,e){to=Lu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qf(t,n)}}var Vu={readContext:mn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},KI={readContext:mn,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:py,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,au(4194308,4,X_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return au(4194308,4,t,e)},useInsertionEffect:function(t,e){return au(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HI.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:fy,useDebugValue:pp,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=fy(!1),e=t[0];return t=qI.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=Mn();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),lt===null)throw Error(z(349));Us&30||$_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,py(q_.bind(null,r,i,t),[t]),r.flags|=2048,ko(9,W_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Mn(),e=lt.identifierPrefix;if(Oe){var n=ur,r=lr;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QI={readContext:mn,useCallback:Z_,useContext:mn,useEffect:fp,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:ew,useReducer:Vd,useRef:K_,useState:function(){return Vd(So)},useDebugValue:pp,useDeferredValue:function(t){var e=gn();return tw(e,nt.memoizedState,t)},useTransition:function(){var t=Vd(So)[0],e=gn().memoizedState;return[t,e]},useMutableSource:z_,useSyncExternalStore:B_,useId:nw,unstable_isNewReconciler:!1},YI={readContext:mn,useCallback:Z_,useContext:mn,useEffect:fp,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:ew,useReducer:Ud,useRef:K_,useState:function(){return Ud(So)},useDebugValue:pp,useDeferredValue:function(t){var e=gn();return nt===null?e.memoizedState=t:tw(e,nt.memoizedState,t)},useTransition:function(){var t=Ud(So)[0],e=gn().memoizedState;return[t,e]},useMutableSource:z_,useSyncExternalStore:B_,useId:nw,unstable_isNewReconciler:!1};function En(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wc={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=Zr(t),i=fr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xr(t,i,s),e!==null&&(Cn(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=Zr(t),i=fr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xr(t,i,s),e!==null&&(Cn(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=Zr(t),s=fr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xr(t,s,r),e!==null&&(Cn(e,t,r,n),su(e,t,r))}};function my(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!vo(n,r)||!vo(s,i):!0}function aw(t,e,n){var r=!1,s=os,i=e.contextType;return typeof i=="object"&&i!==null?i=mn(i):(s=Gt(e)?Ls:Nt.current,r=e.contextTypes,i=(r=r!=null)?Fi(t,s):os),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function gy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wc.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ap(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mn(i):(i=Gt(e)?Ls:Nt.current,s.context=Fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wc.enqueueReplaceState(s,s.state,null),Ou(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wi(t,e){try{var n="",r=e;do n+=IT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Fd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XI=typeof WeakMap=="function"?WeakMap:Map;function ow(t,e,n){n=fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fu||(Fu=!0,Qh=r),Uh(t,e)},n}function lw(t,e,n){n=fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Uh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Uh(t,e),typeof r!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function yy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=d2.bind(null,t,e,n),e.then(t,t))}function vy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _y(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fr(-1,1),e.tag=2,Xr(n,e,1))),n.lanes|=1),t)}var JI=Sr.ReactCurrentOwner,qt=!1;function Mt(t,e,n,r){e.child=t===null?L_(e,null,n,r):Bi(e,t.child,n,r)}function wy(t,e,n,r,s){n=n.render;var i=e.ref;return ji(e,s),r=dp(t,e,n,r,i,s),n=hp(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_r(t,e,s)):(Oe&&n&&Zf(e),e.flags|=1,Mt(t,e,r,s),e.child)}function xy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ep(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,uw(t,e,i,r,s)):(t=cu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:vo,n(a,r)&&t.ref===e.ref)return _r(t,e,s)}return e.flags|=1,t=es(i,r),t.ref=e.ref,t.return=e,e.child=t}function uw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vo(i,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,_r(t,e,s)}return Fh(t,e,n,r,s)}function cw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ci,en),en|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ci,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Ci,en),en|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Ci,en),en|=r;return Mt(t,e,s,n),e.child}function dw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fh(t,e,n,r,s){var i=Gt(n)?Ls:Nt.current;return i=Fi(e,i),ji(e,s),n=dp(t,e,n,r,i,s),r=hp(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_r(t,e,s)):(Oe&&r&&Zf(e),e.flags|=1,Mt(t,e,n,s),e.child)}function Ey(t,e,n,r,s){if(Gt(n)){var i=!0;bu(e)}else i=!1;if(ji(e,s),e.stateNode===null)ou(t,e),aw(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=mn(d):(d=Gt(n)?Ls:Nt.current,d=Fi(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||c!==d)&&gy(e,a,r,d),Or=!1;var h=e.memoizedState;a.state=h,Ou(e,r,a,s),c=e.memoizedState,u!==r||h!==c||Ht.current||Or?(typeof p=="function"&&(Lh(e,n,p,r),c=e.memoizedState),(u=Or||my(e,n,u,r,h,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,U_(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:En(e.type,u),a.props=d,g=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=mn(c):(c=Gt(n)?Ls:Nt.current,c=Fi(e,c));var E=n.getDerivedStateFromProps;(p=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||h!==c)&&gy(e,a,r,c),Or=!1,h=e.memoizedState,a.state=h,Ou(e,r,a,s);var A=e.memoizedState;u!==g||h!==A||Ht.current||Or?(typeof E=="function"&&(Lh(e,n,E,r),A=e.memoizedState),(d=Or||my(e,n,d,r,h,A,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return zh(t,e,n,r,i,s)}function zh(t,e,n,r,s,i){dw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&oy(e,n,!1),_r(t,e,i);r=e.stateNode,JI.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Bi(e,t.child,null,i),e.child=Bi(e,null,u,i)):Mt(t,e,u,i),e.memoizedState=r.state,s&&oy(e,n,!0),e.child}function hw(t){var e=t.stateNode;e.pendingContext?ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ay(t,e.context,!1),op(t,e.containerInfo)}function Ty(t,e,n,r,s){return zi(),tp(s),e.flags|=256,Mt(t,e,n,r),e.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function $h(t){return{baseLanes:t,cachePool:null,transitions:null}}function fw(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Ve,s&1),t===null)return Oh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Tc(a,r,0,null),t=Os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$h(n),e.memoizedState=Bh,t):mp(e,a));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return ZI(t,e,a,r,u,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=es(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=es(u,i):(i=Os(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?$h(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Bh,r}return i=t.child,t=i.sibling,r=es(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mp(t,e){return e=Tc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bl(t,e,n,r){return r!==null&&tp(r),Bi(e,t.child,null,n),t=mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZI(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Fd(Error(z(422))),Bl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tc({mode:"visible",children:r.children},s,0,null),i=Os(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bi(e,t.child,null,a),e.child.memoizedState=$h(a),e.memoizedState=Bh,i);if(!(e.mode&1))return Bl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=Fd(i,r,void 0),Bl(t,e,a,r)}if(u=(a&t.childLanes)!==0,qt||u){if(r=lt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vr(t,s),Cn(r,t,s,-1))}return xp(),r=Fd(Error(z(421))),Bl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=h2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,tn=Yr(s.nextSibling),rn=e,Oe=!0,In=null,t!==null&&(ln[un++]=lr,ln[un++]=ur,ln[un++]=Vs,lr=t.id,ur=t.overflow,Vs=e),e=mp(e,r.children),e.flags|=4096,e)}function Iy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mh(t.return,e,n)}function zd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function pw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iy(t,n,e);else if(t.tag===19)Iy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zd(e,!0,n,null,i);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e2(t,e,n){switch(e.tag){case 3:hw(e),zi();break;case 5:F_(e);break;case 1:Gt(e.type)&&bu(e);break;case 4:op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(ju,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?fw(t,e,n):(Ae(Ve,Ve.current&1),t=_r(t,e,n),t!==null?t.sibling:null);Ae(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,cw(t,e,n)}return _r(t,e,n)}var mw,Wh,gw,yw;mw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wh=function(){};gw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rs(Fn.current);var i=null;switch(n){case"input":s=hh(t,s),r=hh(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=mh(t,s),r=mh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nu)}yh(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(co.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pe("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};yw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ja(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t2(t,e,n){var r=e.pendingProps;switch(ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Gt(e.type)&&Au(),Et(e),null;case 3:return r=e.stateNode,$i(),je(Ht),je(Nt),up(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,In!==null&&(Jh(In),In=null))),Wh(t,e),Et(e),null;case 5:lp(e);var s=Rs(To.current);if(n=e.type,t!==null&&e.stateNode!=null)gw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Et(e),null}if(t=Rs(Fn.current),Fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ln]=e,r[xo]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Ba.length;s++)Pe(Ba[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":jg(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Og(r,i),Pe("invalid",r)}yh(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var u=i[a];a==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,u,t),s=["children",""+u]):co.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Pl(r),Dg(r,i,!0);break;case"textarea":Pl(r),Mg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Ln]=e,t[xo]=r,mw(t,e,!1,!1),e.stateNode=t;e:{switch(a=vh(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ba.length;s++)Pe(Ba[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":jg(t,r),s=hh(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Og(t,r),s=mh(t,r),Pe("invalid",t);break;default:s=r}yh(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Kv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Hv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ho(t,c):typeof c=="number"&&ho(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(co.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Pe("scroll",t):c!=null&&Uf(t,i,c,a))}switch(n){case"input":Pl(t),Dg(t,r,!1);break;case"textarea":Pl(t),Mg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+as(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ai(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)yw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Rs(To.current),Rs(Fn.current),Fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(i=r.nodeValue!==n)&&(t=rn,t!==null))switch(t.tag){case 3:Ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return Et(e),null;case 13:if(je(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&tn!==null&&e.mode&1&&!(e.flags&128))O_(),zi(),e.flags|=98560,i=!1;else if(i=Fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Ln]=e}else zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else In!==null&&(Jh(In),In=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?rt===0&&(rt=3):xp())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return $i(),Wh(t,e),t===null&&_o(e.stateNode.containerInfo),Et(e),null;case 10:return sp(e.type._context),Et(e),null;case 17:return Gt(e.type)&&Au(),Et(e),null;case 19:if(je(Ve),i=e.memoizedState,i===null)return Et(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ja(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Mu(t),a!==null){for(e.flags|=128,ja(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>qi&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Oe)return Et(e),null}else 2*Ye()-i.renderingStartTime>qi&&n!==1073741824&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=Ve.current,Ae(Ve,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return wp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function n2(t,e){switch(ep(e),e.tag){case 1:return Gt(e.type)&&Au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $i(),je(Ht),je(Nt),up(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lp(e),null;case 13:if(je(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ve),null;case 4:return $i(),null;case 10:return sp(e.type._context),null;case 22:case 23:return wp(),null;case 24:return null;default:return null}}var $l=!1,St=!1,r2=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function qh(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var Sy=!1;function s2(t,e){if(Nh=Su,t=E_(),Jf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,d=0,p=0,g=t,h=null;t:for(;;){for(var E;g!==n||s!==0&&g.nodeType!==3||(u=a+s),g!==i||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(E=g.firstChild)!==null;)h=g,g=E;for(;;){if(g===t)break t;if(h===n&&++d===s&&(u=a),h===i&&++p===r&&(c=a),(E=g.nextSibling)!==null)break;g=h,h=g.parentNode}g=E}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Su=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var C=A.memoizedProps,v=A.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?C:En(e.type,C),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Ge(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return A=Sy,Sy=!1,A}function no(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&qh(e,n,i)}s=s.next}while(s!==r)}}function xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vw(t){var e=t.alternate;e!==null&&(t.alternate=null,vw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[xo],delete e[Rh],delete e[FI],delete e[zI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _w(t){return t.tag===5||t.tag===3||t.tag===4}function ky(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_w(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nu));else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}function Kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kh(t,e,n),t=t.sibling;t!==null;)Kh(t,e,n),t=t.sibling}var dt=null,Tn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)ww(t,e,n),n=n.sibling}function ww(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(fc,n)}catch{}switch(n.tag){case 5:St||ki(n,e);case 6:var r=dt,s=Tn;dt=null,Pr(t,e,n),dt=r,Tn=s,dt!==null&&(Tn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(Tn?(t=dt,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),go(t)):Dd(dt,n.stateNode));break;case 4:r=dt,s=Tn,dt=n.stateNode.containerInfo,Tn=!0,Pr(t,e,n),dt=r,Tn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&qh(n,e,a),s=s.next}while(s!==r)}Pr(t,e,n);break;case 1:if(!St&&(ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ge(n,e,u)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Pr(t,e,n),St=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function Cy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r2),e.forEach(function(r){var s=f2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:dt=u.stateNode,Tn=!1;break e;case 3:dt=u.stateNode.containerInfo,Tn=!0;break e;case 4:dt=u.stateNode.containerInfo,Tn=!0;break e}u=u.return}if(dt===null)throw Error(z(160));ww(i,a,s),dt=null,Tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ge(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xw(e,t),e=e.sibling}function xw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),jn(t),r&4){try{no(3,t,t.return),xc(3,t)}catch(C){Ge(t,t.return,C)}try{no(5,t,t.return)}catch(C){Ge(t,t.return,C)}}break;case 1:xn(e,t),jn(t),r&512&&n!==null&&ki(n,n.return);break;case 5:if(xn(e,t),jn(t),r&512&&n!==null&&ki(n,n.return),t.flags&32){var s=t.stateNode;try{ho(s,"")}catch(C){Ge(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&$v(s,i),vh(u,a);var d=vh(u,i);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?Kv(s,g):p==="dangerouslySetInnerHTML"?Hv(s,g):p==="children"?ho(s,g):Uf(s,p,g,d)}switch(u){case"input":fh(s,i);break;case"textarea":Wv(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Ai(s,!!i.multiple,E,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ai(s,!!i.multiple,i.defaultValue,!0):Ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(C){Ge(t,t.return,C)}}break;case 6:if(xn(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Ge(t,t.return,C)}}break;case 3:if(xn(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{go(e.containerInfo)}catch(C){Ge(t,t.return,C)}break;case 4:xn(e,t),jn(t);break;case 13:xn(e,t),jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vp=Ye())),r&4&&Cy(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(St=(d=St)||p,xn(e,t),St=d):xn(e,t),jn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(g=Q=p;Q!==null;){switch(h=Q,E=h.child,h.tag){case 0:case 11:case 14:case 15:no(4,h,h.return);break;case 1:ki(h,h.return);var A=h.stateNode;if(typeof A.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(C){Ge(r,n,C)}}break;case 5:ki(h,h.return);break;case 22:if(h.memoizedState!==null){Ay(g);continue}}E!==null?(E.return=h,Q=E):Ay(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Gv("display",a))}catch(C){Ge(t,t.return,C)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){Ge(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:xn(e,t),jn(t),r&4&&Cy(t);break;case 21:break;default:xn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_w(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ho(s,""),r.flags&=-33);var i=ky(t);Kh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,u=ky(t);Gh(t,u,a);break;default:throw Error(z(161))}}catch(c){Ge(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i2(t,e,n){Q=t,Ew(t)}function Ew(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||$l;if(!a){var u=s.alternate,c=u!==null&&u.memoizedState!==null||St;u=$l;var d=St;if($l=a,(St=c)&&!d)for(Q=s;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?by(s):c!==null?(c.return=a,Q=c):by(s);for(;i!==null;)Q=i,Ew(i),i=i.sibling;Q=s,$l=u,St=d}Ny(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Ny(t)}}function Ny(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:En(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hy(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hy(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&go(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}St||e.flags&512&&Hh(e)}catch(h){Ge(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ay(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function by(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xc(4,e)}catch(c){Ge(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ge(e,s,c)}}var i=e.return;try{Hh(e)}catch(c){Ge(e,i,c)}break;case 5:var a=e.return;try{Hh(e)}catch(c){Ge(e,a,c)}}}catch(c){Ge(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var a2=Math.ceil,Uu=Sr.ReactCurrentDispatcher,gp=Sr.ReactCurrentOwner,fn=Sr.ReactCurrentBatchConfig,ve=0,lt=null,Ze=null,pt=0,en=0,Ci=ps(0),rt=0,Co=null,Fs=0,Ec=0,yp=0,ro=null,$t=null,vp=0,qi=1/0,ar=null,Fu=!1,Qh=null,Jr=null,Wl=!1,Wr=null,zu=0,so=0,Yh=null,lu=-1,uu=0;function Vt(){return ve&6?Ye():lu!==-1?lu:lu=Ye()}function Zr(t){return t.mode&1?ve&2&&pt!==0?pt&-pt:$I.transition!==null?(uu===0&&(uu=a_()),uu):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:f_(t.type)),t):1}function Cn(t,e,n,r){if(50<so)throw so=0,Yh=null,Error(z(185));Go(t,n,r),(!(ve&2)||t!==lt)&&(t===lt&&(!(ve&2)&&(Ec|=n),rt===4&&Lr(t,pt)),Kt(t,r),n===1&&ve===0&&!(e.mode&1)&&(qi=Ye()+500,vc&&ms()))}function Kt(t,e){var n=t.callbackNode;$T(t,e);var r=Iu(t,t===lt?pt:0);if(r===0)n!==null&&Ug(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ug(n),e===1)t.tag===0?BI(Py.bind(null,t)):R_(Py.bind(null,t)),VI(function(){!(ve&6)&&ms()}),n=null;else{switch(o_(r)){case 1:n=Wf;break;case 4:n=s_;break;case 16:n=Tu;break;case 536870912:n=i_;break;default:n=Tu}n=bw(n,Tw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tw(t,e){if(lu=-1,uu=0,ve&6)throw Error(z(327));var n=t.callbackNode;if(Di()&&t.callbackNode!==n)return null;var r=Iu(t,t===lt?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bu(t,r);else{e=r;var s=ve;ve|=2;var i=Sw();(lt!==t||pt!==e)&&(ar=null,qi=Ye()+500,Ds(t,e));do try{u2();break}catch(u){Iw(t,u)}while(!0);rp(),Uu.current=i,ve=s,Ze!==null?e=0:(lt=null,pt=0,e=rt)}if(e!==0){if(e===2&&(s=Th(t),s!==0&&(r=s,e=Xh(t,s))),e===1)throw n=Co,Ds(t,0),Lr(t,r),Kt(t,Ye()),n;if(e===6)Lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!o2(s)&&(e=Bu(t,r),e===2&&(i=Th(t),i!==0&&(r=i,e=Xh(t,i))),e===1))throw n=Co,Ds(t,0),Lr(t,r),Kt(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Cs(t,$t,ar);break;case 3:if(Lr(t,r),(r&130023424)===r&&(e=vp+500-Ye(),10<e)){if(Iu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ph(Cs.bind(null,t,$t,ar),e);break}Cs(t,$t,ar);break;case 4:if(Lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-kn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*a2(r/1960))-r,10<r){t.timeoutHandle=Ph(Cs.bind(null,t,$t,ar),r);break}Cs(t,$t,ar);break;case 5:Cs(t,$t,ar);break;default:throw Error(z(329))}}}return Kt(t,Ye()),t.callbackNode===n?Tw.bind(null,t):null}function Xh(t,e){var n=ro;return t.current.memoizedState.isDehydrated&&(Ds(t,e).flags|=256),t=Bu(t,e),t!==2&&(e=$t,$t=n,e!==null&&Jh(e)),t}function Jh(t){$t===null?$t=t:$t.push.apply($t,t)}function o2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~yp,e&=~Ec,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),r=1<<n;t[n]=-1,e&=~r}}function Py(t){if(ve&6)throw Error(z(327));Di();var e=Iu(t,0);if(!(e&1))return Kt(t,Ye()),null;var n=Bu(t,e);if(t.tag!==0&&n===2){var r=Th(t);r!==0&&(e=r,n=Xh(t,r))}if(n===1)throw n=Co,Ds(t,0),Lr(t,e),Kt(t,Ye()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,$t,ar),Kt(t,Ye()),null}function _p(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(qi=Ye()+500,vc&&ms())}}function zs(t){Wr!==null&&Wr.tag===0&&!(ve&6)&&Di();var e=ve;ve|=1;var n=fn.transition,r=Ie;try{if(fn.transition=null,Ie=1,t)return t()}finally{Ie=r,fn.transition=n,ve=e,!(ve&6)&&ms()}}function wp(){en=Ci.current,je(Ci)}function Ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LI(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Au();break;case 3:$i(),je(Ht),je(Nt),up();break;case 5:lp(r);break;case 4:$i();break;case 13:je(Ve);break;case 19:je(Ve);break;case 10:sp(r.type._context);break;case 22:case 23:wp()}n=n.return}if(lt=t,Ze=t=es(t.current,null),pt=en=e,rt=0,Co=null,yp=Ec=Fs=0,$t=ro=null,Ps!==null){for(e=0;e<Ps.length;e++)if(n=Ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ps=null}return t}function Iw(t,e){do{var n=Ze;try{if(rp(),iu.current=Vu,Lu){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lu=!1}if(Us=0,ot=nt=Fe=null,to=!1,Io=0,gp.current=null,n===null||n.return===null){rt=1,Co=e,Ze=null;break}e:{var i=t,a=n.return,u=n,c=e;if(e=pt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var E=vy(a);if(E!==null){E.flags&=-257,_y(E,a,u,i,e),E.mode&1&&yy(i,d,e),e=E,c=d;var A=e.updateQueue;if(A===null){var C=new Set;C.add(c),e.updateQueue=C}else A.add(c);break e}else{if(!(e&1)){yy(i,d,e),xp();break e}c=Error(z(426))}}else if(Oe&&u.mode&1){var v=vy(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),_y(v,a,u,i,e),tp(Wi(c,u));break e}}i=c=Wi(c,u),rt!==4&&(rt=2),ro===null?ro=[i]:ro.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=ow(i,c,e);dy(i,x);break e;case 1:u=c;var y=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Jr===null||!Jr.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=lw(i,u,e);dy(i,b);break e}}i=i.return}while(i!==null)}Cw(n)}catch(M){e=M,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Sw(){var t=Uu.current;return Uu.current=Vu,t===null?Vu:t}function xp(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(Fs&268435455)&&!(Ec&268435455)||Lr(lt,pt)}function Bu(t,e){var n=ve;ve|=2;var r=Sw();(lt!==t||pt!==e)&&(ar=null,Ds(t,e));do try{l2();break}catch(s){Iw(t,s)}while(!0);if(rp(),ve=n,Uu.current=r,Ze!==null)throw Error(z(261));return lt=null,pt=0,rt}function l2(){for(;Ze!==null;)kw(Ze)}function u2(){for(;Ze!==null&&!DT();)kw(Ze)}function kw(t){var e=Aw(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?Cw(t):Ze=e,gp.current=null}function Cw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n2(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Ze=null;return}}else if(n=t2(n,e,en),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);rt===0&&(rt=5)}function Cs(t,e,n){var r=Ie,s=fn.transition;try{fn.transition=null,Ie=1,c2(t,e,n,r)}finally{fn.transition=s,Ie=r}return null}function c2(t,e,n,r){do Di();while(Wr!==null);if(ve&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WT(t,i),t===lt&&(Ze=lt=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,bw(Tu,function(){return Di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fn.transition,fn.transition=null;var a=Ie;Ie=1;var u=ve;ve|=4,gp.current=null,s2(t,n),xw(n,t),bI(Ah),Su=!!Nh,Ah=Nh=null,t.current=n,i2(n),OT(),ve=u,Ie=a,fn.transition=i}else t.current=n;if(Wl&&(Wl=!1,Wr=t,zu=s),i=t.pendingLanes,i===0&&(Jr=null),VT(n.stateNode),Kt(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fu)throw Fu=!1,t=Qh,Qh=null,t;return zu&1&&t.tag!==0&&Di(),i=t.pendingLanes,i&1?t===Yh?so++:(so=0,Yh=t):so=0,ms(),null}function Di(){if(Wr!==null){var t=o_(zu),e=fn.transition,n=Ie;try{if(fn.transition=null,Ie=16>t?16:t,Wr===null)var r=!1;else{if(t=Wr,Wr=null,zu=0,ve&6)throw Error(z(331));var s=ve;for(ve|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:no(8,p,i)}var g=p.child;if(g!==null)g.return=p,Q=g;else for(;Q!==null;){p=Q;var h=p.sibling,E=p.return;if(vw(p),p===d){Q=null;break}if(h!==null){h.return=E,Q=h;break}Q=E}}}var A=i.alternate;if(A!==null){var C=A.child;if(C!==null){A.child=null;do{var v=C.sibling;C.sibling=null,C=v}while(C!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:no(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Q=x;break e}Q=i.return}}var y=t.current;for(Q=y;Q!==null;){a=Q;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Q=k;else e:for(a=y;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:xc(9,u)}}catch(M){Ge(u,u.return,M)}if(u===a){Q=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,Q=b;break e}Q=u.return}}if(ve=s,ms(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(fc,t)}catch{}r=!0}return r}finally{Ie=n,fn.transition=e}}return!1}function Ry(t,e,n){e=Wi(n,e),e=ow(t,e,1),t=Xr(t,e,1),e=Vt(),t!==null&&(Go(t,1,e),Kt(t,e))}function Ge(t,e,n){if(t.tag===3)Ry(t,t,n);else for(;e!==null;){if(e.tag===3){Ry(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jr===null||!Jr.has(r))){t=Wi(n,t),t=lw(e,t,1),e=Xr(e,t,1),t=Vt(),e!==null&&(Go(e,1,t),Kt(e,t));break}}e=e.return}}function d2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(pt&n)===n&&(rt===4||rt===3&&(pt&130023424)===pt&&500>Ye()-vp?Ds(t,0):yp|=n),Kt(t,e)}function Nw(t,e){e===0&&(t.mode&1?(e=Dl,Dl<<=1,!(Dl&130023424)&&(Dl=4194304)):e=1);var n=Vt();t=vr(t,e),t!==null&&(Go(t,e,n),Kt(t,n))}function h2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nw(t,n)}function f2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Nw(t,n)}var Aw;Aw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,e2(t,e,n);qt=!!(t.flags&131072)}else qt=!1,Oe&&e.flags&1048576&&j_(e,Ru,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ou(t,e),t=e.pendingProps;var s=Fi(e,Nt.current);ji(e,n),s=dp(null,e,r,t,s,n);var i=hp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ap(e),s.updater=wc,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=zh(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&Zf(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ou(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=m2(r),t=En(r,t),s){case 0:e=Fh(null,e,r,t,n);break e;case 1:e=Ey(null,e,r,t,n);break e;case 11:e=wy(null,e,r,t,n);break e;case 14:e=xy(null,e,r,En(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),Fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),Ey(t,e,r,s,n);case 3:e:{if(hw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,U_(t,e),Ou(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wi(Error(z(423)),e),e=Ty(t,e,r,n,s);break e}else if(r!==s){s=Wi(Error(z(424)),e),e=Ty(t,e,r,n,s);break e}else for(tn=Yr(e.stateNode.containerInfo.firstChild),rn=e,Oe=!0,In=null,n=L_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===s){e=_r(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return F_(e),t===null&&Oh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,bh(r,s)?a=null:i!==null&&bh(r,i)&&(e.flags|=32),dw(t,e),Mt(t,e,a,n),e.child;case 6:return t===null&&Oh(e),null;case 13:return fw(t,e,n);case 4:return op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),wy(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ae(ju,r._currentValue),r._currentValue=a,i!==null)if(Nn(i.value,a)){if(i.children===s.children&&!Ht.current){e=_r(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){a=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=fr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mh(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Mh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ji(e,n),s=mn(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=En(r,e.pendingProps),s=En(r.type,s),xy(t,e,r,s,n);case 15:return uw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),ou(t,e),e.tag=1,Gt(r)?(t=!0,bu(e)):t=!1,ji(e,n),aw(e,r,s),Vh(e,r,s,n),zh(null,e,r,!0,t,n);case 19:return pw(t,e,n);case 22:return cw(t,e,n)}throw Error(z(156,e.tag))};function bw(t,e){return r_(t,e)}function p2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new p2(t,e,n,r)}function Ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m2(t){if(typeof t=="function")return Ep(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zf)return 11;if(t===Bf)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ep(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case yi:return Os(n.children,s,i,e);case Ff:a=8,s|=8;break;case lh:return t=hn(12,n,e,s|2),t.elementType=lh,t.lanes=i,t;case uh:return t=hn(13,n,e,s),t.elementType=uh,t.lanes=i,t;case ch:return t=hn(19,n,e,s),t.elementType=ch,t.lanes=i,t;case Fv:return Tc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vv:a=10;break e;case Uv:a=9;break e;case zf:a=11;break e;case Bf:a=14;break e;case Dr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=hn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Os(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function Tc(t,e,n,r){return t=hn(22,t,r,e),t.elementType=Fv,t.lanes=n,t.stateNode={isHidden:!1},t}function Bd(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function $d(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tp(t,e,n,r,s,i,a,u,c){return t=new g2(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ap(i),t}function y2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pw(t){if(!t)return os;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Gt(n))return P_(t,n,e)}return e}function Rw(t,e,n,r,s,i,a,u,c){return t=Tp(n,r,!0,t,s,i,a,u,c),t.context=Pw(null),n=t.current,r=Vt(),s=Zr(n),i=fr(r,s),i.callback=e??null,Xr(n,i,s),t.current.lanes=s,Go(t,s,r),Kt(t,r),t}function Ic(t,e,n,r){var s=e.current,i=Vt(),a=Zr(s);return n=Pw(n),e.context===null?e.context=n:e.pendingContext=n,e=fr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xr(s,e,a),t!==null&&(Cn(t,s,a,i),su(t,s,a)),a}function $u(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ip(t,e){jy(t,e),(t=t.alternate)&&jy(t,e)}function v2(){return null}var jw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sp(t){this._internalRoot=t}Sc.prototype.render=Sp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ic(t,e,null,null)};Sc.prototype.unmount=Sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){Ic(null,t,null,null)}),e[yr]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=c_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mr.length&&e!==0&&e<Mr[n].priority;n++);Mr.splice(n,0,t),n===0&&h_(t)}};function kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function _2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=$u(a);i.call(d)}}var a=Rw(e,r,t,0,null,!1,!1,"",Dy);return t._reactRootContainer=a,t[yr]=a.current,_o(t.nodeType===8?t.parentNode:t),zs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=$u(c);u.call(d)}}var c=Tp(t,0,!1,null,null,!1,!1,"",Dy);return t._reactRootContainer=c,t[yr]=c.current,_o(t.nodeType===8?t.parentNode:t),zs(function(){Ic(e,c,n,r)}),c}function Cc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var u=s;s=function(){var c=$u(a);u.call(c)}}Ic(e,a,t,s)}else a=_2(n,e,t,s,r);return $u(a)}l_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=za(e.pendingLanes);n!==0&&(qf(e,n|1),Kt(e,Ye()),!(ve&6)&&(qi=Ye()+500,ms()))}break;case 13:zs(function(){var r=vr(t,1);if(r!==null){var s=Vt();Cn(r,t,1,s)}}),Ip(t,1)}};Hf=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Vt();Cn(e,t,134217728,n)}Ip(t,134217728)}};u_=function(t){if(t.tag===13){var e=Zr(t),n=vr(t,e);if(n!==null){var r=Vt();Cn(n,t,e,r)}Ip(t,e)}};c_=function(){return Ie};d_=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};wh=function(t,e,n){switch(e){case"input":if(fh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yc(r);if(!s)throw Error(z(90));Bv(r),fh(r,s)}}}break;case"textarea":Wv(t,n);break;case"select":e=n.value,e!=null&&Ai(t,!!n.multiple,e,!1)}};Xv=_p;Jv=zs;var w2={usingClientEntryPoint:!1,Events:[Qo,xi,yc,Qv,Yv,_p]},Da={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x2={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t_(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||v2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{fc=ql.inject(x2),Un=ql}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w2;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kp(e))throw Error(z(200));return y2(t,e,null,n)};an.createRoot=function(t,e){if(!kp(t))throw Error(z(299));var n=!1,r="",s=jw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tp(t,1,!1,null,null,n,!1,r,s),t[yr]=e.current,_o(t.nodeType===8?t.parentNode:t),new Sp(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=t_(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return zs(t)};an.hydrate=function(t,e,n){if(!kc(e))throw Error(z(200));return Cc(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!kp(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=jw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Rw(e,null,t,1,n??null,s,!1,i,a),t[yr]=e.current,_o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sc(e)};an.render=function(t,e,n){if(!kc(e))throw Error(z(200));return Cc(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!kc(t))throw Error(z(40));return t._reactRootContainer?(zs(function(){Cc(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};an.unstable_batchedUpdates=_p;an.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Cc(t,e,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function Dw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dw)}catch(t){console.error(t)}}Dw(),Dv.exports=an;var E2=Dv.exports,Oy=E2;ah.createRoot=Oy.createRoot,ah.hydrateRoot=Oy.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function No(){return No=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},No.apply(this,arguments)}var qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qr||(qr={}));const My="popstate";function T2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:u}=r.location;return Zh("",{pathname:i,search:a,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Wu(s)}return S2(e,n,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I2(){return Math.random().toString(36).substr(2,8)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function Zh(t,e,n,r){return n===void 0&&(n=null),No({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:n,key:e&&e.key||r||I2()})}function Wu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function S2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,u=qr.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(No({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){u=qr.Pop;let v=p(),x=v==null?null:v-d;d=v,c&&c({action:u,location:C.location,delta:x})}function h(v,x){u=qr.Push;let y=Zh(C.location,v,x);d=p()+1;let k=Ly(y,d),b=C.createHref(y);try{a.pushState(k,"",b)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(b)}i&&c&&c({action:u,location:C.location,delta:1})}function E(v,x){u=qr.Replace;let y=Zh(C.location,v,x);d=p();let k=Ly(y,d),b=C.createHref(y);a.replaceState(k,"",b),i&&c&&c({action:u,location:C.location,delta:0})}function A(v){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:Wu(v);return y=y.replace(/ $/,"%20"),ze(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let C={get action(){return u},get location(){return t(s,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(My,g),c=v,()=>{s.removeEventListener(My,g),c=null}},createHref(v){return e(s,v)},createURL:A,encodeLocation(v){let x=A(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:E,go(v){return a.go(v)}};return C}var Vy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vy||(Vy={}));function k2(t,e,n){return n===void 0&&(n="/"),C2(t,e,n)}function C2(t,e,n,r){let s=typeof e=="string"?sa(e):e,i=Hi(s.pathname||"/",n);if(i==null)return null;let a=Ow(t);N2(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let d=U2(i);u=L2(a[c],d)}return u}function Ow(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ze(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=ts([r,c.relativePath]),p=n.concat(c);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ow(i.children,e,p,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:O2(d,i.index),routesMeta:p})};return t.forEach((i,a)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,a);else for(let c of Mw(i.path))s(i,a,c)}),e}function Mw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Mw(r.join("/")),u=[];return u.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function N2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:M2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const A2=/^:[\w-]+$/,b2=3,P2=2,R2=1,j2=10,D2=-2,Uy=t=>t==="*";function O2(t,e){let n=t.split("/"),r=n.length;return n.some(Uy)&&(r+=D2),e&&(r+=P2),n.filter(s=>!Uy(s)).reduce((s,i)=>s+(A2.test(i)?b2:i===""?R2:j2),r)}function M2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function L2(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",g=ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),h=c.route;if(!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:ts([i,g.pathname]),pathnameBase:W2(ts([i,g.pathnameBase])),route:h}),g.pathnameBase!=="/"&&(i=ts([i,g.pathnameBase]))}return a}function ef(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,p,g)=>{let{paramName:h,isOptional:E}=p;if(h==="*"){let C=u[g]||"";a=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const A=u[g];return E&&!A?d[h]=void 0:d[h]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function V2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function U2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Hi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const F2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z2=t=>F2.test(t);function B2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?sa(t):t,i;if(n)if(z2(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Cp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Fy(n.substring(1),"/"):i=Fy(n,e)}else i=e;return{pathname:i,search:q2(r),hash:H2(s)}}function Fy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Np(t,e){let n=$2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ap(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=sa(t):(s=No({},t),ze(!s.pathname||!s.pathname.includes("?"),Wd("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),Wd("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),Wd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),g-=1;s.pathname=h.join("/")}u=g>=0?e[g]:"/"}let c=B2(s,u),d=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const ts=t=>t.join("/").replace(/\/\/+/g,"/"),W2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Lw=["post","put","patch","delete"];new Set(Lw);const K2=["get",...Lw];new Set(K2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(this,arguments)}const Nc=D.createContext(null),Vw=D.createContext(null),kr=D.createContext(null),Ac=D.createContext(null),gs=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Uw=D.createContext(null);function Q2(t,e){let{relative:n}=e===void 0?{}:e;ia()||ze(!1);let{basename:r,navigator:s}=D.useContext(kr),{hash:i,pathname:a,search:u}=Pc(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:ts([r,a])),s.createHref({pathname:c,search:u,hash:i})}function ia(){return D.useContext(Ac)!=null}function aa(){return ia()||ze(!1),D.useContext(Ac).location}function Fw(t){D.useContext(kr).static||D.useLayoutEffect(t)}function bc(){let{isDataRoute:t}=D.useContext(gs);return t?lS():Y2()}function Y2(){ia()||ze(!1);let t=D.useContext(Nc),{basename:e,future:n,navigator:r}=D.useContext(kr),{matches:s}=D.useContext(gs),{pathname:i}=aa(),a=JSON.stringify(Np(s,n.v7_relativeSplatPath)),u=D.useRef(!1);return Fw(()=>{u.current=!0}),D.useCallback(function(d,p){if(p===void 0&&(p={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=Ap(d,JSON.parse(a),i,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ts([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,a,i,t])}function Pc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(kr),{matches:s}=D.useContext(gs),{pathname:i}=aa(),a=JSON.stringify(Np(s,r.v7_relativeSplatPath));return D.useMemo(()=>Ap(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function X2(t,e){return J2(t,e)}function J2(t,e,n,r){ia()||ze(!1);let{navigator:s}=D.useContext(kr),{matches:i}=D.useContext(gs),a=i[i.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=aa(),p;if(e){var g;let v=typeof e=="string"?sa(e):e;c==="/"||(g=v.pathname)!=null&&g.startsWith(c)||ze(!1),p=v}else p=d;let h=p.pathname||"/",E=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");E="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let A=k2(t,{pathname:E}),C=rS(A&&A.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:ts([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ts([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&C?D.createElement(Ac.Provider,{value:{location:Ao({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:qr.Pop}},C):C}function Z2(){let t=oS(),e=G2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const eS=D.createElement(Z2,null);class tS extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(gs.Provider,{value:this.props.routeContext},D.createElement(Uw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nS(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(Nc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(gs.Provider,{value:e},r)}function rS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let p=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);p>=0||ze(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:h,errors:E}=n,A=g.route.loader&&h[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||A){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,g,h)=>{let E,A=!1,C=null,v=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,C=g.route.errorElement||eS,c&&(d<0&&h===0?(uS("route-fallback"),A=!0,v=null):d===h&&(A=!0,v=g.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,h+1)),y=()=>{let k;return E?k=C:A?k=v:g.route.Component?k=D.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=p,D.createElement(nS,{match:g,routeContext:{outlet:p,matches:x,isDataRoute:n!=null},children:k})};return n&&(g.route.ErrorBoundary||g.route.errorElement||h===0)?D.createElement(tS,{location:n.location,revalidation:n.revalidation,component:C,error:E,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var zw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zw||{}),Bw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Bw||{});function sS(t){let e=D.useContext(Nc);return e||ze(!1),e}function iS(t){let e=D.useContext(Vw);return e||ze(!1),e}function aS(t){let e=D.useContext(gs);return e||ze(!1),e}function $w(t){let e=aS(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function oS(){var t;let e=D.useContext(Uw),n=iS(),r=$w();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function lS(){let{router:t}=sS(zw.UseNavigateStable),e=$w(Bw.UseNavigateStable),n=D.useRef(!1);return Fw(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ao({fromRouteId:e},i)))},[t,e])}const zy={};function uS(t,e,n){zy[t]||(zy[t]=!0)}function cS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zn(t){let{to:e,replace:n,state:r,relative:s}=t;ia()||ze(!1);let{future:i,static:a}=D.useContext(kr),{matches:u}=D.useContext(gs),{pathname:c}=aa(),d=bc(),p=Ap(e,Np(u,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(p);return D.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function ct(t){ze(!1)}function dS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=qr.Pop,navigator:i,static:a=!1,future:u}=t;ia()&&ze(!1);let c=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:i,static:a,future:Ao({v7_relativeSplatPath:!1},u)}),[c,u,i,a]);typeof r=="string"&&(r=sa(r));let{pathname:p="/",search:g="",hash:h="",state:E=null,key:A="default"}=r,C=D.useMemo(()=>{let v=Hi(p,c);return v==null?null:{location:{pathname:v,search:g,hash:h,state:E,key:A},navigationType:s}},[c,p,g,h,E,A,s]);return C==null?null:D.createElement(kr.Provider,{value:d},D.createElement(Ac.Provider,{children:n,value:C}))}function hS(t){let{children:e,location:n}=t;return X2(tf(e),n)}new Promise(()=>{});function tf(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,tf(r.props.children,i));return}r.type!==ct&&ze(!1),!r.props.index||!r.props.children||ze(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tf(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(this,arguments)}function Ww(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function fS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pS(t,e){return t.button===0&&(!e||e==="_self")&&!fS(t)}const mS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yS="6";try{window.__reactRouterVersion=yS}catch{}const vS=D.createContext({isTransitioning:!1}),_S="startTransition",By=dT[_S];function wS(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=T2({window:s,v5Compat:!0}));let a=i.current,[u,c]=D.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=D.useCallback(g=>{d&&By?By(()=>c(g)):c(g)},[c,d]);return D.useLayoutEffect(()=>a.listen(p),[a,p]),D.useEffect(()=>cS(r),[r]),D.createElement(dS,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const xS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ES=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TS=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:u,target:c,to:d,preventScrollReset:p,viewTransition:g}=e,h=Ww(e,mS),{basename:E}=D.useContext(kr),A,C=!1;if(typeof d=="string"&&ES.test(d)&&(A=d,xS))try{let k=new URL(window.location.href),b=d.startsWith("//")?new URL(k.protocol+d):new URL(d),M=Hi(b.pathname,E);b.origin===k.origin&&M!=null?d=M+b.search+b.hash:C=!0}catch{}let v=Q2(d,{relative:s}),x=kS(d,{replace:a,state:u,target:c,preventScrollReset:p,relative:s,viewTransition:g});function y(k){r&&r(k),k.defaultPrevented||x(k)}return D.createElement("a",qu({},h,{href:A||v,onClick:C||i?r:y,ref:n,target:c}))}),IS=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:u,to:c,viewTransition:d,children:p}=e,g=Ww(e,gS),h=Pc(c,{relative:g.relative}),E=aa(),A=D.useContext(Vw),{navigator:C,basename:v}=D.useContext(kr),x=A!=null&&CS(h)&&d===!0,y=C.encodeLocation?C.encodeLocation(h).pathname:h.pathname,k=E.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;s||(k=k.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&v&&(b=Hi(b,v)||b);const M=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let L=k===y||!a&&k.startsWith(y)&&k.charAt(M)==="/",_=b!=null&&(b===y||!a&&b.startsWith(y)&&b.charAt(y.length)==="/"),w={isActive:L,isPending:_,isTransitioning:x},I=L?r:void 0,S;typeof i=="function"?S=i(w):S=[i,L?"active":null,_?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(w):u;return D.createElement(TS,qu({},g,{"aria-current":I,className:S,ref:n,style:j,to:c,viewTransition:d}),typeof p=="function"?p(w):p)});var nf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nf||(nf={}));var $y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($y||($y={}));function SS(t){let e=D.useContext(Nc);return e||ze(!1),e}function kS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:u}=e===void 0?{}:e,c=bc(),d=aa(),p=Pc(t,{relative:a});return D.useCallback(g=>{if(pS(g,n)){g.preventDefault();let h=r!==void 0?r:Wu(d)===Wu(p);c(t,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:u})}},[d,c,p,r,s,n,t,i,a,u])}function CS(t,e){e===void 0&&(e={});let n=D.useContext(vS);n==null&&ze(!1);let{basename:r}=SS(nf.useViewTransitionState),s=Pc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Hi(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Hi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ef(s.pathname,a)!=null||ef(s.pathname,i)!=null}var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,u=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,p=i>>2,g=(i&3)<<4|u>>4;let h=(u&15)<<2|d>>6,E=d&63;c||(E=64,a||(h=64)),r.push(n[p],n[g],n[h],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||g==null)throw new AS;const h=i<<2|u>>4;if(r.push(h),d!==64){const E=u<<4&240|d>>2;if(r.push(E),g!==64){const A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bS=function(t){const e=qw(t);return Hw.encodeByteArray(e,!0)},Hu=function(t){return bS(t).replace(/\./g,"")},Gw=function(t){try{return Hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=()=>PS().__FIREBASE_DEFAULTS__,jS=()=>{if(typeof process>"u"||typeof Wy>"u")return;const t=Wy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gw(t[1]);return e&&JSON.parse(e)},Rc=()=>{try{return RS()||jS()||DS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Kw=t=>{var e,n;return(n=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Qw=t=>{const e=Kw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yw=()=>{var t;return(t=Rc())===null||t===void 0?void 0:t.config},Xw=t=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hu(JSON.stringify(n)),Hu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function LS(){var t;const e=(t=Rc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zS(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BS(){return!LS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){try{return typeof indexedDB=="object"}catch{return!1}}function WS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="FirebaseError";class Xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qS,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?HS(i,r):"Error",u=`${this.serviceName}: ${a} (${s}).`;return new Xn(s,u,r)}}function HS(t,e){return t.replace(GS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GS=/\{\$([^}]+)}/g;function KS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(qy(i)&&qy(a)){if(!Gu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QS(t,e){const n=new YS(t,e);return n.subscribe.bind(n)}class YS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qd),s.error===void 0&&(s.error=qd),s.complete===void 0&&(s.complete=qd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ek(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZS(t){return t===Ns?void 0:t}function ek(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const nk={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},rk=ge.INFO,sk={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},ik=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=sk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=rk,this._logHandler=ik,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const ak=(t,e)=>e.some(n=>t instanceof n);let Hy,Gy;function ok(){return Hy||(Hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lk(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zw=new WeakMap,rf=new WeakMap,ex=new WeakMap,Hd=new WeakMap,Pp=new WeakMap;function uk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ns(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Zw.set(n,t)}).catch(()=>{}),Pp.set(e,t),e}function ck(t){if(rf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});rf.set(t,e)}let sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ex.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dk(t){sf=t(sf)}function hk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gd(this),e,...n);return ex.set(r,e.sort?e.sort():[e]),ns(r)}:lk().includes(t)?function(...e){return t.apply(Gd(this),e),ns(Zw.get(this))}:function(...e){return ns(t.apply(Gd(this),e))}}function fk(t){return typeof t=="function"?hk(t):(t instanceof IDBTransaction&&ck(t),ak(t,ok())?new Proxy(t,sf):t)}function ns(t){if(t instanceof IDBRequest)return uk(t);if(Hd.has(t))return Hd.get(t);const e=fk(t);return e!==t&&(Hd.set(t,e),Pp.set(e,t)),e}const Gd=t=>Pp.get(t);function pk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),u=ns(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ns(a.result),c.oldVersion,c.newVersion,ns(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const mk=["get","getKey","getAll","getAllKeys","count"],gk=["put","add","delete","clear"],Kd=new Map;function Ky(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mk.includes(n)))return;const i=async function(a,...u){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return Kd.set(e,i),i}dk(t=>({...t,get:(e,n,r)=>Ky(e,n)||t.get(e,n,r),has:(e,n)=>!!Ky(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",Qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new bp("@firebase/app"),_k="@firebase/app-compat",wk="@firebase/analytics-compat",xk="@firebase/analytics",Ek="@firebase/app-check-compat",Tk="@firebase/app-check",Ik="@firebase/auth",Sk="@firebase/auth-compat",kk="@firebase/database",Ck="@firebase/data-connect",Nk="@firebase/database-compat",Ak="@firebase/functions",bk="@firebase/functions-compat",Pk="@firebase/installations",Rk="@firebase/installations-compat",jk="@firebase/messaging",Dk="@firebase/messaging-compat",Ok="@firebase/performance",Mk="@firebase/performance-compat",Lk="@firebase/remote-config",Vk="@firebase/remote-config-compat",Uk="@firebase/storage",Fk="@firebase/storage-compat",zk="@firebase/firestore",Bk="@firebase/vertexai-preview",$k="@firebase/firestore-compat",Wk="firebase",qk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="[DEFAULT]",Hk={[af]:"fire-core",[_k]:"fire-core-compat",[xk]:"fire-analytics",[wk]:"fire-analytics-compat",[Tk]:"fire-app-check",[Ek]:"fire-app-check-compat",[Ik]:"fire-auth",[Sk]:"fire-auth-compat",[kk]:"fire-rtdb",[Ck]:"fire-data-connect",[Nk]:"fire-rtdb-compat",[Ak]:"fire-fn",[bk]:"fire-fn-compat",[Pk]:"fire-iid",[Rk]:"fire-iid-compat",[jk]:"fire-fcm",[Dk]:"fire-fcm-compat",[Ok]:"fire-perf",[Mk]:"fire-perf-compat",[Lk]:"fire-rc",[Vk]:"fire-rc-compat",[Uk]:"fire-gcs",[Fk]:"fire-gcs-compat",[zk]:"fire-fst",[$k]:"fire-fst-compat",[Bk]:"fire-vertex","fire-js":"fire-js",[Wk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Map,Gk=new Map,lf=new Map;function Yy(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bs(t){const e=t.name;if(lf.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;lf.set(e,t);for(const n of bo.values())Yy(n,t);for(const n of Gk.values())Yy(n,t);return!0}function jc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Xo("app","Firebase",Kk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=qk;function Rp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:of,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw rs.create("bad-app-name",{appName:String(s)});if(n||(n=Yw()),!n)throw rs.create("no-options");const i=bo.get(s);if(i){if(Gu(n,i.options)&&Gu(r,i.config))return i;throw rs.create("duplicate-app",{appName:s})}const a=new tk(s);for(const c of lf.values())a.addComponent(c);const u=new Qk(n,r,a);return bo.set(s,u),u}function jp(t=of){const e=bo.get(t);if(!e&&t===of&&Yw())return Rp();if(!e)throw rs.create("no-app",{appName:t});return e}function Yk(){return Array.from(bo.values())}function Bn(t,e,n){var r;let s=(r=Hk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(u.join(" "));return}Bs(new ls(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebase-heartbeat-database",Jk=1,Po="firebase-heartbeat-store";let Qd=null;function tx(){return Qd||(Qd=pk(Xk,Jk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function Zk(t){try{const n=(await tx()).transaction(Po),r=await n.objectStore(Po).get(nx(t));return await n.done,r}catch(e){if(e instanceof Xn)wr.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function Xy(t,e){try{const r=(await tx()).transaction(Po,"readwrite");await r.objectStore(Po).put(e,nx(t)),await r.done}catch(n){if(n instanceof Xn)wr.warn(n.message);else{const r=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function nx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=1024,tC=30*24*60*60*1e3;class nC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=tC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:r,unsentEntries:s}=rC(this._heartbeatsCache.heartbeats),i=Hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return wr.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function rC(t,e=eC){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Zy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $S()?WS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zy(t){return Hu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){Bs(new ls("platform-logger",e=>new yk(e),"PRIVATE")),Bs(new ls("heartbeat",e=>new nC(e),"PRIVATE")),Bn(af,Qy,t),Bn(af,Qy,"esm2017"),Bn("fire-js","")}iC("");var aC="firebase",oC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(aC,oC,"app");function Dp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lC=rx,sx=new Xo("auth","Firebase",rx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new bp("@firebase/auth");function uC(t,...e){Ku.logLevel<=ge.WARN&&Ku.warn(`Auth (${ei}): ${t}`,...e)}function du(t,...e){Ku.logLevel<=ge.ERROR&&Ku.error(`Auth (${ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw Op(t,...e)}function $n(t,...e){return Op(t,...e)}function ix(t,e,n){const r=Object.assign(Object.assign({},lC()),{[e]:n});return new Xo("auth","Firebase",r).create(e,{appName:t.name})}function pr(t){return ix(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sx.create(t,...e)}function ne(t,e,...n){if(!t)throw Op(e,...n)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw du(e),new Error(e)}function xr(t,e){t||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cC(){return e0()==="http:"||e0()==="https:"}function e0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cC()||US()||"connection"in navigator)?navigator.onLine:!0}function hC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=MS()||FS()}get(){return dC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Zo(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vs(t,e,n,r,s={}){return ox(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const u=Jo(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return VS()||(d.referrerPolicy="no-referrer"),ax.fetch()(lx(t,t.config.apiHost,n,u),d)})}async function ox(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fC),e);try{const s=new gC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Hl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const u=i.ok?a.errorMessage:a.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Hl(t,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ix(t,p,d);An(t,p)}}catch(s){if(s instanceof Xn)throw s;An(t,"network-request-failed",{message:String(s)})}}async function el(t,e,n,r,s={}){const i=await vs(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}function lx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Mp(t.config,s):`${t.config.apiScheme}://${s}`}function mC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),pC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$n(t,e,r);return s.customData._tokenResponse=n,s}function t0(t){return t!==void 0&&t.enterprise!==void 0}class yC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function vC(t,e){return vs(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function ux(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wC(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=Lp(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:io(Yd(s.auth_time)),issuedAtTime:io(Yd(s.iat)),expirationTime:io(Yd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function Lp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return du("JWT malformed, contained fewer than 3 sections"),null;try{const s=Gw(n);return s?JSON.parse(s):(du("Failed to decode base64 JWT payload"),null)}catch(s){return du("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function n0(t){const e=Lp(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xn&&xC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ro(t,ux(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?cx(i.providerUserInfo):[],u=IC(t.providerData,a),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new cf(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function TC(t){const e=it(t);await Qu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cx(t){return t.map(e=>{var{providerId:n}=e,r=Dp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(t,e){const n=await ox(t,{},async()=>{const r=Jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=lx(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",ax.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kC(t,e){return vs(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=n0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await SC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Oi;return r&&(ne(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oi,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ro(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wC(this,e)}reload(){return TC(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(pr(this.auth));const e=await this.getIdToken();return await Ro(this,_C(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,u,c,d,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(u=n.tenantId)!==null&&u!==void 0?u:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:b,isAnonymous:M,providerData:L,stsTokenManager:_}=n;ne(k&&_,e,"internal-error");const w=Oi.fromJSON(this.name,_);ne(typeof k=="string",e,"internal-error"),Rr(g,e.name),Rr(h,e.name),ne(typeof b=="boolean",e,"internal-error"),ne(typeof M=="boolean",e,"internal-error"),Rr(E,e.name),Rr(A,e.name),Rr(C,e.name),Rr(v,e.name),Rr(x,e.name),Rr(y,e.name);const I=new dr({uid:k,auth:e,email:h,emailVerified:b,displayName:g,isAnonymous:M,photoURL:A,phoneNumber:E,tenantId:C,stsTokenManager:w,createdAt:x,lastLoginAt:y});return L&&Array.isArray(L)&&(I.providerData=L.map(S=>Object.assign({},S))),v&&(I._redirectEventId=v),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oi;s.updateFromServerResponse(n);const i=new dr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?cx(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Oi;u.updateFromIdToken(r);const c=new dr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new cf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;function hr(t){xr(t instanceof Function,"Expected a class definition");let e=r0.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,r0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dx.type="NONE";const s0=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){return`firebase:${t}:${e}:${n}`}class Mi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hu(this.userKey,s.apiKey,i),this.fullPersistenceKey=hu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mi(hr(s0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||hr(s0);const a=hu(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){const g=dr._fromJSON(e,p);d!==i&&(u=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Mi(i,e,r):(i=c[0],u&&await i._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Mi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yx(e))return"Blackberry";if(vx(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||px(e))&&!e.includes("edge/"))return"Chrome";if(gx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hx(t=At()){return/firefox\//i.test(t)}function fx(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function px(t=At()){return/crios\//i.test(t)}function mx(t=At()){return/iemobile/i.test(t)}function gx(t=At()){return/android/i.test(t)}function yx(t=At()){return/blackberry/i.test(t)}function vx(t=At()){return/webos/i.test(t)}function Vp(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CC(t=At()){var e;return Vp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NC(){return zS()&&document.documentMode===10}function _x(t=At()){return Vp(t)||gx(t)||vx(t)||yx(t)||/windows phone/i.test(t)||mx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e=[]){let n;switch(t){case"Browser":n=i0(At());break;case"Worker":n=`${i0(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,u)=>{try{const c=e(i);a(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(t,e={}){return vs(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=6;class RC{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:PC,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a0(this),this.idTokenSubscription=new a0(this),this.beforeStateQueue=new AC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Mi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ux(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(pr(this));const n=e?it(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bC(this),n=new RC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Mi.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(u,this,"internal-error"),u.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ti(t){return it(t)}class a0{constructor(e){this.auth=e,this.observer=null,this.addObserver=QS(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DC(t){Dc=t}function xx(t){return Dc.loadJS(t)}function OC(){return Dc.recaptchaEnterpriseScript}function MC(){return Dc.gapiScript}function LC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VC="recaptcha-enterprise",UC="NO_RECAPTCHA";class FC{constructor(e){this.type=VC,this.auth=ti(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,u)=>{vC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new yC(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{u(c)})})}function s(i,a,u){const c=window.grecaptcha;t0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(UC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(u=>{if(!n&&t0(window.grecaptcha))s(u,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=OC();c.length!==0&&(c+=u),xx(c).then(()=>{s(u,i,a)}).catch(d=>{a(d)})}}).catch(u=>{a(u)})})}}async function o0(t,e,n,r=!1){const s=new FC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function df(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await o0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await o0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){const n=jc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Gu(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function BC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $C(t,e,n){const r=ti(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ex(e),{host:a,port:u}=WC(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),qC()}function Ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WC(t){const e=Ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:l0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:l0(a)}}}function l0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function HC(t,e){return vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e){return el(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function QC(t,e){return el(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Up{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,n,"signInWithPassword",GC);case"emailLink":return KC(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,r,"signUpPassword",HC);case"emailLink":return QC(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t,e){return el(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="http://localhost";class $s extends Up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Dp(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new $s(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Li(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Li(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Li(e,n)}buildRequest(){const e={requestUri:YC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JC(t){const e=$a(Wa(t)).link,n=e?$a(Wa(e)).deep_link_id:null,r=$a(Wa(t)).deep_link_id;return(r?$a(Wa(r)).link:null)||r||n||e||t}class Fp{constructor(e){var n,r,s,i,a,u;const c=$a(Wa(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,g=XC((s=c.mode)!==null&&s!==void 0?s:null);ne(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=JC(e);try{return new Fp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,n){return jo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fp.parseLink(n);return ne(r,"argument-error"),jo._fromEmailAndCode(e,r.code,r.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends tl{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends tl{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends tl{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e){return el(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await dr._fromIdTokenResponse(e,r,s),a=u0(r);return new Ws({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=u0(r);return new Ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function u0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Xn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Yu(e,n,r,s)}}function Ix(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Yu._fromErrorAndOperation(t,i,e,r):i})}async function eN(t,e,n=!1){const r=await Ro(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e,n=!1){const{auth:r}=t;if(Vn(r.app))return Promise.reject(pr(r));const s="reauthenticate";try{const i=await Ro(t,Ix(r,s,e,t),n);ne(i.idToken,r,"internal-error");const a=Lp(i.idToken);ne(a,r,"internal-error");const{sub:u}=a;return ne(t.uid===u,r,"user-mismatch"),Ws._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e,n=!1){if(Vn(t.app))return Promise.reject(pr(t));const r="signIn",s=await Ix(t,r,e),i=await Ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function nN(t,e){return Sx(ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(t){const e=ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rN(t,e,n){if(Vn(t.app))return Promise.reject(pr(t));const r=ti(t),a=await df(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZC).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&kx(t),c}),u=await Ws._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function sN(t,e,n){return Vn(t.app)?Promise.reject(pr(t)):nN(it(t),oa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kx(t),r})}function iN(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function aN(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function oN(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function Xd(t){return it(t).signOut()}const Xu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xu,"1"),this.storage.removeItem(Xu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=1e3,uN=10;class Nx extends Cx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);NC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nx.type="LOCAL";const cN=Nx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends Cx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ax.type="SESSION";const bx=Ax;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Oc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(a).map(async d=>d(n.origin,i)),c=await dN(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((u,c)=>{const d=zp("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const h=g;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(h.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function fN(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function pN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gN(){return Px()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="firebaseLocalStorageDb",yN=1,Ju="firebaseLocalStorage",jx="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mc(t,e){return t.transaction([Ju],e?"readwrite":"readonly").objectStore(Ju)}function vN(){const t=indexedDB.deleteDatabase(Rx);return new nl(t).toPromise()}function hf(){const t=indexedDB.open(Rx,yN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ju,{keyPath:jx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ju)?e(r):(r.close(),await vN(),e(await hf()))})})}async function c0(t,e,n){const r=Mc(t,!0).put({[jx]:e,value:n});return new nl(r).toPromise()}async function _N(t,e){const n=Mc(t,!1).get(e),r=await new nl(n).toPromise();return r===void 0?null:r.value}function d0(t,e){const n=Mc(t,!0).delete(e);return new nl(n).toPromise()}const wN=800,xN=3;class Dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Px()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(gN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pN(),!this.activeServiceWorker)return;this.sender=new hN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await c0(e,Xu,"1"),await d0(e,Xu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_N(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mc(s,!1).getAll();return new nl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dx.type="LOCAL";const EN=Dx;new Zo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t,e){return e?hr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Li(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IN(t){return Sx(t.auth,new Bp(t),t.bypassAuthState)}function SN(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),tN(n,new Bp(t),t.bypassAuthState)}async function kN(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),eN(n,new Bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IN;case"linkViaPopup":case"linkViaRedirect":return kN;case"reauthViaPopup":case"reauthViaRedirect":return SN;default:An(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Zo(2e3,1e4);class Ni extends Ox{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CN.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="pendingRedirect",fu=new Map;class AN extends Ox{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await bN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bN(t,e){const n=jN(e),r=RN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function PN(t,e){fu.set(t._key(),e)}function RN(t){return hr(t._redirectPersistence)}function jN(t){return hu(NN,t.config.apiKey,t.name)}async function DN(t,e,n=!1){if(Vn(t.app))return Promise.reject(pr(t));const r=ti(t),s=TN(r,e),a=await new AN(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=10*60*1e3;class MN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Mx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ON&&this.cachedEventUids.clear(),this.cachedEventUids.has(h0(e))}saveEventToCache(e){this.cachedEventUids.add(h0(e)),this.lastProcessedEventTime=Date.now()}}function h0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FN=/^https?/;async function zN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VN(t);for(const n of e)try{if(BN(n))return}catch{}An(t,"unauthorized-domain")}function BN(t){const e=uf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!FN.test(n))return!1;if(UN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new Zo(3e4,6e4);function f0(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WN(t){return new Promise((e,n)=>{var r,s,i;function a(){f0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f0(),n($n(t,"network-request-failed"))},timeout:$N.get()})}if(!((s=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wn().gapi)===null||i===void 0)&&i.load)a();else{const u=LC("iframefcb");return Wn()[u]=()=>{gapi.load?a():n($n(t,"network-request-failed"))},xx(`${MC()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw pu=null,e})}let pu=null;function qN(t){return pu=pu||WN(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Zo(5e3,15e3),GN="__/auth/iframe",KN="emulator/auth/iframe",QN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XN(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mp(e,KN):`https://${t.config.authDomain}/${GN}`,r={apiKey:e.apiKey,appName:t.name,v:ei},s=YN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Jo(r).slice(1)}`}async function JN(t){const e=await qN(t),n=Wn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:XN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=$n(t,"network-request-failed"),u=Wn().setTimeout(()=>{i(a)},HN.get());function c(){Wn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eA=500,tA=600,nA="_blank",rA="http://localhost";class p0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sA(t,e,n,r=eA,s=tA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},ZN),{width:r.toString(),height:s.toString(),top:i,left:a}),d=At().toLowerCase();n&&(u=px(d)?nA:n),hx(d)&&(e=e||rA,c.scrollbars="yes");const p=Object.entries(c).reduce((h,[E,A])=>`${h}${E}=${A},`,"");if(CC(d)&&u!=="_self")return iA(e||"",u),new p0(null);const g=window.open(e||"",u,p);ne(g,t,"popup-blocked");try{g.focus()}catch{}return new p0(g)}function iA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="__/auth/handler",oA="emulator/auth/handler",lA=encodeURIComponent("fac");async function m0(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ei,eventId:s};if(e instanceof Tx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",KS(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))a[p]=g}if(e instanceof tl){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),d=c?`#${lA}=${encodeURIComponent(c)}`:"";return`${uA(t)}?${Jo(u).slice(1)}${d}`}function uA({config:t}){return t.emulator?Mp(t,oA):`https://${t.authDomain}/${aA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="webStorageSupport";class cA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bx,this._completeRedirectFn=DN,this._overrideRedirectResult=PN}async _openPopup(e,n,r,s){var i;xr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await m0(e,n,r,uf(),s);return sA(e,a,zp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await m0(e,n,r,uf(),s);return fN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(xr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JN(e),r=new MN(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jd,{type:Jd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Jd];a!==void 0&&n(!!a),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _x()||fx()||Vp()}}const dA=cA;var g0="@firebase/auth",y0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pA(t){Bs(new ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;ne(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wx(t)},d=new jC(r,s,i,c);return BC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bs(new ls("auth-internal",e=>{const n=ti(e.getProvider("auth").getImmediate());return(r=>new hA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(g0,y0,fA(t)),Bn(g0,y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=5*60,gA=Xw("authIdTokenMaxAge")||mA;let v0=null;const yA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gA)return;const s=n==null?void 0:n.token;v0!==s&&(v0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lx(t=jp()){const e=jc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zC(t,{popupRedirectResolver:dA,persistence:[EN,cN,bx]}),r=Xw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=yA(i.toString());aN(n,a,()=>a(n.currentUser)),iN(n,u=>a(u))}}const s=Kw("auth");return s&&$C(n,`http://${s}`),n}function vA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=$n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",vA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pA("Browser");var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,Vx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,w){function I(){}I.prototype=w.prototype,_.D=w.prototype,_.prototype=new I,_.prototype.constructor=_,_.C=function(S,j,P){for(var N=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)N[pe-2]=arguments[pe];return w.prototype[j].apply(S,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var j=0;16>j;++j)S[j]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(j=0;16>j;++j)S[j]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=_.g[0],I=_.g[1],j=_.g[2];var P=_.g[3],N=w+(P^I&(j^P))+S[0]+3614090360&4294967295;w=I+(N<<7&4294967295|N>>>25),N=P+(j^w&(I^j))+S[1]+3905402710&4294967295,P=w+(N<<12&4294967295|N>>>20),N=j+(I^P&(w^I))+S[2]+606105819&4294967295,j=P+(N<<17&4294967295|N>>>15),N=I+(w^j&(P^w))+S[3]+3250441966&4294967295,I=j+(N<<22&4294967295|N>>>10),N=w+(P^I&(j^P))+S[4]+4118548399&4294967295,w=I+(N<<7&4294967295|N>>>25),N=P+(j^w&(I^j))+S[5]+1200080426&4294967295,P=w+(N<<12&4294967295|N>>>20),N=j+(I^P&(w^I))+S[6]+2821735955&4294967295,j=P+(N<<17&4294967295|N>>>15),N=I+(w^j&(P^w))+S[7]+4249261313&4294967295,I=j+(N<<22&4294967295|N>>>10),N=w+(P^I&(j^P))+S[8]+1770035416&4294967295,w=I+(N<<7&4294967295|N>>>25),N=P+(j^w&(I^j))+S[9]+2336552879&4294967295,P=w+(N<<12&4294967295|N>>>20),N=j+(I^P&(w^I))+S[10]+4294925233&4294967295,j=P+(N<<17&4294967295|N>>>15),N=I+(w^j&(P^w))+S[11]+2304563134&4294967295,I=j+(N<<22&4294967295|N>>>10),N=w+(P^I&(j^P))+S[12]+1804603682&4294967295,w=I+(N<<7&4294967295|N>>>25),N=P+(j^w&(I^j))+S[13]+4254626195&4294967295,P=w+(N<<12&4294967295|N>>>20),N=j+(I^P&(w^I))+S[14]+2792965006&4294967295,j=P+(N<<17&4294967295|N>>>15),N=I+(w^j&(P^w))+S[15]+1236535329&4294967295,I=j+(N<<22&4294967295|N>>>10),N=w+(j^P&(I^j))+S[1]+4129170786&4294967295,w=I+(N<<5&4294967295|N>>>27),N=P+(I^j&(w^I))+S[6]+3225465664&4294967295,P=w+(N<<9&4294967295|N>>>23),N=j+(w^I&(P^w))+S[11]+643717713&4294967295,j=P+(N<<14&4294967295|N>>>18),N=I+(P^w&(j^P))+S[0]+3921069994&4294967295,I=j+(N<<20&4294967295|N>>>12),N=w+(j^P&(I^j))+S[5]+3593408605&4294967295,w=I+(N<<5&4294967295|N>>>27),N=P+(I^j&(w^I))+S[10]+38016083&4294967295,P=w+(N<<9&4294967295|N>>>23),N=j+(w^I&(P^w))+S[15]+3634488961&4294967295,j=P+(N<<14&4294967295|N>>>18),N=I+(P^w&(j^P))+S[4]+3889429448&4294967295,I=j+(N<<20&4294967295|N>>>12),N=w+(j^P&(I^j))+S[9]+568446438&4294967295,w=I+(N<<5&4294967295|N>>>27),N=P+(I^j&(w^I))+S[14]+3275163606&4294967295,P=w+(N<<9&4294967295|N>>>23),N=j+(w^I&(P^w))+S[3]+4107603335&4294967295,j=P+(N<<14&4294967295|N>>>18),N=I+(P^w&(j^P))+S[8]+1163531501&4294967295,I=j+(N<<20&4294967295|N>>>12),N=w+(j^P&(I^j))+S[13]+2850285829&4294967295,w=I+(N<<5&4294967295|N>>>27),N=P+(I^j&(w^I))+S[2]+4243563512&4294967295,P=w+(N<<9&4294967295|N>>>23),N=j+(w^I&(P^w))+S[7]+1735328473&4294967295,j=P+(N<<14&4294967295|N>>>18),N=I+(P^w&(j^P))+S[12]+2368359562&4294967295,I=j+(N<<20&4294967295|N>>>12),N=w+(I^j^P)+S[5]+4294588738&4294967295,w=I+(N<<4&4294967295|N>>>28),N=P+(w^I^j)+S[8]+2272392833&4294967295,P=w+(N<<11&4294967295|N>>>21),N=j+(P^w^I)+S[11]+1839030562&4294967295,j=P+(N<<16&4294967295|N>>>16),N=I+(j^P^w)+S[14]+4259657740&4294967295,I=j+(N<<23&4294967295|N>>>9),N=w+(I^j^P)+S[1]+2763975236&4294967295,w=I+(N<<4&4294967295|N>>>28),N=P+(w^I^j)+S[4]+1272893353&4294967295,P=w+(N<<11&4294967295|N>>>21),N=j+(P^w^I)+S[7]+4139469664&4294967295,j=P+(N<<16&4294967295|N>>>16),N=I+(j^P^w)+S[10]+3200236656&4294967295,I=j+(N<<23&4294967295|N>>>9),N=w+(I^j^P)+S[13]+681279174&4294967295,w=I+(N<<4&4294967295|N>>>28),N=P+(w^I^j)+S[0]+3936430074&4294967295,P=w+(N<<11&4294967295|N>>>21),N=j+(P^w^I)+S[3]+3572445317&4294967295,j=P+(N<<16&4294967295|N>>>16),N=I+(j^P^w)+S[6]+76029189&4294967295,I=j+(N<<23&4294967295|N>>>9),N=w+(I^j^P)+S[9]+3654602809&4294967295,w=I+(N<<4&4294967295|N>>>28),N=P+(w^I^j)+S[12]+3873151461&4294967295,P=w+(N<<11&4294967295|N>>>21),N=j+(P^w^I)+S[15]+530742520&4294967295,j=P+(N<<16&4294967295|N>>>16),N=I+(j^P^w)+S[2]+3299628645&4294967295,I=j+(N<<23&4294967295|N>>>9),N=w+(j^(I|~P))+S[0]+4096336452&4294967295,w=I+(N<<6&4294967295|N>>>26),N=P+(I^(w|~j))+S[7]+1126891415&4294967295,P=w+(N<<10&4294967295|N>>>22),N=j+(w^(P|~I))+S[14]+2878612391&4294967295,j=P+(N<<15&4294967295|N>>>17),N=I+(P^(j|~w))+S[5]+4237533241&4294967295,I=j+(N<<21&4294967295|N>>>11),N=w+(j^(I|~P))+S[12]+1700485571&4294967295,w=I+(N<<6&4294967295|N>>>26),N=P+(I^(w|~j))+S[3]+2399980690&4294967295,P=w+(N<<10&4294967295|N>>>22),N=j+(w^(P|~I))+S[10]+4293915773&4294967295,j=P+(N<<15&4294967295|N>>>17),N=I+(P^(j|~w))+S[1]+2240044497&4294967295,I=j+(N<<21&4294967295|N>>>11),N=w+(j^(I|~P))+S[8]+1873313359&4294967295,w=I+(N<<6&4294967295|N>>>26),N=P+(I^(w|~j))+S[15]+4264355552&4294967295,P=w+(N<<10&4294967295|N>>>22),N=j+(w^(P|~I))+S[6]+2734768916&4294967295,j=P+(N<<15&4294967295|N>>>17),N=I+(P^(j|~w))+S[13]+1309151649&4294967295,I=j+(N<<21&4294967295|N>>>11),N=w+(j^(I|~P))+S[4]+4149444226&4294967295,w=I+(N<<6&4294967295|N>>>26),N=P+(I^(w|~j))+S[11]+3174756917&4294967295,P=w+(N<<10&4294967295|N>>>22),N=j+(w^(P|~I))+S[2]+718787259&4294967295,j=P+(N<<15&4294967295|N>>>17),N=I+(P^(j|~w))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+w&4294967295,_.g[1]=_.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+j&4294967295,_.g[3]=_.g[3]+P&4294967295}r.prototype.u=function(_,w){w===void 0&&(w=_.length);for(var I=w-this.blockSize,S=this.B,j=this.h,P=0;P<w;){if(j==0)for(;P<=I;)s(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<w;)if(S[j++]=_.charCodeAt(P++),j==this.blockSize){s(this,S),j=0;break}}else for(;P<w;)if(S[j++]=_[P++],j==this.blockSize){s(this,S),j=0;break}}this.h=j,this.o+=w},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var w=1;w<_.length-8;++w)_[w]=0;var I=8*this.o;for(w=_.length-8;w<_.length;++w)_[w]=I&255,I/=256;for(this.u(_),_=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)_[I++]=this.g[w]>>>S&255;return _};function i(_,w){var I=u;return Object.prototype.hasOwnProperty.call(I,_)?I[_]:I[_]=w(_)}function a(_,w){this.h=w;for(var I=[],S=!0,j=_.length-1;0<=j;j--){var P=_[j]|0;S&&P==w||(I[j]=P,S=!1)}this.g=I}var u={};function c(_){return-128<=_&&128>_?i(_,function(w){return new a([w|0],0>w?-1:0)}):new a([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return v(d(-_));for(var w=[],I=1,S=0;_>=I;S++)w[S]=_/I|0,I*=4294967296;return new a(w,0)}function p(_,w){if(_.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(_.charAt(0)=="-")return v(p(_.substring(1),w));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(w,8)),S=g,j=0;j<_.length;j+=8){var P=Math.min(8,_.length-j),N=parseInt(_.substring(j,j+P),w);8>P?(P=d(Math.pow(w,P)),S=S.j(P).add(d(N))):(S=S.j(I),S=S.add(d(N)))}return S}var g=c(0),h=c(1),E=c(16777216);t=a.prototype,t.m=function(){if(C(this))return-v(this).m();for(var _=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);_+=(0<=S?S:4294967296+S)*w,w*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A(this))return"0";if(C(this))return"-"+v(this).toString(_);for(var w=d(Math.pow(_,6)),I=this,S="";;){var j=b(I,w).g;I=x(I,j.j(w));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(_);if(I=j,A(I))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function A(_){if(_.h!=0)return!1;for(var w=0;w<_.g.length;w++)if(_.g[w]!=0)return!1;return!0}function C(_){return _.h==-1}t.l=function(_){return _=x(this,_),C(_)?-1:A(_)?0:1};function v(_){for(var w=_.g.length,I=[],S=0;S<w;S++)I[S]=~_.g[S];return new a(I,~_.h).add(h)}t.abs=function(){return C(this)?v(this):this},t.add=function(_){for(var w=Math.max(this.g.length,_.g.length),I=[],S=0,j=0;j<=w;j++){var P=S+(this.i(j)&65535)+(_.i(j)&65535),N=(P>>>16)+(this.i(j)>>>16)+(_.i(j)>>>16);S=N>>>16,P&=65535,N&=65535,I[j]=N<<16|P}return new a(I,I[I.length-1]&-2147483648?-1:0)};function x(_,w){return _.add(v(w))}t.j=function(_){if(A(this)||A(_))return g;if(C(this))return C(_)?v(this).j(v(_)):v(v(this).j(_));if(C(_))return v(this.j(v(_)));if(0>this.l(E)&&0>_.l(E))return d(this.m()*_.m());for(var w=this.g.length+_.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var j=0;j<_.g.length;j++){var P=this.i(S)>>>16,N=this.i(S)&65535,pe=_.i(j)>>>16,Pt=_.i(j)&65535;I[2*S+2*j]+=N*Pt,y(I,2*S+2*j),I[2*S+2*j+1]+=P*Pt,y(I,2*S+2*j+1),I[2*S+2*j+1]+=N*pe,y(I,2*S+2*j+1),I[2*S+2*j+2]+=P*pe,y(I,2*S+2*j+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new a(I,0)};function y(_,w){for(;(_[w]&65535)!=_[w];)_[w+1]+=_[w]>>>16,_[w]&=65535,w++}function k(_,w){this.g=_,this.h=w}function b(_,w){if(A(w))throw Error("division by zero");if(A(_))return new k(g,g);if(C(_))return w=b(v(_),w),new k(v(w.g),v(w.h));if(C(w))return w=b(_,v(w)),new k(v(w.g),w.h);if(30<_.g.length){if(C(_)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var I=h,S=w;0>=S.l(_);)I=M(I),S=M(S);var j=L(I,1),P=L(S,1);for(S=L(S,2),I=L(I,2);!A(S);){var N=P.add(S);0>=N.l(_)&&(j=j.add(I),P=N),S=L(S,1),I=L(I,1)}return w=x(_,j.j(w)),new k(j,w)}for(j=g;0<=_.l(w);){for(I=Math.max(1,Math.floor(_.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=d(I),N=P.j(w);C(N)||0<N.l(_);)I-=S,P=d(I),N=P.j(w);A(P)&&(P=h),j=j.add(P),_=x(_,N)}return new k(j,_)}t.A=function(_){return b(this,_).h},t.and=function(_){for(var w=Math.max(this.g.length,_.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&_.i(S);return new a(I,this.h&_.h)},t.or=function(_){for(var w=Math.max(this.g.length,_.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|_.i(S);return new a(I,this.h|_.h)},t.xor=function(_){for(var w=Math.max(this.g.length,_.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^_.i(S);return new a(I,this.h^_.h)};function M(_){for(var w=_.g.length+1,I=[],S=0;S<w;S++)I[S]=_.i(S)<<1|_.i(S-1)>>>31;return new a(I,_.h)}function L(_,w){var I=w>>5;w%=32;for(var S=_.g.length-I,j=[],P=0;P<S;P++)j[P]=0<w?_.i(P+I)>>>w|_.i(P+I+1)<<32-w:_.i(P+I);return new a(j,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vx=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ms=a}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ux,qa,Fx,mu,ff,zx,Bx,$x;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,f,m){return o==Array.prototype||o==Object.prototype||(o[f]=m.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gl=="object"&&Gl];for(var f=0;f<o.length;++f){var m=o[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(o,f){if(f)e:{var m=r;o=o.split(".");for(var T=0;T<o.length-1;T++){var O=o[T];if(!(O in m))break e;m=m[O]}o=o[o.length-1],T=m[o],f=f(T),f!=T&&f!=null&&e(m,o,{configurable:!0,writable:!0,value:f})}}function i(o,f){o instanceof String&&(o+="");var m=0,T=!1,O={next:function(){if(!T&&m<o.length){var V=m++;return{value:f(V,o[V]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(o){return o||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(o){var f=typeof o;return f=f!="object"?f:o?Array.isArray(o)?"array":f:"null",f=="array"||f=="object"&&typeof o.length=="number"}function d(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function p(o,f,m){return o.call.apply(o.bind,arguments)}function g(o,f,m){if(!o)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),o.apply(f,O)}}return function(){return o.apply(f,arguments)}}function h(o,f,m){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,h.apply(null,arguments)}function E(o,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),o.apply(this,T)}}function A(o,f){function m(){}m.prototype=f.prototype,o.aa=f.prototype,o.prototype=new m,o.prototype.constructor=o,o.Qb=function(T,O,V){for(var $=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)$[Ne-2]=arguments[Ne];return f.prototype[O].apply(T,$)}}function C(o){const f=o.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=o[T];return m}return[]}function v(o,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(c(T)){const O=o.length||0,V=T.length||0;o.length=O+V;for(let $=0;$<V;$++)o[O+$]=T[$]}else o.push(T)}}class x{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(o){return/^[\s\xa0]*$/.test(o)}function k(){var o=u.navigator;return o&&(o=o.userAgent)?o:""}function b(o){return b[" "](o),o}b[" "]=function(){};var M=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function L(o,f,m){for(const T in o)f.call(m,o[T],T,o)}function _(o,f){for(const m in o)f.call(void 0,o[m],m,o)}function w(o){const f={};for(const m in o)f[m]=o[m];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,f){let m,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(m in T)o[m]=T[m];for(let V=0;V<I.length;V++)m=I[V],Object.prototype.hasOwnProperty.call(T,m)&&(o[m]=T[m])}}function j(o){var f=1;o=o.split(":");const m=[];for(;0<f&&o.length;)m.push(o.shift()),f--;return o.length&&m.push(o.join(":")),m}function P(o){u.setTimeout(()=>{throw o},0)}function N(){var o=te;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class pe{constructor(){this.h=this.g=null}add(f,m){const T=Pt.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var Pt=new x(()=>new vn,o=>o.reset());class vn{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Rt,H=!1,te=new pe,se=()=>{const o=u.Promise.resolve(void 0);Rt=()=>{o.then(Se)}};var Se=()=>{for(var o;o=N();){try{o.h.call(o.g)}catch(m){P(m)}var f=Pt;f.j(o),100>f.h&&(f.h++,o.next=f.g,f.g=o)}H=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const m=()=>{};u.addEventListener("test",m,f),u.removeEventListener("test",m,f)}catch{}return o}();function tt(o,f){if(J.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var m=this.type=o.type,T=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget){if(M){e:{try{b(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=o.fromElement:m=="mouseout"&&(f=o.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:We[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&tt.aa.h.call(this)}}A(tt,J);var We={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),jt=0;function Cr(o,f,m,T,O){this.listener=o,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=O,this.key=++jt,this.da=this.fa=!1}function _n(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function nr(o){this.src=o,this.g={},this.h=0}nr.prototype.add=function(o,f,m,T,O){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var $=R(o,f,T,O);return-1<$?(f=o[$],m||(f.fa=!1)):(f=new Cr(f,this.src,V,!!T,O),f.fa=m,o.push(f)),f};function Yt(o,f){var m=f.type;if(m in o.g){var T=o.g[m],O=Array.prototype.indexOf.call(T,f,void 0),V;(V=0<=O)&&Array.prototype.splice.call(T,O,1),V&&(_n(f),o.g[m].length==0&&(delete o.g[m],o.h--))}}function R(o,f,m,T){for(var O=0;O<o.length;++O){var V=o[O];if(!V.da&&V.listener==f&&V.capture==!!m&&V.ha==T)return O}return-1}var q="closure_lm_"+(1e6*Math.random()|0),G={};function me(o,f,m,T,O){if(Array.isArray(f)){for(var V=0;V<f.length;V++)me(o,f[V],m,T,O);return null}return m=fa(m),o&&o[ke]?o.K(f,m,d(T)?!!T.capture:!1,O):Le(o,f,m,!1,T,O)}function Le(o,f,m,T,O,V){if(!f)throw Error("Invalid event type");var $=d(O)?!!O.capture:!!O,Ne=rr(o);if(Ne||(o[q]=Ne=new nr(o)),m=Ne.add(f,m,T,$,V),m.proxy)return m;if(T=le(),m.proxy=T,T.src=o,T.listener=m,o.addEventListener)De||(O=$),O===void 0&&(O=!1),o.addEventListener(f.toString(),T,O);else if(o.attachEvent)o.attachEvent(Xt(f.toString()),T);else if(o.addListener&&o.removeListener)o.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function le(){function o(m){return f.call(o.src,o.listener,m)}const f=xs;return o}function qe(o,f,m,T,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)qe(o,f[V],m,T,O);else T=d(T)?!!T.capture:!!T,m=fa(m),o&&o[ke]?(o=o.i,f=String(f).toString(),f in o.g&&(V=o.g[f],m=R(V,m,T,O),-1<m&&(_n(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete o.g[f],o.h--)))):o&&(o=rr(o))&&(f=o.g[f.toString()],o=-1,f&&(o=R(f,m,T,O)),(m=-1<o?f[o]:null)&&Ce(m))}function Ce(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[ke])Yt(f.i,o);else{var m=o.type,T=o.proxy;f.removeEventListener?f.removeEventListener(m,T,o.capture):f.detachEvent?f.detachEvent(Xt(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=rr(f))?(Yt(m,o),m.h==0&&(m.src=null,f[q]=null)):_n(o)}}}function Xt(o){return o in G?G[o]:G[o]="on"+o}function xs(o,f){if(o.da)o=!0;else{f=new tt(f,this);var m=o.listener,T=o.ha||o.src;o.fa&&Ce(o),o=m.call(T,f)}return o}function rr(o){return o=o[q],o instanceof nr?o:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fa(o){return typeof o=="function"?o:(o[Rn]||(o[Rn]=function(f){return o.handleEvent(f)}),o[Rn])}function vt(){B.call(this),this.i=new nr(this),this.M=this,this.F=null}A(vt,B),vt.prototype[ke]=!0,vt.prototype.removeEventListener=function(o,f,m,T){qe(this,o,f,m,T)};function Dt(o,f){var m,T=o.F;if(T)for(m=[];T;T=T.F)m.push(T);if(o=o.M,T=f.type||f,typeof f=="string")f=new J(f,o);else if(f instanceof J)f.target=f.target||o;else{var O=f;f=new J(T,o),S(f,O)}if(O=!0,m)for(var V=m.length-1;0<=V;V--){var $=f.g=m[V];O=fl($,T,!0,f)&&O}if($=f.g=o,O=fl($,T,!0,f)&&O,O=fl($,T,!1,f)&&O,m)for(V=0;V<m.length;V++)$=f.g=m[V],O=fl($,T,!1,f)&&O}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var o=this.i,f;for(f in o.g){for(var m=o.g[f],T=0;T<m.length;T++)_n(m[T]);delete o.g[f],o.h--}}this.F=null},vt.prototype.K=function(o,f,m,T){return this.i.add(String(o),f,!1,m,T)},vt.prototype.L=function(o,f,m,T){return this.i.add(String(o),f,!0,m,T)};function fl(o,f,m,T){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,V=0;V<f.length;++V){var $=f[V];if($&&!$.da&&$.capture==m){var Ne=$.listener,ut=$.ha||$.src;$.fa&&Yt(o.i,$),O=Ne.call(ut,T)!==!1&&O}}return O&&!T.defaultPrevented}function Rm(o,f,m){if(typeof o=="function")m&&(o=h(o,m));else if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:u.setTimeout(o,f||0)}function jm(o){o.g=Rm(()=>{o.g=null,o.i&&(o.i=!1,jm(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class EE extends B{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:jm(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(o){B.call(this),this.h=o,this.g={}}A(pa,B);var Dm=[];function Om(o){L(o.g,function(f,m){this.g.hasOwnProperty(m)&&Ce(f)},o),o.g={}}pa.prototype.N=function(){pa.aa.N.call(this),Om(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nd=u.JSON.stringify,TE=u.JSON.parse,IE=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function rd(){}rd.prototype.h=null;function Mm(o){return o.h||(o.h=o.i())}function Lm(){}var ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sd(){J.call(this,"d")}A(sd,J);function id(){J.call(this,"c")}A(id,J);var Es={},Vm=null;function pl(){return Vm=Vm||new vt}Es.La="serverreachability";function Um(o){J.call(this,Es.La,o)}A(Um,J);function ga(o){const f=pl();Dt(f,new Um(f))}Es.STAT_EVENT="statevent";function Fm(o,f){J.call(this,Es.STAT_EVENT,o),this.stat=f}A(Fm,J);function Ot(o){const f=pl();Dt(f,new Fm(f,o))}Es.Ma="timingevent";function zm(o,f){J.call(this,Es.Ma,o),this.size=f}A(zm,J);function ya(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},f)}function va(){this.g=!0}va.prototype.xa=function(){this.g=!1};function SE(o,f,m,T,O,V){o.info(function(){if(o.g)if(V)for(var $="",Ne=V.split("&"),ut=0;ut<Ne.length;ut++){var _e=Ne[ut].split("=");if(1<_e.length){var _t=_e[0];_e=_e[1];var wt=_t.split("_");$=2<=wt.length&&wt[1]=="type"?$+(_t+"="+_e+"&"):$+(_t+"=redacted&")}}else $=null;else $=V;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+m+`
`+$})}function kE(o,f,m,T,O,V,$){o.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+m+`
`+V+" "+$})}function li(o,f,m,T){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+NE(o,m)+(T?" "+T:"")})}function CE(o,f){o.info(function(){return"TIMEOUT: "+f})}va.prototype.info=function(){};function NE(o,f){if(!o.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(o=0;o<m.length;o++)if(Array.isArray(m[o])){var T=m[o];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var $=1;$<O.length;$++)O[$]=""}}}}return nd(m)}catch{return f}}var ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ad;function gl(){}A(gl,rd),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},ad=new gl;function Nr(o,f,m,T){this.j=o,this.i=f,this.l=m,this.R=T||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $m}function $m(){this.i=null,this.g="",this.h=!1}var Wm={},od={};function ld(o,f,m){o.L=1,o.v=wl(sr(f)),o.m=m,o.P=!0,qm(o,null)}function qm(o,f){o.F=Date.now(),yl(o),o.A=sr(o.v);var m=o.A,T=o.R;Array.isArray(T)||(T=[String(T)]),ig(m.i,"t",T),o.C=0,m=o.j.J,o.h=new $m,o.g=Tg(o.j,m?f:null,!o.m),0<o.O&&(o.M=new EE(h(o.Y,o,o.g),o.O)),f=o.U,m=o.g,T=o.ca;var O="readystatechange";Array.isArray(O)||(O&&(Dm[0]=O.toString()),O=Dm);for(var V=0;V<O.length;V++){var $=me(m,O[V],T||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=o.H?w(o.H):{},o.m?(o.u||(o.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,f)):(o.u="GET",o.g.ea(o.A,o.u,null,f)),ga(),SE(o.i,o.u,o.A,o.l,o.R,o.m)}Nr.prototype.ca=function(o){o=o.target;const f=this.M;f&&ir(o)==3?f.j():this.Y(o)},Nr.prototype.Y=function(o){try{if(o==this.g)e:{const wt=ir(this.g);var f=this.g.Ba();const di=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||hg(this.g)))){this.J||wt!=4||f==7||(f==8||0>=di?ga(3):ga(2)),ud(this);var m=this.g.Z();this.X=m;t:if(Hm(this)){var T=hg(this.g);o="";var O=T.length,V=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),_a(this);var $="";break t}this.h.i=new u.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,o+=this.h.i.decode(T[f],{stream:!(V&&f==O-1)});T.length=0,this.h.g+=o,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,kE(this.i,this.u,this.A,this.l,this.R,wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,ut=this.g;if((Ne=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ne)){var _e=Ne;break t}}_e=null}if(m=_e)li(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cd(this,m);else{this.o=!1,this.s=3,Ot(12),Ts(this),_a(this);break e}}if(this.P){m=!0;let wn;for(;!this.J&&this.C<$.length;)if(wn=AE(this,$),wn==od){wt==4&&(this.s=4,Ot(14),m=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Wm){this.s=4,Ot(15),li(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else li(this.i,this.l,wn,null),cd(this,wn);if(Hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||$.length!=0||this.h.h||(this.s=1,Ot(16),m=!1),this.o=this.o&&m,!m)li(this.i,this.l,$,"[Invalid Chunked Response]"),Ts(this),_a(this);else if(0<$.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),gd(_t),_t.M=!0,Ot(11))}}else li(this.i,this.l,$,null),cd(this,$);wt==4&&Ts(this),this.o&&!this.J&&(wt==4?_g(this.j,this):(this.o=!1,yl(this)))}else HE(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Ts(this),_a(this)}}}catch{}finally{}};function Hm(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function AE(o,f){var m=o.C,T=f.indexOf(`
`,m);return T==-1?od:(m=Number(f.substring(m,T)),isNaN(m)?Wm:(T+=1,T+m>f.length?od:(f=f.slice(T,T+m),o.C=T+m,f)))}Nr.prototype.cancel=function(){this.J=!0,Ts(this)};function yl(o){o.S=Date.now()+o.I,Gm(o,o.I)}function Gm(o,f){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ya(h(o.ba,o),f)}function ud(o){o.B&&(u.clearTimeout(o.B),o.B=null)}Nr.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(CE(this.i,this.A),this.L!=2&&(ga(),Ot(17)),Ts(this),this.s=2,_a(this)):Gm(this,this.S-o)};function _a(o){o.j.G==0||o.J||_g(o.j,o)}function Ts(o){ud(o);var f=o.M;f&&typeof f.ma=="function"&&f.ma(),o.M=null,Om(o.U),o.g&&(f=o.g,o.g=null,f.abort(),f.ma())}function cd(o,f){try{var m=o.j;if(m.G!=0&&(m.g==o||dd(m.h,o))){if(!o.K&&dd(m.h,o)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<o.F)kl(m),Il(m);else break e;md(m),Ot(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=ya(h(m.Za,m),6e3));if(1>=Ym(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ss(m,11)}else if((o.K||m.g==o)&&kl(m),!y(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let _e=O[f];if(m.T=_e[0],_e=_e[1],m.G==2)if(_e[0]=="c"){m.K=_e[1],m.ia=_e[2];const _t=_e[3];_t!=null&&(m.la=_t,m.j.info("VER="+m.la));const wt=_e[4];wt!=null&&(m.Aa=wt,m.j.info("SVER="+m.Aa));const di=_e[5];di!=null&&typeof di=="number"&&0<di&&(T=1.5*di,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const wn=o.g;if(wn){const Nl=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var V=T.h;V.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(hd(V,V.h),V.h=null))}if(T.D){const yd=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(T.ya=yd,be(T.I,T.D,yd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-o.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var $=o;if(T.qa=Eg(T,T.J?T.ia:null,T.W),$.K){Xm(T.h,$);var Ne=$,ut=T.L;ut&&(Ne.I=ut),Ne.B&&(ud(Ne),yl(Ne)),T.g=$}else yg(T);0<m.i.length&&Sl(m)}else _e[0]!="stop"&&_e[0]!="close"||Ss(m,7);else m.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ss(m,7):pd(m):_e[0]!="noop"&&m.l&&m.l.ta(_e),m.v=0)}}ga(4)}catch{}}var bE=class{constructor(o,f){this.g=o,this.map=f}};function Km(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qm(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ym(o){return o.h?1:o.g?o.g.size:0}function dd(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function hd(o,f){o.g?o.g.add(f):o.h=f}function Xm(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}Km.prototype.cancel=function(){if(this.i=Jm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Jm(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const m of o.g.values())f=f.concat(m.D);return f}return C(o.i)}function PE(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var f=[],m=o.length,T=0;T<m;T++)f.push(o[T]);return f}f=[],m=0;for(T in o)f[m++]=o[T];return f}function RE(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var f=[];o=o.length;for(var m=0;m<o;m++)f.push(m);return f}f=[],m=0;for(const T in o)f[m++]=T;return f}}}function Zm(o,f){if(o.forEach&&typeof o.forEach=="function")o.forEach(f,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,f,void 0);else for(var m=RE(o),T=PE(o),O=T.length,V=0;V<O;V++)f.call(void 0,T[V],m&&m[V],o)}var eg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jE(o,f){if(o){o=o.split("&");for(var m=0;m<o.length;m++){var T=o[m].indexOf("="),O=null;if(0<=T){var V=o[m].substring(0,T);O=o[m].substring(T+1)}else V=o[m];f(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Is(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Is){this.h=o.h,vl(this,o.j),this.o=o.o,this.g=o.g,_l(this,o.s),this.l=o.l;var f=o.i,m=new Ea;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),tg(this,m),this.m=o.m}else o&&(f=String(o).match(eg))?(this.h=!1,vl(this,f[1]||"",!0),this.o=wa(f[2]||""),this.g=wa(f[3]||"",!0),_l(this,f[4]),this.l=wa(f[5]||"",!0),tg(this,f[6]||"",!0),this.m=wa(f[7]||"")):(this.h=!1,this.i=new Ea(null,this.h))}Is.prototype.toString=function(){var o=[],f=this.j;f&&o.push(xa(f,ng,!0),":");var m=this.g;return(m||f=="file")&&(o.push("//"),(f=this.o)&&o.push(xa(f,ng,!0),"@"),o.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&o.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&o.push("/"),o.push(xa(m,m.charAt(0)=="/"?ME:OE,!0))),(m=this.i.toString())&&o.push("?",m),(m=this.m)&&o.push("#",xa(m,VE)),o.join("")};function sr(o){return new Is(o)}function vl(o,f,m){o.j=m?wa(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function _l(o,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);o.s=f}else o.s=null}function tg(o,f,m){f instanceof Ea?(o.i=f,UE(o.i,o.h)):(m||(f=xa(f,LE)),o.i=new Ea(f,o.h))}function be(o,f,m){o.i.set(f,m)}function wl(o){return be(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function wa(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function xa(o,f,m){return typeof o=="string"?(o=encodeURI(o).replace(f,DE),m&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function DE(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ng=/[#\/\?@]/g,OE=/[#\?:]/g,ME=/[#\?]/g,LE=/[#\?@]/g,VE=/#/g;function Ea(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function Ar(o){o.g||(o.g=new Map,o.h=0,o.i&&jE(o.i,function(f,m){o.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Ea.prototype,t.add=function(o,f){Ar(this),this.i=null,o=ui(this,o);var m=this.g.get(o);return m||this.g.set(o,m=[]),m.push(f),this.h+=1,this};function rg(o,f){Ar(o),f=ui(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function sg(o,f){return Ar(o),f=ui(o,f),o.g.has(f)}t.forEach=function(o,f){Ar(this),this.g.forEach(function(m,T){m.forEach(function(O){o.call(f,O,T,this)},this)},this)},t.na=function(){Ar(this);const o=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const O=o[T];for(let V=0;V<O.length;V++)m.push(f[T])}return m},t.V=function(o){Ar(this);let f=[];if(typeof o=="string")sg(this,o)&&(f=f.concat(this.g.get(ui(this,o))));else{o=Array.from(this.g.values());for(let m=0;m<o.length;m++)f=f.concat(o[m])}return f},t.set=function(o,f){return Ar(this),this.i=null,o=ui(this,o),sg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},t.get=function(o,f){return o?(o=this.V(o),0<o.length?String(o[0]):f):f};function ig(o,f,m){rg(o,f),0<m.length&&(o.i=null,o.g.set(ui(o,f),C(m)),o.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const V=encodeURIComponent(String(T)),$=this.V(T);for(T=0;T<$.length;T++){var O=V;$[T]!==""&&(O+="="+encodeURIComponent(String($[T]))),o.push(O)}}return this.i=o.join("&")};function ui(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function UE(o,f){f&&!o.j&&(Ar(o),o.i=null,o.g.forEach(function(m,T){var O=T.toLowerCase();T!=O&&(rg(this,T),ig(this,O,m))},o)),o.j=f}function FE(o,f){const m=new va;if(u.Image){const T=new Image;T.onload=E(br,m,"TestLoadImage: loaded",!0,f,T),T.onerror=E(br,m,"TestLoadImage: error",!1,f,T),T.onabort=E(br,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=E(br,m,"TestLoadImage: timeout",!1,f,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=o}else f(!1)}function zE(o,f){const m=new va,T=new AbortController,O=setTimeout(()=>{T.abort(),br(m,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:T.signal}).then(V=>{clearTimeout(O),V.ok?br(m,"TestPingServer: ok",!0,f):br(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),br(m,"TestPingServer: error",!1,f)})}function br(o,f,m,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(m)}catch{}}function BE(){this.g=new IE}function $E(o,f,m){const T=m||"";try{Zm(o,function(O,V){let $=O;d(O)&&($=nd(O)),f.push(T+V+"="+encodeURIComponent($))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function xl(o){this.l=o.Ub||null,this.j=o.eb||!1}A(xl,rd),xl.prototype.g=function(){return new El(this.l,this.j)},xl.prototype.i=function(o){return function(){return o}}({});function El(o,f){vt.call(this),this.D=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(El,vt),t=El.prototype,t.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=f,this.readyState=1,Ia(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(f.body=o),(this.D||u).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ag(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ag(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?Ta(this):Ia(this),this.readyState==3&&ag(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ta(this))},t.Qa=function(o){this.g&&(this.response=o,Ta(this))},t.ga=function(){this.g&&Ta(this)};function Ta(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ia(o)}t.setRequestHeader=function(o,f){this.u.append(o,f)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,o.push(m[0]+": "+m[1]),m=f.next();return o.join(`\r
`)};function Ia(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function og(o){let f="";return L(o,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function fd(o,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=og(m),typeof o=="string"?m!=null&&encodeURIComponent(String(m)):be(o,f,m))}function He(o){vt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(He,vt);var WE=/^https?$/i,qE=["POST","PUT"];t=He.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ad.g(),this.v=this.o?Mm(this.o):Mm(ad),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(V){lg(this,V);return}if(o=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)m.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())m.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),O=u.FormData&&o instanceof u.FormData,!(0<=Array.prototype.indexOf.call(qE,f,void 0))||T||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,$]of m)this.g.setRequestHeader(V,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dg(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){lg(this,V)}};function lg(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.m=5,ug(o),Tl(o)}function ug(o){o.A||(o.A=!0,Dt(o,"complete"),Dt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Dt(this,"complete"),Dt(this,"abort"),Tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tl(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cg(this):this.bb())},t.bb=function(){cg(this)};function cg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ir(o)!=4||o.Z()!=2)){if(o.u&&ir(o)==4)Rm(o.Ea,0,o);else if(Dt(o,"readystatechange"),ir(o)==4){o.h=!1;try{const $=o.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=$===0){var O=String(o.D).match(eg)[1]||null;!O&&u.self&&u.self.location&&(O=u.self.location.protocol.slice(0,-1)),T=!WE.test(O?O.toLowerCase():"")}m=T}if(m)Dt(o,"complete"),Dt(o,"success");else{o.m=6;try{var V=2<ir(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",ug(o)}}finally{Tl(o)}}}}function Tl(o,f){if(o.g){dg(o);const m=o.g,T=o.v[0]?()=>{}:null;o.g=null,o.v=null,f||Dt(o,"ready");try{m.onreadystatechange=T}catch{}}}function dg(o){o.I&&(u.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ir(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),TE(f)}};function hg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function HE(o){const f={};o=(o.g&&2<=ir(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<o.length;T++){if(y(o[T]))continue;var m=j(o[T]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=f[O]||[];f[O]=V,V.push(m)}_(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(o,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[o]||f}function fg(o){this.Aa=0,this.i=[],this.j=new va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,o),this.cb=Sa("retryDelaySeedMs",1e4,o),this.Wa=Sa("forwardChannelMaxRetries",2,o),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Km(o&&o.concurrentRequestLimit),this.Da=new BE,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fg.prototype,t.la=8,t.G=1,t.connect=function(o,f,m,T){Ot(0),this.W=o,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Eg(this,null,this.W),Sl(this)};function pd(o){if(pg(o),o.G==3){var f=o.U++,m=sr(o.I);if(be(m,"SID",o.K),be(m,"RID",f),be(m,"TYPE","terminate"),ka(o,m),f=new Nr(o,o.j,f),f.L=2,f.v=wl(sr(m)),m=!1,u.navigator&&u.navigator.sendBeacon)try{m=u.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&u.Image&&(new Image().src=f.v,m=!0),m||(f.g=Tg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),yl(f)}xg(o)}function Il(o){o.g&&(gd(o),o.g.cancel(),o.g=null)}function pg(o){Il(o),o.u&&(u.clearTimeout(o.u),o.u=null),kl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&u.clearTimeout(o.s),o.s=null)}function Sl(o){if(!Qm(o.h)&&!o.s){o.s=!0;var f=o.Ga;Rt||se(),H||(Rt(),H=!0),te.add(f,o),o.B=0}}function GE(o,f){return Ym(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=f.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ya(h(o.Ga,o,f),wg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const O=new Nr(this,this.j,o);let V=this.o;if(this.S&&(V?(V=w(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=gg(this,O,f),m=sr(this.I),be(m,"RID",o),be(m,"CVER",22),this.D&&be(m,"X-HTTP-Session-Id",this.D),ka(this,m),V&&(this.O?f="headers="+encodeURIComponent(String(og(V)))+"&"+f:this.m&&fd(m,this.m,V)),hd(this.h,O),this.Ua&&be(m,"TYPE","init"),this.P?(be(m,"$req",f),be(m,"SID","null"),O.T=!0,ld(O,m,null)):ld(O,m,f),this.G=2}}else this.G==3&&(o?mg(this,o):this.i.length==0||Qm(this.h)||mg(this))};function mg(o,f){var m;f?m=f.l:m=o.U++;const T=sr(o.I);be(T,"SID",o.K),be(T,"RID",m),be(T,"AID",o.T),ka(o,T),o.m&&o.o&&fd(T,o.m,o.o),m=new Nr(o,o.j,m,o.B+1),o.m===null&&(m.H=o.o),f&&(o.i=f.D.concat(o.i)),f=gg(o,m,1e3),m.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),hd(o.h,m),ld(m,T,f)}function ka(o,f){o.H&&L(o.H,function(m,T){be(f,T,m)}),o.l&&Zm({},function(m,T){be(f,T,m)})}function gg(o,f,m){m=Math.min(o.i.length,m);var T=o.l?h(o.l.Na,o.l,o):null;e:{var O=o.i;let V=-1;for(;;){const $=["count="+m];V==-1?0<m?(V=O[0].g,$.push("ofs="+V)):V=0:$.push("ofs="+V);let Ne=!0;for(let ut=0;ut<m;ut++){let _e=O[ut].g;const _t=O[ut].map;if(_e-=V,0>_e)V=Math.max(0,O[ut].g-100),Ne=!1;else try{$E(_t,$,"req"+_e+"_")}catch{T&&T(_t)}}if(Ne){T=$.join("&");break e}}}return o=o.i.splice(0,m),f.D=o,T}function yg(o){if(!o.g&&!o.u){o.Y=1;var f=o.Fa;Rt||se(),H||(Rt(),H=!0),te.add(f,o),o.v=0}}function md(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ya(h(o.Fa,o),wg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,vg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ya(h(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Il(this),vg(this))};function gd(o){o.A!=null&&(u.clearTimeout(o.A),o.A=null)}function vg(o){o.g=new Nr(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var f=sr(o.qa);be(f,"RID","rpc"),be(f,"SID",o.K),be(f,"AID",o.T),be(f,"CI",o.F?"0":"1"),!o.F&&o.ja&&be(f,"TO",o.ja),be(f,"TYPE","xmlhttp"),ka(o,f),o.m&&o.o&&fd(f,o.m,o.o),o.L&&(o.g.I=o.L);var m=o.g;o=o.ia,m.L=1,m.v=wl(sr(f)),m.m=null,m.P=!0,qm(m,o)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),md(this),Ot(19))};function kl(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function _g(o,f){var m=null;if(o.g==f){kl(o),gd(o),o.g=null;var T=2}else if(dd(o.h,f))m=f.D,Xm(o.h,f),T=1;else return;if(o.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=o.B;T=pl(),Dt(T,new zm(T,m)),Sl(o)}else yg(o);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&GE(o,f)||T==2&&md(o)))switch(m&&0<m.length&&(f=o.h,f.i=f.i.concat(m)),O){case 1:Ss(o,5);break;case 4:Ss(o,10);break;case 3:Ss(o,6);break;default:Ss(o,2)}}}function wg(o,f){let m=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(m*=2),m*f}function Ss(o,f){if(o.j.info("Error code "+f),f==2){var m=h(o.fb,o),T=o.Xa;const O=!T;T=new Is(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||vl(T,"https"),wl(T),O?FE(T.toString(),m):zE(T.toString(),m)}else Ot(2);o.G=0,o.l&&o.l.sa(f),xg(o),pg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function xg(o){if(o.G=0,o.ka=[],o.l){const f=Jm(o.h);(f.length!=0||o.i.length!=0)&&(v(o.ka,f),v(o.ka,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.ra()}}function Eg(o,f,m){var T=m instanceof Is?sr(m):new Is(m);if(T.g!="")f&&(T.g=f+"."+T.g),_l(T,T.s);else{var O=u.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var V=new Is(null);T&&vl(V,T),f&&(V.g=f),O&&_l(V,O),m&&(V.l=m),T=V}return m=o.D,f=o.ya,m&&f&&be(T,m,f),be(T,"VER",o.la),ka(o,T),T}function Tg(o,f,m){if(f&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Ca&&!o.pa?new He(new xl({eb:m})):new He(o.pa),f.Ha(o.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ig(){}t=Ig.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cl(){}Cl.prototype.g=function(o,f){return new Jt(o,f)};function Jt(o,f){vt.call(this),this.g=new fg(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(o?o["X-WebChannel-Client-Profile"]=f.va:o={"X-WebChannel-Client-Profile":f.va}),this.g.S=o,(o=f&&f.Sb)&&!y(o)&&(this.g.m=o),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new ci(this)}A(Jt,vt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){pd(this.g)},Jt.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var m={};m.__data__=o,o=m}else this.u&&(m={},m.__data__=nd(o),o=m);f.i.push(new bE(f.Ya++,o)),f.G==3&&Sl(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,pd(this.g),delete this.g,Jt.aa.N.call(this)};function Sg(o){sd.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){e:{for(const m in f){o=m;break e}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}A(Sg,sd);function kg(){id.call(this),this.status=1}A(kg,id);function ci(o){this.g=o}A(ci,Ig),ci.prototype.ua=function(){Dt(this.g,"a")},ci.prototype.ta=function(o){Dt(this.g,new Sg(o))},ci.prototype.sa=function(o){Dt(this.g,new kg)},ci.prototype.ra=function(){Dt(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,$x=function(){return new Cl},Bx=function(){return pl()},zx=Es,ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,mu=ml,Bm.COMPLETE="complete",Fx=Bm,Lm.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",vt.prototype.listen=vt.prototype.K,qa=Lm,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,Ux=He}).apply(typeof Gl<"u"?Gl:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new bp("@firebase/firestore");function Oa(){return qs.logLevel}function X(t,...e){if(qs.logLevel<=ge.DEBUG){const n=e.map($p);qs.debug(`Firestore (${la}): ${t}`,...n)}}function Er(t,...e){if(qs.logLevel<=ge.ERROR){const n=e.map($p);qs.error(`Firestore (${la}): ${t}`,...n)}}function Gi(t,...e){if(qs.logLevel<=ge.WARN){const n=e.map($p);qs.warn(`Firestore (${la}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw Er(e),new Error(e)}function Ee(t,e){t||ie()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _A{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class wA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xA{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new Wx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new It(e)}}class EA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new IA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=kA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Ki(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new st(0,0))}static max(){return new oe(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Do{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const CA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Do{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return CA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(a=!a,s++):u!=="."||a?(r+=u,s++):(i(),s++)}if(i(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Re.fromString(e))}static fromName(e){return new Z(Re.fromString(e).popFirst(5))}static empty(){return new Z(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Re(e.slice()))}}function NA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new us(s,Z.empty(),e)}function AA(t){return new us(t.readTime,t.key,-1)}class us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new us(oe.min(),Z.empty(),-1)}static max(){return new us(oe.max(),Z.empty(),-1)}}function bA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==PA)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(u=>{++s,u.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++u,u===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wp.oe=-1;function Lc(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function DA(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OA(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Hx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ht.RED,this.left=s??ht.EMPTY,this.right=i??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new nn([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ki(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gx("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const MA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=MA.exec(t);if(Ee(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hp(t){const e=t.mapValue.fields.__previous_value__;return qp(e)?Hp(e):e}function Oo(t){const e=cs(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r,s,i,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{}};function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qp(t)?4:UA(t)?9007199254740991:VA(t)?10:11:ie()}function Qn(t,e){if(t===e)return!0;const n=Gs(t);if(n!==Gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=cs(s.timestampValue),u=cs(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Hs(s.bytesValue).isEqual(Hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Qe(s.doubleValue),u=Qe(i.doubleValue);return a===u?Zu(a)===Zu(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ki(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},u=i.mapValue.fields||{};if(x0(a)!==x0(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Qn(a[c],u[c])))return!1;return!0}(t,e);default:return ie()}}function Lo(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function Qi(t,e){if(t===e)return 0;const n=Gs(t),r=Gs(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Qe(i.integerValue||i.doubleValue),c=Qe(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return T0(t.timestampValue,e.timestampValue);case 4:return T0(Oo(t),Oo(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,a){const u=Hs(i),c=Hs(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=xe(u[d],c[d]);if(p!==0)return p}return xe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const u=xe(Qe(i.latitude),Qe(a.latitude));return u!==0?u:xe(Qe(i.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return I0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var u,c,d,p;const g=i.fields||{},h=a.fields||{},E=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=(c=h.value)===null||c===void 0?void 0:c.arrayValue,C=xe(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:I0(E,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ql.mapValue&&a===Ql.mapValue)return 0;if(i===Ql.mapValue)return 1;if(a===Ql.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const h=xe(c[g],p[g]);if(h!==0)return h;const E=Qi(u[c[g]],d[p[g]]);if(E!==0)return E}return xe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ie()}}function T0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=cs(t),r=cs(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function I0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qi(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function Yi(t){return pf(t)}function pf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${pf(n.fields[a])}`;return s+"}"}(t.mapValue):ie()}function S0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mf(t){return!!t&&"integerValue"in t}function Gp(t){return!!t&&"arrayValue"in t}function k0(t){return!!t&&"nullValue"in t}function C0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function VA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=ft.emptyPath(),r={},s=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}a?r[u.lastSegment()]=ao(a):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ni(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(ao(this.value))}}function Kx(t){const e=[];return ni(t.fields,(n,r)=>{const s=new ft([n]);if(gu(r)){const i=Kx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,s,i,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new kt(e,0,oe.min(),oe.min(),oe.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,s){return new kt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new kt(e,2,n,oe.min(),oe.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,oe.min(),oe.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function N0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=Qi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function A0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function FA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{}class et extends Qx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BA(e,n,r):n==="array-contains"?new qA(e,r):n==="in"?new HA(e,r):n==="not-in"?new GA(e,r):n==="array-contains-any"?new KA(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $A(e,r):new WA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qi(n,this.value)):n!==null&&Gs(this.value)===Gs(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends Qx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new bn(e,n)}matches(e){return Yx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yx(t){return t.op==="and"}function Xx(t){return zA(t)&&Yx(t)}function zA(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function gf(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Yi(t.value);if(Xx(t))return t.filters.map(e=>gf(e)).join(",");{const e=t.filters.map(n=>gf(n)).join(",");return`${t.op}(${e})`}}function Jx(t,e){return t instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&Qn(r.value,s.value)}(t,e):t instanceof bn?function(r,s){return s instanceof bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,u)=>i&&Jx(a,s.filters[u]),!0):!1}(t,e):void ie()}function Zx(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${Yi(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(Zx).join(" ,")+"}"}(t):"Filter"}class BA extends et{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class $A extends et{constructor(e,n){super(e,"in",n),this.keys=e1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WA extends et{constructor(e,n){super(e,"not-in",n),this.keys=e1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function e1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class qA extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gp(n)&&Lo(n.arrayValue,this.value)}}class HA extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class GA extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class KA extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n=null,r=[],s=[],i=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=u,this.ue=null}}function b0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new QA(t,e,n,r,s,i,a)}function Kp(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yi(r)).join(",")),e.ue=n}return e.ue}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!A0(t.startAt,e.startAt)&&A0(t.endAt,e.endAt)}function yf(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,r=[],s=[],i=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YA(t,e,n,r,s,i,a,u){return new ua(t,e,n,r,s,i,a,u)}function Yp(t){return new ua(t)}function P0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function t1(t){return t.collectionGroup!==null}function oo(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new mt(ft.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vo(i,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new Vo(ft.keyField(),r))}return e.ce}function Hn(t){const e=ae(t);return e.le||(e.le=n1(e,oo(t))),e.le}function XA(t){const e=ae(t);return e.he||(e.he=n1(e,t.explicitOrderBy)),e.he}function n1(t,e){if(t.limitType==="F")return b0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vo(s.field,i)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return b0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vf(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _f(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vc(t,e){return Qp(Hn(t),Hn(e))&&t.limitType===e.limitType}function r1(t){return`${Kp(Hn(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Zx(s)).join(", ")}]`),Lc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Yi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Yi(s)).join(",")),`Target(${r})`}(Hn(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,u,c){const d=N0(a,u,c);return a.inclusive?d<=0:d<0}(r.startAt,oo(r),s)||r.endAt&&!function(a,u,c){const d=N0(a,u,c);return a.inclusive?d>=0:d>0}(r.endAt,oo(r),s))}(t,e)}function JA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s1(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=ZA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZA(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,a,u){const c=a.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Qi(c,d):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new $e(Z.comparator);function Tr(){return eb}const i1=new $e(Z.comparator);function Ha(...t){let e=i1;for(const n of t)e=e.insert(n.key,n);return e}function a1(t){let e=i1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return lo()}function o1(){return lo()}function lo(){return new ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const tb=new $e(Z.comparator),nb=new mt(Z.comparator);function fe(...t){let e=nb;for(const n of t)e=e.add(n);return e}const rb=new mt(xe);function sb(){return rb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function l1(t){return{integerValue:""+t}}function u1(t,e){return DA(e)?l1(e):Xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function ib(t,e,n){return t instanceof Uo?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&qp(i)&&(i=Hp(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Fo?d1(t,e):t instanceof zo?h1(t,e):function(s,i){const a=c1(s,i),u=R0(a)+R0(s.Pe);return mf(a)&&mf(s.Pe)?l1(u):Xp(s.serializer,u)}(t,e)}function ab(t,e,n){return t instanceof Fo?d1(t,e):t instanceof zo?h1(t,e):n}function c1(t,e){return t instanceof Bo?function(r){return mf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Uo extends Fc{}class Fo extends Fc{constructor(e){super(),this.elements=e}}function d1(t,e){const n=f1(e);for(const r of t.elements)n.some(s=>Qn(s,r))||n.push(r);return{arrayValue:{values:n}}}class zo extends Fc{constructor(e){super(),this.elements=e}}function h1(t,e){let n=f1(e);for(const r of t.elements)n=n.filter(s=>!Qn(s,r));return{arrayValue:{values:n}}}class Bo extends Fc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function R0(t){return Qe(t.integerValue||t.doubleValue)}function f1(t){return Gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.field=e,this.transform=n}}function ob(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fo&&s instanceof Fo||r instanceof zo&&s instanceof zo?Ki(r.elements,s.elements,Qn):r instanceof Bo&&s instanceof Bo?Qn(r.Pe,s.Pe):r instanceof Uo&&s instanceof Uo}(t.transform,e.transform)}class lb{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zc{}function m1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jp(t.key,pn.none()):new il(t.key,t.data,pn.none());{const n=t.data,r=Wt.empty();let s=new mt(ft.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new _s(t.key,r,new nn(s.toArray()),pn.none())}}function ub(t,e,n){t instanceof il?function(s,i,a){const u=s.value.clone(),c=D0(s.fieldTransforms,i,a.transformResults);u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(s,i,a){if(!yu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const u=D0(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(g1(s)),c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function uo(t,e,n,r){return t instanceof il?function(i,a,u,c){if(!yu(i.precondition,a))return u;const d=i.value.clone(),p=O0(i.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(i,a,u,c){if(!yu(i.precondition,a))return u;const d=O0(i.fieldTransforms,c,a),p=a.data;return p.setAll(g1(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,u){return yu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function cb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=c1(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function j0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ki(r,s,(i,a)=>ob(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class il extends zc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _s extends zc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function D0(t,e,n){const r=new Map;Ee(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,u=e.data.field(i.field);r.set(i.field,ab(a,u,n[s]))}return r}function O0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,ib(i,a,e))}return r}class Jp extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class db extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ub(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=o1();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let u=this.applyToLocalView(a,i.mutatedFields);u=n.has(s.key)?null:u;const c=m1(a,u);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ki(this.mutations,e.mutations,(n,r)=>j0(n,r))&&Ki(this.baseMutations,e.baseMutations,(n,r)=>j0(n,r))}}class Zp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length);let s=function(){return tb}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Zp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ye;function gb(t){switch(t){default:return ie();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function y1(t){if(t===void 0)return Er("GRPC error has no .code"),U.UNKNOWN;switch(t){case Je.OK:return U.OK;case Je.CANCELLED:return U.CANCELLED;case Je.UNKNOWN:return U.UNKNOWN;case Je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Je.INTERNAL:return U.INTERNAL;case Je.UNAVAILABLE:return U.UNAVAILABLE;case Je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Je.NOT_FOUND:return U.NOT_FOUND;case Je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Je.ABORTED:return U.ABORTED;case Je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Je.DATA_LOSS:return U.DATA_LOSS;default:return ie()}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Ms([4294967295,4294967295],0);function M0(t){const e=yb().encode(t),n=new Vx;return n.update(e),new Uint8Array(n.digest())}function L0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ms([n,r],0),new Ms([s,i],0)]}class em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ga(`Invalid padding: ${n}`);if(r<0)throw new Ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ms.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ms.fromNumber(r)));return s.compare(vb)===1&&(s=new Ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=M0(e),[r,s]=L0(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new em(i,s,n);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=M0(e),[r,s]=L0(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bc(oe.min(),s,new $e(xe),Tr(),fe())}}class al{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new al(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class v1{constructor(e,n){this.targetId=e,this.me=n}}class _1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class V0{constructor(){this.fe=0,this.ge=F0(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=F0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _b{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tr(),this.qe=U0(),this.Qe=new $e(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yf(i))if(r===0){const a=new Z(i.path);this.Ue(n,a,kt.newNoDocument(a,oe.min()))}else Ee(r===1);else{const a=this.Ye(n);if(a!==r){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,u;try{a=Hs(r).toUint8Array()}catch(c){if(c instanceof Gx)return Gi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new em(a,s,i)}catch(c){return Gi(c instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const u=this.Je(a);if(u){if(i.current&&yf(u.target)){const c=new Z(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,kt.newNoDocument(c,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=fe();this.qe.forEach((i,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Bc(e,n,this.Qe,this.ke,r);return this.ke=Tr(),this.qe=U0(),this.Qe=new $e(xe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new V0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function U0(){return new $e(Z.comparator)}function F0(){return new $e(Z.comparator)}const wb={asc:"ASCENDING",desc:"DESCENDING"},xb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eb={and:"AND",or:"OR"};class Tb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wf(t,e){return t.useProto3Json||Lc(e)?e:{value:e}}function tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ib(t,e){return tc(t,e.toTimestamp())}function Gn(t){return Ee(!!t),oe.fromTimestamp(function(n){const r=cs(n);return new st(r.seconds,r.nanos)}(t))}function tm(t,e){return xf(t,e).canonicalString()}function xf(t,e){const n=function(s){return new Re(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function x1(t){const e=Re.fromString(t);return Ee(C1(e)),e}function Ef(t,e){return tm(t.databaseId,e.path)}function Zd(t,e){const n=x1(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(T1(n))}function E1(t,e){return tm(t.databaseId,e)}function Sb(t){const e=x1(t);return e.length===4?Re.emptyPath():T1(e)}function Tf(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T1(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function z0(t,e,n){return{name:Ef(t,e),fields:n.value.mapValue.fields}}function kb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Ee(p===void 0||typeof p=="string"),yt.fromBase64String(p||"")):(Ee(p===void 0||p instanceof Buffer||p instanceof Uint8Array),yt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const p=d.code===void 0?U.UNKNOWN:y1(d.code);return new K(p,d.message||"")}(a);n=new _1(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zd(t,r.document.name),i=Gn(r.document.updateTime),a=r.document.createTime?Gn(r.document.createTime):oe.min(),u=new Wt({mapValue:{fields:r.document.fields}}),c=kt.newFoundDocument(s,i,a,u),d=r.targetIds||[],p=r.removedTargetIds||[];n=new vu(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zd(t,r.document),i=r.readTime?Gn(r.readTime):oe.min(),a=kt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new vu([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zd(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new mb(s,i),u=r.targetId;n=new v1(u,a)}}return n}function Cb(t,e){let n;if(e instanceof il)n={update:z0(t,e.key,e.value)};else if(e instanceof Jp)n={delete:Ef(t,e.key)};else if(e instanceof _s)n={update:z0(t,e.key,e.data),updateMask:Mb(e.fieldMask)};else{if(!(e instanceof db))return ie();n={verify:Ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Uo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof zo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bo)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Ib(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function Nb(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Gn(s.updateTime):Gn(i);return a.isEqual(oe.min())&&(a=Gn(i)),new lb(a,s.transformResults||[])}(n,e))):[]}function Ab(t,e){return{documents:[E1(t,e.path)]}}function I1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E1(t,s);const i=function(d){if(d.length!==0)return k1(bn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(h){return{field:Br(h.field),direction:jb(h.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=wf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function bb(t,e,n,r){const{_t:s,parent:i}=I1(t,e),a={},u=[];let c=0;return n.forEach(d=>{const p="aggregate_"+c++;a[p]=d.alias,d.aggregateType==="count"?u.push({alias:p,count:{}}):d.aggregateType==="avg"?u.push({alias:p,avg:{field:Br(d.fieldPath)}}):d.aggregateType==="sum"&&u.push({alias:p,sum:{field:Br(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},ut:a,parent:i}}function Pb(t){let e=Sb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const h=S1(g);return h instanceof bn&&Xx(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(h=>function(A){return new Vo(mi(A.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(h))}(n.orderBy));let u=null;n.limit&&(u=function(g){let h;return h=typeof g=="object"?g.value:g,Lc(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(g){const h=!!g.before,E=g.values||[];return new ec(E,h)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const h=!g.before,E=g.values||[];return new ec(E,h)}(n.endAt)),YA(e,s,a,i,u,"F",c,d)}function Rb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mi(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=mi(n.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mi(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=mi(n.unaryFilter.field);return et.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return et.create(mi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>S1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function jb(t){return wb[t]}function Db(t){return xb[t]}function Ob(t){return Eb[t]}function Br(t){return{fieldPath:t.canonicalString()}}function mi(t){return ft.fromServerFormat(t.fieldPath)}function k1(t){return t instanceof et?function(n){if(n.op==="=="){if(C0(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NAN"}};if(k0(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NAN"}};if(k0(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(n.field),op:Db(n.op),value:n.value}}}(t):t instanceof bn?function(n){const r=n.getFilters().map(s=>k1(s));return r.length===1?r[0]:{compositeFilter:{op:Ob(n.op),filters:r}}}(t):ie()}function Mb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,s,i=oe.min(),a=oe.min(),u=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.ct=e}}function Vb(t){const e=Pb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(){this.un=new Fb}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(us.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Fb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xi(0)}static kn(){return new Xi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.changes=new ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&uo(r.mutation,s,nn.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ha();return i.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,r,s){let i=Tr();const a=lo(),u=function(){return lo()}();return n.forEach((c,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof _s)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),uo(p.mutation,d,p.mutation.getFieldMask(),st.now())):a.set(d.key,nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return u.set(d,new Bb(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=lo();let s=new $e((a,u)=>a-u),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=r.get(c)||nn.empty();p=u.applyToLocalView(d,p),r.set(c,p);const g=(s.get(u.batchId)||fe()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const a=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,g=o1();p.forEach(h=>{if(!i.has(h)){const E=m1(n.get(h),r.get(h));E!==null&&g.set(h,E),i=i.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(js());let u=-1,c=i;return a.next(d=>F.forEach(d,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(h=>{c=c.insert(p,h)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,fe())).next(p=>({batchId:u,changes:a1(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ha();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const d=function(g,h){return new ua(h,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((g,h)=>{a=a.insert(g,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,kt.newInvalidDocument(p)))});let u=Ha();return a.forEach((c,d)=>{const p=i.get(c);p!==void 0&&uo(p.mutation,d,nn.empty(),st.now()),Uc(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Gn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Vb(s.bundledQuery),readTime:Gn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.overlays=new $e(Z.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=js();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=js(),i=n.length+1,a=new Z(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=js(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=js(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=s)););return F.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fb(n,r));let i=this.Ir.get(n);i===void 0&&(i=fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.Tr=new mt(at.Er),this.dr=new mt(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new at(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new at(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new Re([])),r=new at(n,e),s=new at(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new Re([])),r=new at(n,e),s=new at(n,e+1);let i=fe();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new at(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class at{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(at.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hb(i,n,r,s);this.mutationQueue.push(a);for(const u of s)this.br=this.br.add(new at(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new at(n,0),s=new at(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const u=this.Dr(a.wr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(xe);return n.forEach(s=>{const i=new at(s,0),a=new at(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],u=>{r=r.add(u.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new at(new Z(i),0);let u=new mt(xe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},a),F.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new at(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new at(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.Mr=e,this.docs=function(){return new $e(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Tr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():kt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tr();const a=n.path,u=new Z(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||bA(AA(p),r)<=0||(s.has(p.key)||Uc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qb(this)}getSize(e){return F.resolve(this.size)}}class Qb extends zb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.persistence=e,this.Nr=new ca(n=>Kp(n),Qp),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nm,this.targetCount=0,this.kr=Xi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wp(0),this.Kr=!1,this.Kr=!0,this.$r=new Hb,this.referenceDelegate=e(this),this.Ur=new Yb(this),this.indexManager=new Ub,this.remoteDocumentCache=function(s){return new Kb(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Lb(n),this.Gr=new Wb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Gb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new Jb(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Jb extends RA{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Jr=new nm,this.Yr=null}static Zr(e){return new rm(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Z.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BS()?8:jA(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Zb;return this.Xi(e,n,a).next(u=>{if(i.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Oa()<=ge.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Oa()<=ge.DEBUG&&X("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Oa()<=ge.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):F.resolve())}Yi(e,n){if(P0(n))return F.resolve(null);let r=Hn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_f(n,null,"F"),r=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=fe(...i);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,a,c.readTime)?this.Yi(e,_f(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return P0(n)||s.isEqual(oe.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(Oa()<=ge.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pi(n)),this.rs(e,a,n,NA(s,-1)).next(u=>u))})}ts(e,n){let r=new mt(s1(e));return n.forEach((s,i)=>{Uc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Oa()<=ge.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,us.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new $e(xe),this._s=new ca(i=>Kp(i),Qp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $b(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nP(t,e,n,r){return new tP(t,e,n,r)}async function N1(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],u=[];let c=fe();for(const d of s){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of i){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})}function rP(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,p){const g=d.batch,h=g.keys();let E=F.resolve();return h.forEach(A=>{E=E.next(()=>p.getEntry(c,A)).next(C=>{const v=d.docVersions.get(A);Ee(v!==null),C.version.compareTo(v)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=fe();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function A1(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sP(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,g)=>{const h=s.get(g);if(!h)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let E=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(yt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),s=s.insert(g,E),function(C,v,x){return C.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,E,p)&&u.push(n.Ur.updateTargetData(i,E))});let c=Tr(),d=fe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(iP(i,a,e.documentUpdates).next(p=>{c=p.Ps,d=p.Is})),!r.isEqual(oe.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return F.waitFor(u).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function iP(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Tr();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):X("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:a,Is:s}})}function aP(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oP(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Hr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function If(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sl(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function B0(t,e,n){const r=ae(t);let s=oe.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const g=ae(c),h=g._s.get(p);return h!==void 0?F.resolve(g.os.get(h)):g.Ur.getTargetData(d,p)}(r,a,Hn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:oe.min(),n?i:fe())).next(u=>(lP(r,JA(e),u),{documents:u,Ts:i})))}function lP(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class $0{constructor(){this.activeTargetIds=sb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uP{constructor(){this.so=new $0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function eh(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class fP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const u=eh(),c=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,c,d,s).then(p=>(X("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw Gi("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,a,u){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=dP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=eh();return new Promise((a,u)=>{const c=new Ux;c.setWithCredentials(!0),c.listenOnce(Fx.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case mu.NO_ERROR:const p=c.getResponseJson();X(Tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case mu.TIMEOUT:X(Tt,`RPC '${e}' ${i} timed out`),u(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const g=c.getStatus();if(X(Tt,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const E=h==null?void 0:h.error;if(E&&E.status&&E.message){const A=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(x)>=0?x:U.UNKNOWN}(E.status);u(new K(A,E.message))}else u(new K(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new K(U.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{X(Tt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Tt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=eh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$x(),u=Bx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");X(Tt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const g=a.createWebChannel(p,c);let h=!1,E=!1;const A=new hP({Io:v=>{E?X(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(X(Tt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),h=!0),X(Tt,`RPC '${e}' stream ${s} sending:`,v),g.send(v))},To:()=>g.close()}),C=(v,x,y)=>{v.listen(x,k=>{try{y(k)}catch(b){setTimeout(()=>{throw b},0)}})};return C(g,qa.EventType.OPEN,()=>{E||(X(Tt,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),C(g,qa.EventType.CLOSE,()=>{E||(E=!0,X(Tt,`RPC '${e}' stream ${s} transport closed`),A.So())}),C(g,qa.EventType.ERROR,v=>{E||(E=!0,Gi(Tt,`RPC '${e}' stream ${s} transport errored:`,v),A.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),C(g,qa.EventType.MESSAGE,v=>{var x;if(!E){const y=v.data[0];Ee(!!y);const k=y,b=k.error||((x=k[0])===null||x===void 0?void 0:x.error);if(b){X(Tt,`RPC '${e}' stream ${s} received error:`,b);const M=b.status;let L=function(I){const S=Je[I];if(S!==void 0)return y1(S)}(M),_=b.message;L===void 0&&(L=U.INTERNAL,_="Unknown error status: "+M+" with message "+b.message),E=!0,A.So(new K(L,_)),g.close()}else X(Tt,`RPC '${e}' stream ${s} received:`,y),A.bo(y)}}),C(u,zx.STAT_EVENT,v=>{v.stat===ff.PROXY?X(Tt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===ff.NOPROXY&&X(Tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new Tb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r,s,i,a,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new b1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pP extends P1{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=kb(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?oe.min():a.readTime?Gn(a.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Tf(this.serializer),n.addTarget=function(i,a){let u;const c=a.target;if(u=yf(c)?{documents:Ab(i,c)}:{query:I1(i,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=w1(i,a.resumeToken);const d=wf(i,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(oe.min())>0){u.readTime=tc(i,a.snapshotVersion.toTimestamp());const d=wf(i,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=Rb(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Tf(this.serializer),n.removeTarget=e,this.a_(n)}}class mP extends P1{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Nb(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Tf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Cb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,xf(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,xf(n,r),s,a,u,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Er(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{ri(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ae(c);d.L_.add(4),await ol(d),d.q_.set("Unknown"),d.L_.delete(4),await Wc(d)}(this))})}),this.q_=new yP(r,s)}}async function Wc(t){if(ri(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function R1(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),lm(n)?om(n):da(n).r_()&&am(n,e))}function im(t,e){const n=ae(t),r=da(n);n.N_.delete(e),r.r_()&&j1(n,e),n.N_.size===0&&(r.r_()?r.o_():ri(n)&&n.q_.set("Unknown"))}function am(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}da(t).A_(e)}function j1(t,e){t.Q_.xe(e),da(t).R_(e)}function om(t){t.Q_=new _b({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),da(t).start(),t.q_.v_()}function lm(t){return ri(t)&&!da(t).n_()&&t.N_.size>0}function ri(t){return ae(t).L_.size===0}function D1(t){t.Q_=void 0}async function _P(t){t.q_.set("Online")}async function wP(t){t.N_.forEach((e,n)=>{am(t,e)})}async function xP(t,e){D1(t),lm(t)?(t.q_.M_(e),om(t)):t.q_.set("Unknown")}async function EP(t,e,n){if(t.q_.set("Online"),e instanceof _1&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nc(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof v1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await A1(t.localStore);n.compareTo(r)>=0&&await function(i,a){const u=i.Q_.rt(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(yt.EMPTY_BYTE_STRING,p.snapshotVersion)),j1(i,c);const g=new Hr(p.target,c,d,p.sequenceNumber);am(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await nc(t,r)}}async function nc(t,e,n){if(!sl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>A1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wc(t)})}function O1(t,e){return e().catch(n=>nc(t,n,e))}async function qc(t){const e=ae(t),n=ds(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TP(e);)try{const s=await aP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,IP(e,s)}catch(s){await nc(e,s)}M1(e)&&L1(e)}function TP(t){return ri(t)&&t.O_.length<10}function IP(t,e){t.O_.push(e);const n=ds(t);n.r_()&&n.V_&&n.m_(e.mutations)}function M1(t){return ri(t)&&!ds(t).n_()&&t.O_.length>0}function L1(t){ds(t).start()}async function SP(t){ds(t).p_()}async function kP(t){const e=ds(t);for(const n of t.O_)e.m_(n.mutations)}async function CP(t,e,n){const r=t.O_.shift(),s=Zp.from(r,e,n);await O1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qc(t)}async function NP(t,e){e&&ds(t).V_&&await async function(r,s){if(function(a){return gb(a)&&a!==U.ABORTED}(s.code)){const i=r.O_.shift();ds(r).s_(),await O1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qc(r)}}(t,e),M1(t)&&L1(t)}async function q0(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ri(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wc(n)}async function AP(t,e){const n=ae(t);e?(n.L_.delete(2),await Wc(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function da(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new pP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:_P.bind(null,t),Ro:wP.bind(null,t),mo:xP.bind(null,t),d_:EP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),lm(t)?om(t):t.q_.set("Unknown")):(await t.K_.stop(),D1(t))})),t.K_}function ds(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new mP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SP.bind(null,t),mo:NP.bind(null,t),f_:kP.bind(null,t),g_:CP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qc(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,u=new um(e,n,a,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cm(t,e){if(Er("AsyncQueue",`${e}: ${t}`),sl(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Ha(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.W_=new $e(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ji{constructor(e,n,r,s,i,a,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ji(e,n,Vi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PP{constructor(){this.queries=G0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=G0(),i.forEach((a,u)=>{for(const c of u.j_)c.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function G0(){return new ca(t=>r1(t),Vc)}async function V1(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new bP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const u=cm(a,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&dm(n)}async function U1(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RP(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const u of a.j_)u.X_(s)&&(r=!0);a.z_=s}}r&&dm(n)}function jP(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function dm(t){t.Y_.forEach(e=>{e.next()})}var Sf,K0;(K0=Sf||(Sf={})).ea="default",K0.Cache="cache";class F1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.key=e}}class B1{constructor(e){this.key=e}}class DP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=s1(e),this.Ra=new Vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new H0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const h=s.get(p),E=Uc(this.query,g)?g:null,A=!!h&&this.mutatedKeys.has(h.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let v=!1;h&&E?h.data.isEqual(E.data)?A!==C&&(r.track({type:3,doc:E}),v=!0):this.ga(h,E)||(r.track({type:2,doc:E}),v=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(u=!0)):!h&&E?(r.track({type:0,doc:E}),v=!0):h&&!E&&(r.track({type:1,doc:h}),v=!0,(c||d)&&(u=!0)),v&&(E?(a=a.add(E),i=C?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,g)=>function(E,A){const C=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return C(E)-C(A)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,a.length!==0||d?{snapshot:new Ji(this.query,e.Ra,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new H0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new B1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new z1(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ji.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class OP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MP{constructor(e){this.key=e,this.va=!1}}class LP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new ca(u=>r1(u),Vc),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(Z.comparator),this.Na=new Map,this.La=new nm,this.Ba={},this.ka=new Map,this.qa=Xi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VP(t,e,n=!0){const r=K1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await $1(r,e,n,!0),s}async function UP(t,e){const n=K1(t);await $1(n,e,!0,!1)}async function $1(t,e,n,r){const s=await oP(t.localStore,Hn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await FP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&R1(t.remoteStore,s),u}async function FP(t,e,n,r,s){t.Ka=(g,h,E)=>async function(C,v,x,y){let k=v.view.ma(x);k.ns&&(k=await B0(C.localStore,v.query,!1).then(({documents:_})=>v.view.ma(_,k)));const b=y&&y.targetChanges.get(v.targetId),M=y&&y.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(k,C.isPrimaryClient,b,M);return Y0(C,v.targetId,L.wa),L.snapshot}(t,g,h,E);const i=await B0(t.localStore,e,!0),a=new DP(e,i.Ts),u=a.ma(i.documents),c=al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(u,t.isPrimaryClient,c);Y0(t,n,d.wa);const p=new OP(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function zP(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Vc(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await If(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&im(r.remoteStore,s.targetId),kf(r,s.targetId)}).catch(rl)):(kf(r,s.targetId),await If(r.localStore,s.targetId,!0))}async function BP(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),im(n.remoteStore,r.targetId))}async function $P(t,e,n){const r=YP(t);try{const s=await function(a,u){const c=ae(a),d=st.now(),p=u.reduce((E,A)=>E.add(A.key),fe());let g,h;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=Tr(),C=fe();return c.cs.getEntries(E,p).next(v=>{A=v,A.forEach((x,y)=>{y.isValidDocument()||(C=C.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,A)).next(v=>{g=v;const x=[];for(const y of u){const k=cb(y,g.get(y.key).overlayedDocument);k!=null&&x.push(new _s(y.key,k,Kx(k.value.mapValue),pn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,x,u)}).next(v=>{h=v;const x=v.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(E,v.batchId,x)})}).then(()=>({batchId:h.batchId,changes:a1(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,u,c){let d=a.Ba[a.currentUser.toKey()];d||(d=new $e(xe)),d=d.insert(u,c),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await ll(r,s.changes),await qc(r.remoteStore)}catch(s){const i=cm(s,"Failed to persist write");n.reject(i)}}async function W1(t,e){const n=ae(t);try{const r=await sP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ee(a.va):s.removedDocuments.size>0&&(Ee(a.va),a.va=!1))}),await ll(n,r,e)}catch(r){await rl(r)}}function Q0(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const u=a.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(a,u){const c=ae(a);c.onlineState=u;let d=!1;c.queries.forEach((p,g)=>{for(const h of g.j_)h.Z_(u)&&(d=!0)}),d&&dm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WP(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new $e(Z.comparator);a=a.insert(i,kt.newNoDocument(i,oe.min()));const u=fe().add(i),c=new Bc(oe.min(),new Map,new $e(xe),a,u);await W1(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),hm(r)}else await If(r.localStore,e,!1).then(()=>kf(r,e,n)).catch(rl)}async function qP(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await rP(n.localStore,e);H1(n,r,null),q1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ll(n,s)}catch(s){await rl(s)}}async function HP(t,e,n){const r=ae(t);try{const s=await function(a,u){const c=ae(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(Ee(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);H1(r,e,n),q1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ll(r,s)}catch(s){await rl(s)}}function q1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function H1(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||G1(t,r)})}function G1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(im(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hm(t))}function Y0(t,e,n){for(const r of n)r instanceof z1?(t.La.addReference(r.key,e),GP(t,r)):r instanceof B1?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||G1(t,r.key)):ie()}function GP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),hm(t))}function hm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new MP(n)),t.Oa=t.Oa.insert(n,r),R1(t.remoteStore,new Hr(Hn(Yp(n.path)),r,"TargetPurposeLimboResolution",Wp.oe))}}async function ll(t,e,n){const r=ae(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{a.push(r.Ka(c,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=sm.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(c,d){const p=ae(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(d,h=>F.forEach(h.$i,E=>p.persistence.referenceDelegate.addReference(g,h.targetId,E)).next(()=>F.forEach(h.Ui,E=>p.persistence.referenceDelegate.removeReference(g,h.targetId,E)))))}catch(g){if(!sl(g))throw g;X("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const h=g.targetId;if(!g.fromCache){const E=p.os.get(h),A=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(h,C)}}}(r.localStore,i))}async function KP(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await N1(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new K(U.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ll(n,r.hs)}}function QP(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let s=fe();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const u=n.Fa.get(a);s=s.unionWith(u.view.Va)}return s}}function K1(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.Ca.d_=RP.bind(null,e.eventManager),e.Ca.$a=jP.bind(null,e.eventManager),e}function YP(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HP.bind(null,e),e}class rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nP(this.persistence,new eP,e.initialUser,this.serializer)}Ga(e){return new Xb(rm.Zr,this.serializer)}Wa(e){return new uP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rc.provider={build:()=>new rc};class Cf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KP.bind(null,this.syncEngine),await AP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PP}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),r=function(i){return new fP(i)}(e.databaseInfo);return function(i,a,u,c){return new gP(i,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,u){return new vP(r,s,i,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Q0(this.syncEngine,n,0),function(){return W0.D()?new W0:new cP}())}createSyncEngine(e,n){return function(s,i,a,u,c,d,p){const g=new LP(s,i,a,u,c,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ol(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cf.provider={build:()=>new Cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=qx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await N1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JP(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>q0(e.remoteStore,s)),t._onlineComponents=e}async function JP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await nh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Gi("Error using user provided cache. Falling back to memory cache: "+n),await nh(t,new rc)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await nh(t,new rc);return t._offlineComponents}async function fm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await X0(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await X0(t,new Cf))),t._onlineComponents}function ZP(t){return fm(t).then(e=>e.syncEngine)}function eR(t){return fm(t).then(e=>e.datastore)}async function Y1(t){const e=await fm(t),n=e.eventManager;return n.onListen=VP.bind(null,e.syncEngine),n.onUnlisten=zP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BP.bind(null,e.syncEngine),n}function tR(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const p=new Q1({next:h=>{p.Za(),a.enqueueAndForget(()=>U1(i,g));const E=h.docs.has(u);!E&&h.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&h.fromCache&&c&&c.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(h)},error:h=>d.reject(h)}),g=new F1(Yp(u.path),p,{includeMetadataChanges:!0,_a:!0});return V1(i,g)}(await Y1(t),t.asyncQueue,e,n,r)),r.promise}function nR(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const p=new Q1({next:h=>{p.Za(),a.enqueueAndForget(()=>U1(i,g)),h.fromCache&&c.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(h)},error:h=>d.reject(h)}),g=new F1(u,p,{includeMetadataChanges:!0,_a:!0});return V1(i,g)}(await Y1(t),t.asyncQueue,e,n,r)),r.promise}function rR(t,e,n){const r=new qn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await eR(t);r.resolve(async function(a,u,c){var d;const p=ae(a),{request:g,ut:h,parent:E}=bb(p.serializer,XA(u),c);p.connection.Fo||delete g.parent;const A=(await p.Lo("RunAggregationQuery",p.serializer.databaseId,E,g,1)).filter(v=>!!v.result);Ee(A.length===1);const C=(d=A[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(C).reduce((v,x)=>(v[h[x]]=C[x],v),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sR(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z0(t){if(!Z.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ev(t){if(Z.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hc(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _A;switch(r.type){case"firstParty":return new TA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J0.get(n);r&&(X("ComponentProvider","Removing Datastore"),J0.delete(n),r.terminate())}(this),Promise.resolve()}}function iR(t,e,n,r={}){var s;const i=(t=yn(t,Gc))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=It.MOCK_USER;else{u=Jw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(d)}t._authCredentials=new wA(new Wx(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class ss extends si{constructor(e,n,r){super(e,n,Yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Z(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function ce(t,e,...n){if(t=it(t),J1("collection","path",e),t instanceof Gc){const r=Re.fromString(e,...n);return ev(r),new ss(t,null,r)}{if(!(t instanceof Ut||t instanceof ss))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return ev(r),new ss(t.firestore,null,r)}}function de(t,e,...n){if(t=it(t),arguments.length===1&&(e=qx.newId()),J1("doc","path",e),t instanceof Gc){const r=Re.fromString(e,...n);return Z0(r),new Ut(t,null,new Z(r))}{if(!(t instanceof Ut||t instanceof ss))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Z0(r),new Ut(t.firestore,t instanceof ss?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new b1(this,"async_queue_retry"),this.Vu=()=>{const r=th();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw Er("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=um.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ws extends Gc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,await e}}}function aR(t,e){const n=typeof t=="object"?t:jp(),r=typeof t=="string"?t:"(default)",s=jc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Qw("firestore");i&&iR(s,...i)}return s}function Kc(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oR(t),t._firestoreClient}function oR(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,p){return new LA(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,X1(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class uR{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zi(yt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zi(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=/^__.*__$/;class dR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new il(e,this.data,n,this.fieldTransforms)}}class Z1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class gm{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eE(this.Cu)&&cR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Qu(e,n,r,s=!1){return new gm({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new hR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tE(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_m("Data must be an object, but it was:",a,r);const u=nE(r,a);let c,d;if(i.merge)c=new nn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const h=Nf(e,g,n);if(!a.contains(h))throw new K(U.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);sE(p,h)||p.push(h)}c=new nn(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new dR(new Wt(u),c,d)}class Xc extends ul{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xc}}class ym extends ul{_toFieldTransform(e){return new p1(e.path,new Uo)}isEqual(e){return e instanceof ym}}class vm extends ul{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Bo(e.serializer,u1(e.serializer,this.$u));return new p1(e.path,n)}isEqual(e){return e instanceof vm&&this.$u===e.$u}}function fR(t,e,n,r){const s=t.Qu(1,e,n);_m("Data must be an object, but it was:",s,r);const i=[],a=Wt.empty();ni(r,(c,d)=>{const p=wm(e,c,n);d=it(d);const g=s.Nu(p);if(d instanceof Xc)i.push(p);else{const h=cl(d,g);h!=null&&(i.push(p),a.set(p,h))}});const u=new nn(i);return new Z1(a,u,s.fieldTransforms)}function pR(t,e,n,r,s,i){const a=t.Qu(1,e,n),u=[Nf(e,r,n)],c=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)u.push(Nf(e,i[h])),c.push(i[h+1]);const d=[],p=Wt.empty();for(let h=u.length-1;h>=0;--h)if(!sE(d,u[h])){const E=u[h];let A=c[h];A=it(A);const C=a.Nu(E);if(A instanceof Xc)d.push(E);else{const v=cl(A,C);v!=null&&(d.push(E),p.set(E,v))}}const g=new nn(d);return new Z1(p,g,a.fieldTransforms)}function mR(t,e,n,r=!1){return cl(n,t.Qu(r?4:3,e))}function cl(t,e){if(rE(t=it(t)))return _m("Unsupported field value:",e,t),nE(t,e);if(t instanceof ul)return function(r,s){if(!eE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const u of r){let c=cl(u,s.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:tc(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tc(s.serializer,i)}}if(r instanceof pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zi)return{bytesValue:w1(s.serializer,r._byteString)};if(r instanceof Ut){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mm)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Xp(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Hc(r)}`)}(t,e)}function nE(t,e){const n={};return Hx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(t,(r,s)=>{const i=cl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof pm||t instanceof Zi||t instanceof Ut||t instanceof ul||t instanceof mm)}function _m(t,e,n){if(!rE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Nf(t,e,n){if((e=it(e))instanceof Qc)return e._internalPath;if(typeof e=="string")return wm(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const gR=new RegExp("[~\\*/\\[\\]]");function wm(t,e,n){if(e.search(gR)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qc(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new K(U.INVALID_ARGUMENT,u+t+c)}function sE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yR extends iE{data(){return super.data()}}function Jc(t,e){return typeof e=="string"?wm(t,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xm{}class aE extends xm{}function Ke(t,e,...n){let r=[];e instanceof xm&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Em).length,u=i.filter(c=>c instanceof Zc).length;if(a>1||a>0&&u>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zc extends aE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=this._parse(e);return oE(e._query,n),new si(e.firestore,e.converter,vf(e._query,n))}_parse(e){const n=Yc(e.firestore);return function(i,a,u,c,d,p,g){let h;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){sv(g,p);const E=[];for(const A of g)E.push(rv(c,i,A));h={arrayValue:{values:E}}}else h=rv(c,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||sv(g,p),h=mR(u,a,g,p==="in"||p==="not-in");return et.create(d,p,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Lt(t,e,n){const r=e,s=Jc("where",t);return Zc._create(s,r,n)}class Em extends xm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const u=i.getFlattenedFilters();for(const c of u)oE(a,c),a=vf(a,c)}(e._query,n),new si(e.firestore,e.converter,vf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends aE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tm(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vo(i,a)}(e._query,this._field,this._direction);return new si(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ua(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Jn(t,e="asc"){const n=e,r=Jc("orderBy",t);return Tm._create(r,n)}function rv(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t1(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!Z.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S0(t,new Z(r))}if(n instanceof Ut)return S0(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(n)}.`)}function sv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oE(t,e){const n=function(s,i){for(const a of s)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _R{convertValue(e,n="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ni(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Qe(a.doubleValue));return new mm(i)}convertGeoPoint(e){return new pm(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const n=cs(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Ee(C1(r));const s=new Mo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Er(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function wR(){return new lR("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uE extends iE{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _u extends uE{data(e={}){return super.data(e)}}class xR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _u(this._firestore,this._userDataWriter,r.key,r,new Ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(u=>{const c=new _u(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ka(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new _u(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ka(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:ER(u.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ER(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){t=yn(t,Ut);const e=yn(t.firestore,ws);return tR(Kc(e),t._key).then(n=>TR(e,t,n))}class Im extends _R{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Ue(t){t=yn(t,si);const e=yn(t.firestore,ws),n=Kc(e),r=new Im(e);return vR(t._query),nR(n,t._query).then(s=>new xR(e,r,t,s))}function Sm(t,e,n){t=yn(t,Ut);const r=yn(t.firestore,ws),s=lE(t.converter,e,n);return ed(r,[tE(Yc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pn.none())])}function Me(t,e,n,...r){t=yn(t,Ut);const s=yn(t.firestore,ws),i=Yc(s);let a;return a=typeof(e=it(e))=="string"||e instanceof Qc?pR(i,"updateDoc",t._key,e,n,r):fR(i,"updateDoc",t._key,e),ed(s,[a.toMutation(t._key,pn.exists(!0))])}function ii(t){return ed(yn(t.firestore,ws),[new Jp(t._key,pn.none())])}function Qt(t,e){const n=yn(t.firestore,ws),r=de(t),s=lE(t.converter,e);return ed(n,[tE(Yc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pn.exists(!1))]).then(()=>r)}function ed(t,e){return function(r,s){const i=new qn;return r.asyncQueue.enqueueAndForget(async()=>$P(await ZP(r),s,i)),i.promise}(Kc(t),e)}function TR(t,e,n){const r=n.docs.get(e._key),s=new Im(t);return new uE(t,s,e._key,r,new Ka(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return IR(t,{count:wR()})}function IR(t,e){const n=yn(t.firestore,ws),r=Kc(n),s=OA(e,(i,a)=>new pb(a,i.aggregateType,i._internalFieldPath));return rR(r,t._query,s).then(i=>function(u,c,d){const p=new Im(u);return new uR(c,p,d)}(n,t,i))}function ee(){return new ym("serverTimestamp")}function dn(t){return new vm("increment",t)}(function(e,n=!0){(function(s){la=s})(ei),Bs(new ls("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),u=new ws(new xA(r.getProvider("auth-internal")),new SA(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Bn(w0,"4.7.3",e),Bn(w0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="firebasestorage.googleapis.com",SR="storageBucket",kR=2*60*1e3,CR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Xn{constructor(e,n,r=0){super(rh(e),`Firebase Storage: ${n} (${rh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yn||(Yn={}));function rh(t){return"storage/"+t}function NR(){const t="An unknown error occurred, please check the error payload for server response.";return new Zn(Yn.UNKNOWN,t)}function AR(){return new Zn(Yn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bR(){return new Zn(Yn.CANCELED,"User canceled the upload/download.")}function PR(t){return new Zn(Yn.INVALID_URL,"Invalid URL '"+t+"'.")}function RR(t){return new Zn(Yn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iv(t){return new Zn(Yn.INVALID_ARGUMENT,t)}function dE(){return new Zn(Yn.APP_DELETED,"The Firebase app was deleted.")}function jR(t){return new Zn(Yn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Sn.makeFromUrl(e,n)}catch{return new Sn(e,"")}if(r.path==="")return r;throw RR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${p}/b/${s}/o${h}`,"i"),A={bucket:1,path:3},C=n===cE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",x=new RegExp(`^https?://${C}/${s}/${v}`,"i"),k=[{regex:u,indices:c,postModify:i},{regex:E,indices:A,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<k.length;b++){const M=k[b],L=M.regex.exec(e);if(L){const _=L[M.indices.bucket];let w=L[M.indices.path];w||(w=""),r=new Sn(_,w),M.postModify(r);break}}if(r==null)throw PR(e);return r}}class DR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e,n){let r=1,s=null,i=null,a=!1,u=0;function c(){return u===2}let d=!1;function p(...v){d||(d=!0,e.apply(null,v))}function g(v){s=setTimeout(()=>{s=null,t(E,c())},v)}function h(){i&&clearTimeout(i)}function E(v,...x){if(d){h();return}if(v){h(),p.call(null,v,...x);return}if(c()||a){h(),p.call(null,v,...x);return}r<64&&(r*=2);let k;u===1?(u=2,k=0):k=(r+Math.random())*1e3,g(k)}let A=!1;function C(v){A||(A=!0,h(),!d&&(s!==null?(v||(u=2),clearTimeout(s),g(0)):v||(u=1)))}return g(0),i=setTimeout(()=>{a=!0,C(!0)},n),C}function MR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){return t!==void 0}function av(t,e,n,r){if(r<e)throw iv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw iv(`Invalid value for '${t}'. Expected ${n} or less.`)}function VR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ic;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ic||(ic={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,r,s,i,a,u,c,d,p,g,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=g,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,A)=>{this.resolve_=E,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const u=i.getErrorCode()===ic.NO_ERROR,c=i.getStatus();if(!u||UR(c,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===ic.ABORT;r(!1,new Xl(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Xl(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());LR(c)?i(c):i()}catch(c){a(c)}else if(u!==null){const c=NR();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(s.canceled){const c=this.appDelete_?dE():bR();a(c)}else{const c=AR();a(c)}};this.canceled_?n(!1,new Xl(!1,null,!0)):this.backoffId_=OR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $R(t,e){e&&(t["X-Firebase-GMPID"]=e)}function WR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qR(t,e,n,r,s,i,a=!0){const u=VR(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return $R(d,e),zR(d,n),BR(d,i),WR(d,r),new FR(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this._service=e,n instanceof Sn?this._location=n:this._location=Sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ac(e,n)}get root(){const e=new Sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GR(this._location.path)}get storage(){return this._service}get parent(){const e=HR(this._location.path);if(e===null)return null;const n=new Sn(this._location.bucket,e);return new ac(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jR(e)}}function ov(t,e){const n=e==null?void 0:e[SR];return n==null?null:Sn.makeFromBucketSpec(n,t)}function KR(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Jw(s,t.app.options.projectId))}class QR{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=cE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kR,this._maxUploadRetryTime=CR,this._requests=new Set,s!=null?this._bucket=Sn.makeFromBucketSpec(s,this._host):this._bucket=ov(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,e):this._bucket=ov(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){av("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ac(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DR(dE());{const a=qR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const lv="@firebase/storage",uv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="storage";function YR(t=jp(),e){t=it(t);const r=jc(t,hE).getImmediate({identifier:e}),s=Qw("storage");return s&&XR(r,...s),r}function XR(t,e,n,r={}){KR(t,e,n,r)}function JR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new QR(n,r,s,e,ei)}function ZR(){Bs(new ls(hE,JR,"PUBLIC").setMultipleInstances(!0)),Bn(lv,uv,""),Bn(lv,uv,"esm2017")}ZR();const e4={apiKey:"AIzaSyCdrH2241iaDDuo33lS7gEswhmwwiEDXWw",authDomain:"last-zone-91af9.firebaseapp.com",projectId:"last-zone-91af9",storageBucket:"last-zone-91af9.firebasestorage.app",messagingSenderId:"58463070590",appId:"1:58463070590:web:4b67aab1defe19cb176b2f"},km=Rp(e4),Ma=Lx(km),W=aR(km);YR(km);const fE=D.createContext();function ai(){return D.useContext(fE)}function t4({children:t}){const[e,n]=D.useState(null),[r,s]=D.useState(null),[i,a]=D.useState([]),[u,c]=D.useState(null),[d,p]=D.useState(!0),g=v=>r==="admin"?!0:i.includes(v),h=()=>r==="admin"?["dashboard","games","promotions","tournaments","users","deposits","transactions","withdrawals","lottery","notifications","settings","subadmins","demo-data"]:i;async function E(v,x){const y=await sN(Ma,v,x),k=await Qa(de(W,"users",y.user.uid));if(k.exists()&&k.data().role==="admin")return y;const b=await Qa(de(W,"subadmins",y.user.uid));if(b.exists()&&b.data().status==="active")return y;throw await Xd(Ma),new Error("Access denied. Admin privileges required.")}function A(){return Xd(Ma)}D.useEffect(()=>oN(Ma,async x=>{if(x){const y=await Qa(de(W,"users",x.uid));if(y.exists()&&y.data().role==="admin"){n(x),s("admin"),a([]),c({...y.data(),uid:x.uid}),p(!1);return}const k=await Qa(de(W,"subadmins",x.uid));if(k.exists()&&k.data().status==="active"){n(x),s("subadmin"),a(k.data().permissions||[]),c({...k.data(),uid:x.uid}),p(!1);return}await Xd(Ma),n(null),s(null),a([]),c(null)}else n(null),s(null),a([]),c(null);p(!1)}),[]);const C={currentUser:e,userRole:r,userPermissions:i,userData:u,login:E,logout:A,loading:d,hasPermission:g,getAllowedPages:h,isAdmin:r==="admin",isSubAdmin:r==="subadmin"};return l.jsx(fE.Provider,{value:C,children:t})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:u="",children:c,...d},p)=>D.createElement("svg",{ref:p,...n4,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${r4(t)}`,u].join(" "),...d},[...e.map(([g,h])=>D.createElement(g,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=re("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=re("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=re("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=re("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=re("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=re("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=re("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=re("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=re("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=re("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S4=[{path:"/dashboard",icon:h4,label:"Dashboard",permission:"dashboard"},{path:"/games",icon:$o,label:"Games",permission:"games"},{path:"/promotions",icon:oc,label:"Promotions",permission:"promotions"},{path:"/tournaments",icon:Kn,label:"Tournaments",permission:"tournaments"},{path:"/users",icon:mr,label:"Users",permission:"users"},{path:"/deposits",icon:dl,label:"Deposits",permission:"deposits"},{path:"/transactions",icon:bf,label:"Transactions",permission:"transactions"},{path:"/withdrawals",icon:hl,label:"Withdrawals",permission:"withdrawals"},{path:"/lottery",icon:Wo,label:"Lottery",permission:"lottery"},{path:"/notifications",icon:Af,label:"Notifications",permission:"notifications"},{path:"/subadmins",icon:yE,label:"Sub-Admins",permission:"subadmins",adminOnly:!0},{path:"/settings",icon:gE,label:"Settings",permission:"settings"},{path:"/demo-data",icon:pE,label:"Add Demo Data",permission:"demo-data",adminOnly:!0}];function k4({isOpen:t,onClose:e}){const{userRole:n,getAllowedPages:r,isAdmin:s}=ai(),i=r(),a=S4.filter(u=>u.adminOnly&&!s?!1:s||i.includes(u.permission));return l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:e}),l.jsxs("aside",{className:`
        fixed top-0 left-0 h-full w-64 bg-dark-400 z-50
        transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 lg:static lg:z-0
        ${t?"translate-x-0":"-translate-x-full"}
      `,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"/logo.jpeg",alt:"Last Zone Legends",className:"w-10 h-10 rounded-lg object-cover"}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-white text-sm",children:"Last Zone"}),l.jsx("p",{className:"text-xs text-gray-500",children:s?"Admin Panel":"Sub-Admin"})]})]}),l.jsx("button",{onClick:e,className:"lg:hidden p-1 hover:bg-dark-200 rounded",children:l.jsx(Ir,{className:"w-5 h-5 text-gray-400"})})]}),!s&&l.jsx("div",{className:"mx-3 mt-3 px-3 py-2 bg-purple-500/20 border border-purple-500/30 rounded-lg",children:l.jsx("p",{className:"text-xs text-purple-400 font-medium",children:"Limited Access Mode"})}),l.jsx("nav",{className:"p-3 space-y-1 overflow-y-auto h-[calc(100vh-80px)]",children:a.map(u=>l.jsxs(IS,{to:u.path,onClick:e,className:({isActive:c})=>`
                flex items-center gap-3 px-3 py-2.5 rounded-lg
                transition-all duration-200
                ${c?"bg-primary-600 text-white":"text-gray-400 hover:bg-dark-200 hover:text-white"}
              `,children:[l.jsx(u.icon,{className:"w-5 h-5"}),l.jsx("span",{className:"text-sm font-medium",children:u.label})]},u.path))})]})]})}function C4({onMenuClick:t}){const{currentUser:e,logout:n}=ai(),r=bc(),s=async()=>{try{await n(),r("/login")}catch(i){console.error("Logout error:",i)}};return l.jsx("header",{className:"sticky top-0 z-30 gradient-header",children:l.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:t,className:"lg:hidden p-2 hover:bg-white/10 rounded-lg transition-colors",children:l.jsx(g4,{className:"w-5 h-5 text-white"})}),l.jsx("h1",{className:"text-lg font-bold text-white",children:"Admin Panel"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-white/10 rounded-lg",children:[l.jsx(T4,{className:"w-4 h-4 text-white/70"}),l.jsx("span",{className:"text-sm text-white/90",children:e==null?void 0:e.email})]}),l.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[l.jsx(p4,{className:"w-4 h-4 text-white"}),l.jsx("span",{className:"text-sm text-white hidden sm:inline",children:"Logout"})]})]})]})})}function Zt({children:t}){const[e,n]=D.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-dark-500 flex",children:[l.jsx(k4,{isOpen:e,onClose:()=>n(!1)}),l.jsxs("div",{className:"flex-1 flex flex-col min-h-screen lg:ml-0",children:[l.jsx(C4,{onMenuClick:()=>n(!0)}),l.jsx("main",{className:"flex-1 p-4 lg:p-6 overflow-x-hidden",children:t})]})]})}function Y({children:t,variant:e="primary",size:n="md",disabled:r=!1,loading:s=!1,icon:i,onClick:a,type:u="button",className:c=""}){const d={primary:"bg-primary-600 hover:bg-primary-700 text-white",secondary:"bg-dark-100 hover:bg-dark-200 text-gray-300",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",warning:"bg-yellow-600 hover:bg-yellow-700 text-white",ghost:"bg-transparent hover:bg-dark-100 text-gray-300"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return l.jsxs("button",{type:u,onClick:a,disabled:r||s,className:`
        ${d[e]} 
        ${p[n]} 
        rounded-lg font-medium transition-all duration-200
        flex items-center justify-center gap-2
        disabled:opacity-50 disabled:cursor-not-allowed
        ${c}
      `,children:[s?l.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):i?l.jsx(i,{className:"w-4 h-4"}):null,t]})}function N4(){const[t,e]=D.useState(""),[n,r]=D.useState(""),[s,i]=D.useState(!1),[a,u]=D.useState(""),[c,d]=D.useState(!1),{login:p}=ai(),g=bc(),h=async E=>{E.preventDefault(),u(""),d(!0);try{await p(t,n),g("/dashboard")}catch(A){u(A.message||"Failed to login. Please check your credentials.")}finally{d(!1)}};return l.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:"/logo.jpeg",alt:"Last Zone Legends",className:"w-20 h-20 rounded-2xl mx-auto mb-4 object-cover"}),l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Last Zone Legends"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Admin Panel Login"})]}),l.jsxs("div",{className:"bg-dark-300 rounded-2xl p-6 card-shadow",children:[a&&l.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg",children:l.jsx("p",{className:"text-red-400 text-sm",children:a})}),l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Email Address"}),l.jsxs("div",{className:"relative",children:[l.jsx(m4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),l.jsx("input",{type:"email",value:t,onChange:E=>e(E.target.value),placeholder:"admin@example.com",required:!0,className:"w-full pl-11 pr-4 py-3 rounded-lg bg-dark-200 border border-dark-100 text-white placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(f4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),l.jsx("input",{type:s?"text":"password",value:n,onChange:E=>r(E.target.value),placeholder:"",required:!0,className:"w-full pl-11 pr-11 py-3 rounded-lg bg-dark-200 border border-dark-100 text-white placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500"}),l.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:s?l.jsx(Nm,{className:"w-5 h-5"}):l.jsx(ha,{className:"w-5 h-5"})})]})]}),l.jsx(Y,{type:"submit",loading:c,className:"w-full py-3",children:"Sign In"})]})]}),l.jsx("p",{className:"text-center text-gray-500 text-sm mt-6",children:" 2024 Last Zone Legends. All rights reserved."})]})})}function Xe({children:t,className:e="",onClick:n}){return l.jsx("div",{onClick:n,className:`
        bg-dark-300 rounded-xl p-4 card-shadow
        ${n?"cursor-pointer hover:bg-dark-200 transition-colors":""}
        ${e}
      `,children:t})}function bt({size:t="md",text:e="Loading..."}){const n={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"};return l.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[l.jsx("div",{className:`${n[t]} border-dark-100 border-t-primary-500 rounded-full animate-spin`}),e&&l.jsx("p",{className:"mt-3 text-gray-400 text-sm",children:e})]})}function A4(){const[t,e]=D.useState(null),[n,r]=D.useState(!0);D.useEffect(()=>{s()},[]);const s=async()=>{try{const a=await Dn(ce(W,"users")),u=ce(W,"tournaments"),c=await Dn(Ke(u,Lt("status","==","upcoming"))),d=await Dn(Ke(u,Lt("status","==","live"))),p=await Dn(Ke(u,Lt("status","==","finished"))),g=ce(W,"deposit_requests"),h=await Dn(Ke(g,Lt("status","==","pending"))),E=ce(W,"withdrawals"),A=await Dn(Ke(E,Lt("status","==","pending"))),C=await Dn(Ke(E,Lt("status","==","completed"))),v=await Dn(ce(W,"games")),x=await Dn(ce(W,"promotions")),y=ce(W,"lotteries"),k=await Dn(Ke(y,Lt("status","in",["upcoming","ongoing"])));e({totalUsers:a.data().count,upcomingTournaments:c.data().count,liveTournaments:d.data().count,finishedTournaments:p.data().count,pendingDeposits:h.data().count,pendingWithdrawals:A.data().count,completedWithdrawals:C.data().count,totalGames:v.data().count,totalPromotions:x.data().count,activeLotteries:k.data().count})}catch(a){console.error("Error fetching stats:",a)}finally{r(!1)}},i=[{label:"Total Users",value:(t==null?void 0:t.totalUsers)||0,icon:mr,color:"from-blue-500 to-blue-600"},{label:"Upcoming Tournaments",value:(t==null?void 0:t.upcomingTournaments)||0,icon:Kn,color:"from-purple-500 to-purple-600"},{label:"Live Tournaments",value:(t==null?void 0:t.liveTournaments)||0,icon:Kn,color:"from-green-500 to-green-600"},{label:"Finished Tournaments",value:(t==null?void 0:t.finishedTournaments)||0,icon:Kn,color:"from-gray-500 to-gray-600"},{label:"Pending Deposits",value:(t==null?void 0:t.pendingDeposits)||0,icon:dl,color:"from-yellow-500 to-yellow-600"},{label:"Pending Withdrawals",value:(t==null?void 0:t.pendingWithdrawals)||0,icon:hl,color:"from-orange-500 to-orange-600"},{label:"Completed Withdrawals",value:(t==null?void 0:t.completedWithdrawals)||0,icon:Cm,color:"from-emerald-500 to-emerald-600"},{label:"Total Games",value:(t==null?void 0:t.totalGames)||0,icon:$o,color:"from-pink-500 to-pink-600"},{label:"Total Promotions",value:(t==null?void 0:t.totalPromotions)||0,icon:oc,color:"from-indigo-500 to-indigo-600"},{label:"Active Lotteries",value:(t==null?void 0:t.activeLotteries)||0,icon:Wo,color:"from-red-500 to-red-600"}];return n?l.jsx(bt,{text:"Loading dashboard..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Welcome to Last Zone Legends Admin Panel"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:i.map((a,u)=>l.jsxs(Xe,{className:"relative overflow-hidden",children:[l.jsx("div",{className:`absolute top-0 right-0 w-20 h-20 bg-gradient-to-br ${a.color} opacity-10 rounded-bl-full`}),l.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${a.color} rounded-lg flex items-center justify-center mb-3`,children:l.jsx(a.icon,{className:"w-5 h-5 text-white"})}),l.jsx("p",{className:"text-2xl font-bold text-white",children:a.value}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:a.label})]},u))})]})}function Ct({isOpen:t,onClose:e,title:n,children:r,size:s="md"}){if(D.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 modal-overlay",children:l.jsxs("div",{className:`bg-dark-300 rounded-xl w-full ${i[s]} max-h-[90vh] overflow-hidden card-shadow`,onClick:a=>a.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-100",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:n}),l.jsx("button",{onClick:e,className:"p-1 hover:bg-dark-100 rounded-lg transition-colors",children:l.jsx(Ir,{className:"w-5 h-5 text-gray-400"})})]}),l.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:r})]})})}function ue({label:t,type:e="text",name:n,value:r,onChange:s,placeholder:i,required:a=!1,disabled:u=!1,error:c,icon:d,className:p=""}){return l.jsxs("div",{className:`mb-4 ${p}`,children:[t&&l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:[t,a&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsxs("div",{className:"relative",children:[d&&l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:l.jsx(d,{className:"w-4 h-4 text-gray-500"})}),l.jsx("input",{type:e,name:n,value:r,onChange:s,placeholder:i,required:a,disabled:u,className:`
            w-full px-4 py-2.5 rounded-lg
            bg-dark-200 border border-dark-100
            text-white placeholder-gray-500
            focus:border-primary-500 focus:ring-1 focus:ring-primary-500
            transition-colors duration-200
            disabled:opacity-50 disabled:cursor-not-allowed
            ${d?"pl-10":""}
            ${c?"border-red-500":""}
          `})]}),c&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c})]})}const b4=(t,e=800,n=.7)=>new Promise((r,s)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=a=>{const u=new Image;u.src=a.target.result,u.onload=()=>{const c=document.createElement("canvas");let d=u.width,p=u.height;d>e&&(p=p*e/d,d=e),c.width=d,c.height=p,c.getContext("2d").drawImage(u,0,0,d,p);const h=c.toDataURL("image/jpeg",n);r(h)},u.onerror=s},i.onerror=s});function qo({label:t,value:e,onChange:n,required:r=!1,maxWidth:s=800,quality:i=.7,className:a=""}){const u=D.useRef(null),[c,d]=D.useState(!1),[p,g]=D.useState(""),h=async A=>{const C=A.target.files[0];if(C){if(!C.type.startsWith("image/")){g("Please select an image file");return}if(C.size>10*1024*1024){g("Image size should be less than 10MB");return}d(!0),g("");try{const v=await b4(C,s,i);n(v)}catch(v){g("Failed to process image"),console.error(v)}finally{d(!1)}}},E=()=>{n(""),u.current&&(u.current.value="")};return l.jsxs("div",{className:`mb-4 ${a}`,children:[t&&l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:[t,r&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:h,className:"hidden"}),e?l.jsxs("div",{className:"relative inline-block",children:[l.jsx("img",{src:e,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-dark-100"}),l.jsx("button",{type:"button",onClick:E,className:"absolute -top-2 -right-2 p-1 bg-red-600 rounded-full hover:bg-red-700 transition-colors",children:l.jsx(Ir,{className:"w-4 h-4 text-white"})})]}):l.jsx("button",{type:"button",onClick:()=>{var A;return(A=u.current)==null?void 0:A.click()},disabled:c,className:"w-32 h-32 border-2 border-dashed border-dark-100 rounded-lg flex flex-col items-center justify-center hover:border-primary-500 transition-colors disabled:opacity-50",children:c?l.jsx("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(x4,{className:"w-6 h-6 text-gray-500 mb-2"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Upload Image"})]})}),p&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:p})]})}function er({icon:t=d4,title:e="No data found",description:n="There are no items to display.",action:r}){return l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[l.jsx("div",{className:"w-16 h-16 bg-dark-200 rounded-full flex items-center justify-center mb-4",children:l.jsx(t,{className:"w-8 h-8 text-gray-500"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-1",children:e}),l.jsx("p",{className:"text-gray-500 text-sm text-center max-w-sm",children:n}),r&&l.jsx("div",{className:"mt-4",children:r})]})}function Qs({isOpen:t,onClose:e,onConfirm:n,title:r="Confirm Action",message:s="Are you sure you want to proceed?",confirmText:i="Confirm",cancelText:a="Cancel",variant:u="danger",loading:c=!1}){return l.jsx(Ct,{isOpen:t,onClose:e,title:r,size:"sm",children:l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(i4,{className:"w-8 h-8 text-red-500"})}),l.jsx("p",{className:"text-gray-300 mb-6",children:s}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(Y,{variant:"secondary",onClick:e,disabled:c,children:a}),l.jsx(Y,{variant:u,onClick:n,loading:c,children:i})]})]})})}function P4(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[s,i]=D.useState(!1),[a,u]=D.useState(!1),[c,d]=D.useState(null),[p,g]=D.useState(!1),[h,E]=D.useState({name:"",image:"",imageUrl:"",displayOrder:0});D.useEffect(()=>{A()},[]);const A=async()=>{try{const M=(await Ue(Ke(ce(W,"games"),Jn("displayOrder","asc")))).docs.map(L=>({id:L.id,...L.data()}));e(M)}catch(b){console.error("Error fetching games:",b);try{const L=(await Ue(ce(W,"games"))).docs.map(_=>({id:_.id,..._.data()}));L.sort((_,w)=>(_.displayOrder||0)-(w.displayOrder||0)),e(L)}catch(M){console.error("Fallback fetch also failed:",M)}}finally{r(!1)}},C=(b=null)=>{if(b)d(b),E({name:b.name||"",image:b.image||"",imageUrl:b.imageUrl||"",displayOrder:b.displayOrder||0});else{d(null);const M=t.length>0?Math.max(...t.map(L=>L.displayOrder||0))+1:1;E({name:"",image:"",imageUrl:"",displayOrder:M})}i(!0)},v=()=>{i(!1),d(null),E({name:"",image:"",imageUrl:"",displayOrder:0})},x=async b=>{b.preventDefault(),g(!0);try{const M={name:h.name,image:h.image||h.imageUrl,imageUrl:h.imageUrl,displayOrder:parseInt(h.displayOrder)||0,updatedAt:ee()};c?await Me(de(W,"games",c.id),M):(M.createdAt=ee(),await Qt(ce(W,"games"),M)),await A(),v()}catch(M){console.error("Error saving game:",M)}finally{g(!1)}},y=async()=>{if(c){g(!0);try{await ii(de(W,"games",c.id)),await A(),u(!1),d(null)}catch(b){console.error("Error deleting game:",b)}finally{g(!1)}}},k=b=>{d(b),u(!0)};return n?l.jsx(bt,{text:"Loading games..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Games"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage game titles"})]}),l.jsx(Y,{icon:Pn,onClick:()=>C(),children:"Add Game"})]}),t.length===0?l.jsx(er,{icon:$o,title:"No games found",description:"Add your first game to get started",action:l.jsx(Y,{icon:Pn,onClick:()=>C(),children:"Add Game"})}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(b=>l.jsxs(Xe,{className:"group relative",children:[l.jsx("div",{className:"aspect-square rounded-lg overflow-hidden mb-3 bg-dark-200",children:b.image?l.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx($o,{className:"w-12 h-12 text-gray-600"})})}),l.jsx("h3",{className:"font-medium text-white text-center truncate",children:b.name}),l.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-dark-400/90 rounded-lg flex items-center gap-1",children:[l.jsx(a4,{className:"w-3 h-3 text-primary-400"}),l.jsx("span",{className:"text-xs text-white font-medium",children:b.displayOrder||0})]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(b),className:"p-1.5 bg-dark-400/90 hover:bg-primary-600 rounded-lg transition-colors",children:l.jsx(Ks,{className:"w-4 h-4 text-white"})}),l.jsx("button",{onClick:()=>k(b),className:"p-1.5 bg-dark-400/90 hover:bg-red-600 rounded-lg transition-colors",children:l.jsx(oi,{className:"w-4 h-4 text-white"})})]})]},b.id))}),l.jsx(Ct,{isOpen:s,onClose:v,title:c?"Edit Game":"Add Game",children:l.jsxs("form",{onSubmit:x,children:[l.jsx(ue,{label:"Game Name",value:h.name,onChange:b=>E({...h,name:b.target.value}),placeholder:"Enter game name",required:!0}),l.jsx(ue,{label:"Display Order",type:"number",value:h.displayOrder,onChange:b=>E({...h,displayOrder:b.target.value}),placeholder:"Enter display order (lower = first)",min:"0"}),l.jsx(qo,{label:"Game Image (Upload)",value:h.image,onChange:b=>E({...h,image:b})}),l.jsx(ue,{label:"Or Image URL",value:h.imageUrl,onChange:b=>E({...h,imageUrl:b.target.value}),placeholder:"https://example.com/image.jpg"}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:v,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:p,className:"flex-1",children:[c?"Update":"Add"," Game"]})]})]})}),l.jsx(Qs,{isOpen:a,onClose:()=>u(!1),onConfirm:y,title:"Delete Game",message:`Are you sure you want to delete "${c==null?void 0:c.name}"? This action cannot be undone.`,loading:p})]})}function Am({label:t,checked:e,onChange:n,disabled:r=!1,className:s=""}){return l.jsxs("label",{className:`flex items-center gap-3 cursor-pointer ${r?"opacity-50 cursor-not-allowed":""} ${s}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",checked:e,onChange:i=>n(i.target.checked),disabled:r,className:"sr-only"}),l.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${e?"bg-primary-600":"bg-dark-100"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${e?"translate-x-5":""}`})})]}),t&&l.jsx("span",{className:"text-sm text-gray-300",children:t})]})}function R4(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[s,i]=D.useState(!1),[a,u]=D.useState(!1),[c,d]=D.useState(null),[p,g]=D.useState(!1),[h,E]=D.useState({image:"",imageUrl:"",link:"",isActive:!0,order:0});D.useEffect(()=>{A()},[]);const A=async()=>{try{const b=Ke(ce(W,"promotions"),Jn("order","asc")),L=(await Ue(b)).docs.map(_=>({id:_.id,..._.data()}));e(L)}catch(b){console.error("Error fetching promotions:",b)}finally{r(!1)}},C=(b=null)=>{b?(d(b),E({image:b.image||"",imageUrl:b.imageUrl||"",link:b.link||"",isActive:b.isActive!==!1,order:b.order||0})):(d(null),E({image:"",imageUrl:"",link:"",isActive:!0,order:t.length})),i(!0)},v=()=>{i(!1),d(null)},x=async b=>{b.preventDefault(),g(!0);try{const M={image:h.image||h.imageUrl,imageUrl:h.imageUrl,link:h.link,isActive:h.isActive,order:parseInt(h.order)||0,updatedAt:ee()};c?await Me(de(W,"promotions",c.id),M):(M.createdAt=ee(),await Qt(ce(W,"promotions"),M)),await A(),v()}catch(M){console.error("Error saving promotion:",M)}finally{g(!1)}},y=async()=>{if(c){g(!0);try{await ii(de(W,"promotions",c.id)),await A(),u(!1),d(null)}catch(b){console.error("Error deleting promotion:",b)}finally{g(!1)}}},k=b=>{d(b),u(!0)};return n?l.jsx(bt,{text:"Loading promotions..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Promotions"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage promotional banners"})]}),l.jsx(Y,{icon:Pn,onClick:()=>C(),children:"Add Promotion"})]}),t.length===0?l.jsx(er,{icon:oc,title:"No promotions found",description:"Add promotional banners to display on the website",action:l.jsx(Y,{icon:Pn,onClick:()=>C(),children:"Add Promotion"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(b=>l.jsxs(Xe,{className:"group relative",children:[l.jsx("div",{className:"aspect-video rounded-lg overflow-hidden mb-3 bg-dark-200",children:b.image?l.jsx("img",{src:b.image,alt:"Promotion",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(oc,{className:"w-12 h-12 text-gray-600"})})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${b.isActive?"bg-green-500":"bg-gray-500"}`}),l.jsx("span",{className:"text-sm text-gray-400",children:b.isActive?"Active":"Inactive"})]}),b.link&&l.jsx("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300",children:l.jsx(mE,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(b),className:"p-1.5 bg-dark-400/90 hover:bg-primary-600 rounded-lg transition-colors",children:l.jsx(Ks,{className:"w-4 h-4 text-white"})}),l.jsx("button",{onClick:()=>k(b),className:"p-1.5 bg-dark-400/90 hover:bg-red-600 rounded-lg transition-colors",children:l.jsx(oi,{className:"w-4 h-4 text-white"})})]})]},b.id))}),l.jsx(Ct,{isOpen:s,onClose:v,title:c?"Edit Promotion":"Add Promotion",children:l.jsxs("form",{onSubmit:x,children:[l.jsx(qo,{label:"Banner Image (Upload)",value:h.image,onChange:b=>E({...h,image:b}),maxWidth:1200,quality:.8}),l.jsx(ue,{label:"Or Image URL",value:h.imageUrl,onChange:b=>E({...h,imageUrl:b.target.value}),placeholder:"https://example.com/banner.jpg"}),l.jsx(ue,{label:"Redirect Link (Optional)",value:h.link,onChange:b=>E({...h,link:b.target.value}),placeholder:"https://example.com"}),l.jsx(ue,{label:"Display Order",type:"number",value:h.order,onChange:b=>E({...h,order:b.target.value}),placeholder:"0"}),l.jsx(Am,{label:"Active",checked:h.isActive,onChange:b=>E({...h,isActive:b}),className:"mb-4"}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:v,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:p,className:"flex-1",children:[c?"Update":"Add"," Promotion"]})]})]})}),l.jsx(Qs,{isOpen:a,onClose:()=>u(!1),onConfirm:y,title:"Delete Promotion",message:"Are you sure you want to delete this promotion? This action cannot be undone.",loading:p})]})}function is({label:t,name:e,value:n,onChange:r,options:s=[],placeholder:i="Select an option",required:a=!1,disabled:u=!1,error:c,className:d=""}){return l.jsxs("div",{className:`mb-4 ${d}`,children:[t&&l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:[t,a&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{name:e,value:n,onChange:r,required:a,disabled:u,className:`
            w-full px-4 py-2.5 rounded-lg appearance-none
            bg-dark-200 border border-dark-100
            text-white
            focus:border-primary-500 focus:ring-1 focus:ring-primary-500
            transition-colors duration-200
            disabled:opacity-50 disabled:cursor-not-allowed
            ${c?"border-red-500":""}
          `,children:[l.jsx("option",{value:"",children:i}),s.map(p=>l.jsx("option",{value:p.value,children:p.label},p.value))]}),l.jsx(o4,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),c&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:c})]})}function cn({label:t,name:e,value:n,onChange:r,placeholder:s,required:i=!1,disabled:a=!1,error:u,rows:c=4,className:d=""}){return l.jsxs("div",{className:`mb-4 ${d}`,children:[t&&l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:[t,i&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l.jsx("textarea",{name:e,value:n,onChange:r,placeholder:s,required:i,disabled:a,rows:c,className:`
          w-full px-4 py-2.5 rounded-lg resize-none
          bg-dark-200 border border-dark-100
          text-white placeholder-gray-500
          focus:border-primary-500 focus:ring-1 focus:ring-primary-500
          transition-colors duration-200
          disabled:opacity-50 disabled:cursor-not-allowed
          ${u?"border-red-500":""}
        `}),u&&l.jsx("p",{className:"mt-1 text-sm text-red-500",children:u})]})}function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function Ys(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Bt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function tr(t){Bt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||lc(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function j4(t,e){Bt(2,arguments);var n=tr(t).getTime(),r=Ys(e);return new Date(n+r)}var D4={};function td(){return D4}function O4(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function M4(t){return Bt(1,arguments),t instanceof Date||lc(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function L4(t){if(Bt(1,arguments),!M4(t)&&typeof t!="number")return!1;var e=tr(t);return!isNaN(Number(e))}function V4(t,e){Bt(2,arguments);var n=Ys(e);return j4(t,-n)}var U4=864e5;function F4(t){Bt(1,arguments);var e=tr(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/U4)+1}function uc(t){Bt(1,arguments);var e=1,n=tr(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function vE(t){Bt(1,arguments);var e=tr(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=uc(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=uc(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function z4(t){Bt(1,arguments);var e=vE(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=uc(n);return r}var B4=6048e5;function $4(t){Bt(1,arguments);var e=tr(t),n=uc(e).getTime()-z4(e).getTime();return Math.round(n/B4)+1}function cc(t,e){var n,r,s,i,a,u,c,d;Bt(1,arguments);var p=td(),g=Ys((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=tr(t),E=h.getUTCDay(),A=(E<g?7:0)+E-g;return h.setUTCDate(h.getUTCDate()-A),h.setUTCHours(0,0,0,0),h}function _E(t,e){var n,r,s,i,a,u,c,d;Bt(1,arguments);var p=tr(t),g=p.getUTCFullYear(),h=td(),E=Ys((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(c=h.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(g+1,0,E),A.setUTCHours(0,0,0,0);var C=cc(A,e),v=new Date(0);v.setUTCFullYear(g,0,E),v.setUTCHours(0,0,0,0);var x=cc(v,e);return p.getTime()>=C.getTime()?g+1:p.getTime()>=x.getTime()?g:g-1}function W4(t,e){var n,r,s,i,a,u,c,d;Bt(1,arguments);var p=td(),g=Ys((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=_E(t,e),E=new Date(0);E.setUTCFullYear(h,0,g),E.setUTCHours(0,0,0,0);var A=cc(E,e);return A}var q4=6048e5;function H4(t,e){Bt(1,arguments);var n=tr(t),r=cc(n,e).getTime()-W4(n,e).getTime();return Math.round(r/q4)+1}function Te(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var jr={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Te(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Te(r+1,2)},d:function(e,n){return Te(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Te(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Te(e.getUTCHours(),n.length)},m:function(e,n){return Te(e.getUTCMinutes(),n.length)},s:function(e,n){return Te(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Te(i,n.length)}},fi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},G4={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return jr.y(e,n)},Y:function(e,n,r,s){var i=_E(e,s),a=i>0?i:1-i;if(n==="YY"){var u=a%100;return Te(u,2)}return n==="Yo"?r.ordinalNumber(a,{unit:"year"}):Te(a,n.length)},R:function(e,n){var r=vE(e);return Te(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Te(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Te(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Te(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return jr.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Te(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=H4(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Te(i,n.length)},I:function(e,n,r){var s=$4(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Te(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):jr.d(e,n)},D:function(e,n,r){var s=F4(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Te(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Te(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Te(a,n.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Te(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=fi.noon:s===0?i=fi.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=fi.evening:s>=12?i=fi.afternoon:s>=4?i=fi.morning:i=fi.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return jr.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):jr.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Te(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Te(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):jr.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):jr.s(e,n)},S:function(e,n){return jr.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return mv(a);case"XXXX":case"XX":return As(a);case"XXXXX":case"XXX":default:return As(a,":")}},x:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"x":return mv(a);case"xxxx":case"xx":return As(a);case"xxxxx":case"xxx":default:return As(a,":")}},O:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+pv(a,":");case"OOOO":default:return"GMT"+As(a,":")}},z:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+pv(a,":");case"zzzz":default:return"GMT"+As(a,":")}},t:function(e,n,r,s){var i=s._originalDate||e,a=Math.floor(i.getTime()/1e3);return Te(a,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,a=i.getTime();return Te(a,n.length)}};function pv(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var a=e;return n+String(s)+a+Te(i,2)}function mv(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Te(Math.abs(t)/60,2)}return As(t,e)}function As(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=Te(Math.floor(s/60),2),a=Te(s%60,2);return r+i+n+a}var gv=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},wE=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},K4=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return gv(e,n);var a;switch(s){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",gv(s,n)).replace("{{time}}",wE(i,n))},Q4={p:wE,P:K4},Y4=["D","DD"],X4=["YY","YYYY"];function J4(t){return Y4.indexOf(t)!==-1}function Z4(t){return X4.indexOf(t)!==-1}function yv(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ej={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tj=function(e,n,r){var s,i=ej[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function sh(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var nj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ij={date:sh({formats:nj,defaultWidth:"full"}),time:sh({formats:rj,defaultWidth:"full"}),dateTime:sh({formats:sj,defaultWidth:"full"})},aj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oj=function(e,n,r,s){return aj[e]};function La(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=t.formattingValues[a]||t.formattingValues[i]}else{var u=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[c]||t.values[u]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var lj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pj=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mj={ordinalNumber:pj,era:La({values:lj,defaultWidth:"wide"}),quarter:La({values:uj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:La({values:cj,defaultWidth:"wide"}),day:La({values:dj,defaultWidth:"wide"}),dayPeriod:La({values:hj,defaultWidth:"wide",formattingValues:fj,defaultFormattingWidth:"wide"})};function Va(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var a=i[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(u)?yj(u,function(g){return g.test(a)}):gj(u,function(g){return g.test(a)}),d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var p=e.slice(a.length);return{value:d,rest:p}}}function gj(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function yj(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function vj(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var u=e.slice(s.length);return{value:a,rest:u}}}var _j=/^(\d+)(th|st|nd|rd)?/i,wj=/\d+/i,xj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ej={any:[/^b/i,/^(a|c)/i]},Tj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ij={any:[/1/i,/2/i,/3/i,/4/i]},Sj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Aj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pj={ordinalNumber:vj({matchPattern:_j,parsePattern:wj,valueCallback:function(e){return parseInt(e,10)}}),era:Va({matchPatterns:xj,defaultMatchWidth:"wide",parsePatterns:Ej,defaultParseWidth:"any"}),quarter:Va({matchPatterns:Tj,defaultMatchWidth:"wide",parsePatterns:Ij,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Va({matchPatterns:Sj,defaultMatchWidth:"wide",parsePatterns:kj,defaultParseWidth:"any"}),day:Va({matchPatterns:Cj,defaultMatchWidth:"wide",parsePatterns:Nj,defaultParseWidth:"any"}),dayPeriod:Va({matchPatterns:Aj,defaultMatchWidth:"any",parsePatterns:bj,defaultParseWidth:"any"})},Rj={code:"en-US",formatDistance:tj,formatLong:ij,formatRelative:oj,localize:mj,match:Pj,options:{weekStartsOn:0,firstWeekContainsDate:1}},jj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oj=/^'([^]*?)'?$/,Mj=/''/g,Lj=/[a-zA-Z]/;function xE(t,e,n){var r,s,i,a,u,c,d,p,g,h,E,A,C,v;Bt(2,arguments);var x=String(e),y=td(),k=(r=(s=void 0)!==null&&s!==void 0?s:y.locale)!==null&&r!==void 0?r:Rj,b=Ys((i=(a=(u=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&u!==void 0?u:y.firstWeekContainsDate)!==null&&a!==void 0?a:(d=y.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Ys((g=(h=(E=(A=void 0)!==null&&A!==void 0?A:void 0)!==null&&E!==void 0?E:y.weekStartsOn)!==null&&h!==void 0?h:(C=y.locale)===null||C===void 0||(v=C.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&g!==void 0?g:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var L=tr(t);if(!L4(L))throw new RangeError("Invalid time value");var _=O4(L),w=V4(L,_),I={firstWeekContainsDate:b,weekStartsOn:M,locale:k,_originalDate:L},S=x.match(Dj).map(function(j){var P=j[0];if(P==="p"||P==="P"){var N=Q4[P];return N(j,k.formatLong)}return j}).join("").match(jj).map(function(j){if(j==="''")return"'";var P=j[0];if(P==="'")return Vj(j);var N=G4[P];if(N)return Z4(j)&&yv(j,e,String(t)),J4(j)&&yv(j,e,String(t)),N(w,j,k.localize,I);if(P.match(Lj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return j}).join("");return S}function Vj(t){var e=t.match(Oj);return e?e[1].replace(Mj,"'"):t}const we=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),Uj=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return xE(e,"dd MMM yyyy")},Xs=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return xE(e,"dd MMM yyyy, hh:mm a")},Fj=t=>({pending:"bg-yellow-500/20 text-yellow-400",approved:"bg-green-500/20 text-green-400",rejected:"bg-red-500/20 text-red-400",completed:"bg-green-500/20 text-green-400",upcoming:"bg-blue-500/20 text-blue-400",live:"bg-green-500/20 text-green-400",ongoing:"bg-green-500/20 text-green-400",finished:"bg-gray-500/20 text-gray-400",cancelled:"bg-orange-500/20 text-orange-400",active:"bg-green-500/20 text-green-400",inactive:"bg-red-500/20 text-red-400"})[t==null?void 0:t.toLowerCase()]||"bg-gray-500/20 text-gray-400";function hs({status:t,className:e=""}){return l.jsx("span",{className:`
      px-2.5 py-1 rounded-full text-xs font-medium capitalize
      ${Fj(t)}
      ${e}
    `,children:t})}function zj(){var Yt;const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(!0),[a,u]=D.useState(!1),[c,d]=D.useState(!1),[p,g]=D.useState(!1),[h,E]=D.useState(null),[A,C]=D.useState(!1),[v,x]=D.useState({gameId:"",name:"",startDateTime:"",status:"upcoming",matchType:"solo",entryFee:"",prizePool:"",perKillPrize:"",prize1:"",prize2:"",prize3:"",maxPlayers:"",tags:"",map:"",description:"",rules:"",roomId:"",roomPassword:"",showRoomDetails:!1}),[y,k]=D.useState(!1),[b,M]=D.useState(!1),[L,_]=D.useState(null),[w,I]=D.useState([]),[S,j]=D.useState({first:"",second:"",third:""}),[P,N]=D.useState(!1);D.useEffect(()=>{pe()},[]);const pe=async()=>{try{const[R,q]=await Promise.all([Ue(Ke(ce(W,"tournaments"),Jn("createdAt","desc"))),Ue(ce(W,"games"))]);e(R.docs.map(G=>({id:G.id,...G.data()}))),r(q.docs.map(G=>({id:G.id,...G.data()})))}catch(R){console.error("Error fetching data:",R)}finally{i(!1)}},Pt=(R=null)=>{var q,G,me,Le,le,qe,Ce,Xt,xs,rr;if(R){E(R);const Rn=((G=(q=R.startDateTime)==null?void 0:q.toDate)==null?void 0:G.call(q))||new Date(R.startDateTime);x({gameId:R.gameId||"",name:R.name||"",startDateTime:Rn?new Date(Rn.getTime()-Rn.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",status:R.status||"upcoming",matchType:R.matchType||"solo",entryFee:((me=R.entryFee)==null?void 0:me.toString())||"",prizePool:((Le=R.prizePool)==null?void 0:Le.toString())||"",perKillPrize:((le=R.perKillPrize)==null?void 0:le.toString())||"",prize1:((qe=R.prize1)==null?void 0:qe.toString())||"",prize2:((Ce=R.prize2)==null?void 0:Ce.toString())||"",prize3:((Xt=R.prize3)==null?void 0:Xt.toString())||"",maxPlayers:((xs=R.maxPlayers)==null?void 0:xs.toString())||"",tags:((rr=R.tags)==null?void 0:rr.join(", "))||"",map:R.map||"",description:R.description||"",rules:R.rules||"",roomId:R.roomId||"",roomPassword:R.roomPassword||"",showRoomDetails:R.showRoomDetails||!1})}else E(null),x({gameId:"",name:"",startDateTime:"",status:"upcoming",matchType:"solo",entryFee:"",prizePool:"",perKillPrize:"",prize1:"",prize2:"",prize3:"",maxPlayers:"",tags:"",map:"",description:"",rules:"",roomId:"",roomPassword:"",showRoomDetails:!1});u(!0)},vn=R=>{var q,G,me,Le,le,qe,Ce,Xt;E(null),x({gameId:R.gameId||"",name:`${R.name} (Copy)`,startDateTime:"",status:"upcoming",matchType:R.matchType||"solo",entryFee:((q=R.entryFee)==null?void 0:q.toString())||"",prizePool:((G=R.prizePool)==null?void 0:G.toString())||"",perKillPrize:((me=R.perKillPrize)==null?void 0:me.toString())||"",prize1:((Le=R.prize1)==null?void 0:Le.toString())||"",prize2:((le=R.prize2)==null?void 0:le.toString())||"",prize3:((qe=R.prize3)==null?void 0:qe.toString())||"",maxPlayers:((Ce=R.maxPlayers)==null?void 0:Ce.toString())||"",tags:((Xt=R.tags)==null?void 0:Xt.join(", "))||"",map:R.map||"",description:R.description||"",rules:R.rules||"",roomId:"",roomPassword:"",showRoomDetails:!1}),u(!0)},Rt=()=>{u(!1),E(null)},H=async R=>{R.preventDefault(),C(!0);try{const q=n.find(me=>me.id===v.gameId),G={gameId:v.gameId,gameName:(q==null?void 0:q.name)||"",gameImage:(q==null?void 0:q.image)||"",name:v.name,startDateTime:new Date(v.startDateTime),status:v.status,matchType:v.matchType,entryFee:parseFloat(v.entryFee)||0,prizePool:parseFloat(v.prizePool)||0,perKillPrize:parseFloat(v.perKillPrize)||0,prize1:parseFloat(v.prize1)||0,prize2:parseFloat(v.prize2)||0,prize3:parseFloat(v.prize3)||0,maxPlayers:parseInt(v.maxPlayers)||0,tags:v.tags.split(",").map(me=>me.trim()).filter(Boolean),map:v.map,description:v.description,rules:v.rules,roomId:v.roomId,roomPassword:v.roomPassword,showRoomDetails:v.showRoomDetails,updatedAt:ee()};h?await Me(de(W,"tournaments",h.id),G):(G.createdAt=ee(),G.participants=[],G.participantCount=0,await Qt(ce(W,"tournaments"),G)),await pe(),Rt()}catch(q){console.error("Error saving tournament:",q)}finally{C(!1)}},te=async()=>{if(h){C(!0);try{await ii(de(W,"tournaments",h.id)),await pe(),d(!1),E(null)}catch(R){console.error("Error deleting tournament:",R)}finally{C(!1)}}},se=async()=>{if(h){C(!0);try{const R=h.participantDetails||[],q=h.entryFee||0;for(const G of R)G.odeuUserId&&q>0&&(await Me(de(W,"users",G.odeuUserId),{walletBalance:dn(q),depositedBalance:dn(q)}),await Qt(ce(W,"transactions"),{userId:G.odeuUserId,userName:G.odeuName,userEmail:G.odeuEmail,type:"refund",amount:q,description:`Match Cancelled Refund - ${h.name}`,status:"completed",tournamentId:h.id,createdAt:ee()}));await Me(de(W,"tournaments",h.id),{status:"cancelled",cancelledAt:ee(),updatedAt:ee()}),await pe(),g(!1),E(null),alert(`Match cancelled! ${R.length} participant(s) refunded ${q} each.`)}catch(R){console.error("Error cancelling tournament:",R),alert("Failed to cancel match")}finally{C(!1)}}},Se=R=>{E(R),k(!0)},B=(R,q)=>{navigator.clipboard.writeText(R),_(q),setTimeout(()=>_(null),2e3)},J=(R,q=!1)=>{var me,Le,le,qe,Ce,Xt,xs,rr,Rn;E(R),N(q);const G=(R.participantDetails||[]).map(fa=>({...fa,kills:fa.kills||0}));I(G),q&&R.results?j({first:((Le=(me=R.results.first)==null?void 0:me.slotNumber)==null?void 0:Le.toString())||((le=R.results.first)==null?void 0:le.odeuId)||"",second:((Ce=(qe=R.results.second)==null?void 0:qe.slotNumber)==null?void 0:Ce.toString())||((Xt=R.results.second)==null?void 0:Xt.odeuId)||"",third:((rr=(xs=R.results.third)==null?void 0:xs.slotNumber)==null?void 0:rr.toString())||((Rn=R.results.third)==null?void 0:Rn.odeuId)||""}):j({first:"",second:"",third:""}),M(!0)},De=(R,q)=>{I(G=>G.map(me=>me.odeuId===R?{...me,kills:parseInt(q)||0}:me))},tt=R=>R*((h==null?void 0:h.perKillPrize)||0),We=()=>{const R={};return w.forEach(q=>{const G=q.slotNumber||0;R[G]||(R[G]=[]),R[G].push(q)}),R},ke=()=>(h==null?void 0:h.matchType)==="duo"||(h==null?void 0:h.matchType)==="squad",jt=(R,q)=>{if(!ke())return R;const me=We()[q]||[];return me.length>0?R/me.length:0},Cr=(R,q)=>{var G;return ke()?((G=R.slotNumber)==null?void 0:G.toString())===S[q]:R.odeuId===S[q]},_n=R=>{let q=tt(R.kills||0);return ke()?(Cr(R,"first")&&(q+=jt((h==null?void 0:h.prize1)||0,R.slotNumber)),Cr(R,"second")&&(q+=jt((h==null?void 0:h.prize2)||0,R.slotNumber)),Cr(R,"third")&&(q+=jt((h==null?void 0:h.prize3)||0,R.slotNumber))):(S.first===R.odeuId&&(q+=(h==null?void 0:h.prize1)||0),S.second===R.odeuId&&(q+=(h==null?void 0:h.prize2)||0),S.third===R.odeuId&&(q+=(h==null?void 0:h.prize3)||0)),q},nr=async()=>{C(!0);try{const R=We();for(const G of w){const me=_n(G),Le=G.previousEarnings||0,le=me-Le;if(le!==0&&G.odeuUserId){await Me(de(W,"users",G.odeuUserId),{walletBalance:dn(le),winningBalance:dn(le),totalWinnings:dn(le>0?le:0)});const qe=le>0?"winning":"winning_adjustment";await Qt(ce(W,"transactions"),{userId:G.odeuUserId,userName:G.odeuName,userEmail:G.odeuEmail,type:qe,amount:Math.abs(le),description:le>0?`Tournament Winning${P?" (Correction +)":""} - ${h.name}`:`Tournament Winning Correction (-) - ${h.name}`,status:"completed",tournamentId:h.id,kills:G.kills||0,previousEarnings:Le,newEarnings:me,createdAt:ee()})}G.previousEarnings=me}let q={};if(ke()){const G=R[S.first]||[],me=R[S.second]||[],Le=R[S.third]||[];q={first:S.first?{slotNumber:parseInt(S.first),teamMembers:G.map(le=>({name:le.odeuName,gameId:le.odeuGameId})),prizePerMember:jt(h.prize1||0,parseInt(S.first))}:null,second:S.second?{slotNumber:parseInt(S.second),teamMembers:me.map(le=>({name:le.odeuName,gameId:le.odeuGameId})),prizePerMember:jt(h.prize2||0,parseInt(S.second))}:null,third:S.third?{slotNumber:parseInt(S.third),teamMembers:Le.map(le=>({name:le.odeuName,gameId:le.odeuGameId})),prizePerMember:jt(h.prize3||0,parseInt(S.third))}:null}}else{const G=w.find(le=>le.odeuId===S.first),me=w.find(le=>le.odeuId===S.second),Le=w.find(le=>le.odeuId===S.third);q={first:G?{odeuId:G.odeuId,name:G.odeuName,gameId:G.odeuGameId}:null,second:me?{odeuId:me.odeuId,name:me.odeuName,gameId:me.odeuGameId}:null,third:Le?{odeuId:Le.odeuId,name:Le.odeuName,gameId:Le.odeuGameId}:null}}await Me(de(W,"tournaments",h.id),{status:"finished",participantDetails:w,results:q,resultAnnouncedAt:ee(),updatedAt:ee()}),await pe(),M(!1)}catch(R){console.error("Error announcing result:",R),alert("Failed to announce result")}finally{C(!1)}};return s?l.jsx(bt,{text:"Loading tournaments..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Tournaments"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage gaming tournaments"})]}),l.jsx(Y,{icon:Pn,onClick:()=>Pt(),children:"Add Tournament"})]}),t.length===0?l.jsx(er,{icon:Kn,title:"No tournaments found",description:"Create your first tournament",action:l.jsx(Y,{icon:Pn,onClick:()=>Pt(),children:"Add Tournament"})}):l.jsx("div",{className:"space-y-4",children:t.map(R=>{var q,G;return l.jsxs(Xe,{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("div",{className:"w-full sm:w-24 h-24 rounded-lg overflow-hidden bg-dark-200 flex-shrink-0",children:R.gameImage?l.jsx("img",{src:R.gameImage,alt:R.gameName,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Kn,{className:"w-8 h-8 text-gray-600"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white truncate",children:R.name}),l.jsx("p",{className:"text-sm text-gray-400",children:R.gameName})]}),l.jsx(hs,{status:R.status})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Entry:"}),l.jsx("span",{className:"text-white ml-1",children:we(R.entryFee)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Prize:"}),l.jsx("span",{className:"text-green-400 ml-1",children:we(R.prizePool)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Players:"}),l.jsxs("span",{className:"text-white ml-1",children:[R.participantCount||0,"/",R.maxPlayers||""]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Start:"}),l.jsx("span",{className:"text-white ml-1",children:Xs(R.startDateTime)})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[l.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${R.matchType==="squad"?"bg-purple-500/20 text-purple-400":R.matchType==="duo"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:((q=R.matchType)==null?void 0:q.charAt(0).toUpperCase())+((G=R.matchType)==null?void 0:G.slice(1))||"Solo"}),R.map&&l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-orange-500/20 text-orange-400",children:R.map}),R.showRoomDetails?l.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400",children:[l.jsx(ha,{className:"w-3 h-3"})," Room visible"]}):l.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[l.jsx(Nm,{className:"w-3 h-3"})," Room hidden"]})]})]}),l.jsxs("div",{className:"flex sm:flex-col gap-2 justify-end",children:[R.status==="finished"&&!R.resultAnnouncedAt&&l.jsx(Y,{variant:"success",size:"sm",icon:cv,onClick:()=>J(R),children:"Announce Result"}),R.status==="finished"&&R.resultAnnouncedAt&&l.jsx(Y,{variant:"warning",size:"sm",icon:Ks,onClick:()=>J(R,!0),children:"Edit Result"}),l.jsxs(Y,{variant:"secondary",size:"sm",icon:mr,onClick:()=>Se(R),children:["Participants (",R.participantCount||0,")"]}),l.jsx(Y,{variant:"secondary",size:"sm",icon:Ks,onClick:()=>Pt(R),children:"Edit"}),l.jsx(Y,{variant:"secondary",size:"sm",icon:dv,onClick:()=>vn(R),children:"Duplicate"}),R.status!=="cancelled"&&R.status!=="finished"&&l.jsx(Y,{variant:"warning",size:"sm",icon:I4,onClick:()=>{E(R),g(!0)},children:"Cancel Match"}),l.jsx(Y,{variant:"danger",size:"sm",icon:oi,onClick:()=>{E(R),d(!0)},children:"Delete"})]})]},R.id)})}),l.jsx(Ct,{isOpen:a,onClose:Rt,title:h?"Edit Tournament":"Add Tournament",size:"lg",children:l.jsxs("form",{onSubmit:H,children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(is,{label:"Game",value:v.gameId,onChange:R=>x({...v,gameId:R.target.value}),options:n.map(R=>({value:R.id,label:R.name})),required:!0}),l.jsx(ue,{label:"Tournament Name",value:v.name,onChange:R=>x({...v,name:R.target.value}),required:!0}),l.jsx(ue,{label:"Start Date & Time",type:"datetime-local",value:v.startDateTime,onChange:R=>x({...v,startDateTime:R.target.value}),required:!0}),l.jsx(is,{label:"Status",value:v.status,onChange:R=>x({...v,status:R.target.value}),options:[{value:"upcoming",label:"Upcoming"},{value:"live",label:"Live"},{value:"finished",label:"Finished"}]}),l.jsx(is,{label:"Match Type",value:v.matchType,onChange:R=>x({...v,matchType:R.target.value}),options:[{value:"solo",label:"Solo (1 slot per user)"},{value:"duo",label:"Duo (2 slots per user)"},{value:"squad",label:"Squad (4 slots per user)"}]}),l.jsx(ue,{label:"Entry Fee ()",type:"number",value:v.entryFee,onChange:R=>x({...v,entryFee:R.target.value}),required:!0}),l.jsx(ue,{label:"Prize Pool ()",type:"number",value:v.prizePool,onChange:R=>x({...v,prizePool:R.target.value}),required:!0}),l.jsx(ue,{label:"Per Kill Prize ()",type:"number",value:v.perKillPrize,onChange:R=>x({...v,perKillPrize:R.target.value})}),l.jsx(ue,{label:"1st Prize ()",type:"number",value:v.prize1,onChange:R=>x({...v,prize1:R.target.value}),placeholder:"Winner prize"}),l.jsx(ue,{label:"2nd Prize ()",type:"number",value:v.prize2,onChange:R=>x({...v,prize2:R.target.value}),placeholder:"Runner up prize"}),l.jsx(ue,{label:"3rd Prize ()",type:"number",value:v.prize3,onChange:R=>x({...v,prize3:R.target.value}),placeholder:"Second runner up prize"}),l.jsx(ue,{label:"Max Players (0 = unlimited)",type:"number",value:v.maxPlayers,onChange:R=>x({...v,maxPlayers:R.target.value})}),l.jsx(ue,{label:"Tags (comma separated)",value:v.tags,onChange:R=>x({...v,tags:R.target.value}),placeholder:"solo, squad, ranked"}),l.jsx(ue,{label:"Map",value:v.map,onChange:R=>x({...v,map:R.target.value}),placeholder:"e.g., Erangel, Miramar, Sanhok"}),l.jsx(ue,{label:"Room ID",value:v.roomId,onChange:R=>x({...v,roomId:R.target.value})}),l.jsx(ue,{label:"Room Password",value:v.roomPassword,onChange:R=>x({...v,roomPassword:R.target.value})}),l.jsx("div",{className:"flex items-end",children:l.jsx(Am,{label:"Show Room ID/Password to users",checked:v.showRoomDetails,onChange:R=>x({...v,showRoomDetails:R})})})]}),l.jsx(cn,{label:"Description",value:v.description,onChange:R=>x({...v,description:R.target.value}),rows:3}),l.jsx(cn,{label:"Rules",value:v.rules,onChange:R=>x({...v,rules:R.target.value}),rows:3}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:Rt,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:A,className:"flex-1",children:[h?"Update":"Create"," Tournament"]})]})]})}),l.jsx(Qs,{isOpen:c,onClose:()=>d(!1),onConfirm:te,title:"Delete Tournament",message:`Are you sure you want to delete "${h==null?void 0:h.name}"?`,loading:A}),l.jsx(Qs,{isOpen:p,onClose:()=>g(!1),onConfirm:se,title:"Cancel Match & Refund",message:`Are you sure you want to cancel "${h==null?void 0:h.name}"? All ${(h==null?void 0:h.participantCount)||0} participant(s) will be refunded ${(h==null?void 0:h.entryFee)||0} each.`,confirmText:"Cancel & Refund",loading:A}),l.jsx(Ct,{isOpen:y,onClose:()=>{k(!1),E(null)},title:`Participants - ${(h==null?void 0:h.name)||""}`,size:"lg",children:h&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4 p-4 bg-dark-400 rounded-lg",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-purple-600 rounded-lg flex items-center justify-center",children:l.jsx(E4,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white",children:h.name}),l.jsxs("p",{className:"text-sm text-gray-400",children:[h.participantCount||0," / ",h.maxPlayers||""," Players Joined"]})]})]}),!h.participantDetails||h.participantDetails.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(mr,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400",children:"No participants yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Users will appear here when they join this tournament"})]}):(()=>{var Le;const q={solo:1,duo:2,squad:4}[h.matchType]||1,G={};h.participantDetails.forEach(le=>{const qe=le.slotNumber||0;G[qe]||(G[qe]=[]),G[qe].push(le)});const me=Object.entries(G).sort((le,qe)=>Number(le[0])-Number(qe[0]));return l.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Match Type"}),l.jsxs("span",{className:`px-3 py-1 rounded font-bold text-sm ${h.matchType==="squad"?"bg-purple-500/20 text-purple-400":h.matchType==="duo"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:[((Le=h.matchType)==null?void 0:Le.toUpperCase())||"SOLO"," (",q," per slot)"]})]}),me.map(([le,qe])=>l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-primary-400 font-semibold",children:["Slot #",le]}),l.jsxs("span",{className:"text-xs text-gray-500",children:[qe.length,"/",q," players"]})]}),l.jsx("div",{className:"space-y-2",children:qe.sort((Ce,Xt)=>(Ce.position||"A").localeCompare(Xt.position||"A")).map(Ce=>l.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-300 rounded-lg",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${Ce.position==="A"?"bg-yellow-500/20 text-yellow-400":Ce.position==="B"?"bg-blue-500/20 text-blue-400":Ce.position==="C"?"bg-green-500/20 text-green-400":Ce.position==="D"?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"}`,children:Ce.position||"-"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-white truncate",children:Ce.odeuName||"Unknown"}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ce.odeuEmail})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-mono text-primary-400 bg-primary-500/10 px-2 py-1 rounded text-sm",children:Ce.odeuGameId}),l.jsx("button",{onClick:()=>B(Ce.odeuGameId,Ce.odeuId),className:"p-1.5 hover:bg-dark-200 rounded transition-colors",title:"Copy Game ID",children:L===Ce.odeuId?l.jsx(ea,{className:"w-4 h-4 text-green-400"}):l.jsx(dv,{className:"w-4 h-4 text-gray-400"})})]})]},Ce.odeuId))})]},le))]})})(),l.jsx("div",{className:"mt-4 pt-4 border-t border-dark-200",children:l.jsx(Y,{variant:"secondary",fullWidth:!0,onClick:()=>{k(!1),E(null)},children:"Close"})})]})}),l.jsx(Ct,{isOpen:b,onClose:()=>M(!1),title:P?"Edit Tournament Result":"Announce Tournament Result",size:"xl",children:h&&l.jsxs("div",{children:[P&&l.jsx("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:l.jsx("p",{className:"text-blue-400 text-sm",children:" Wallet balances will be automatically adjusted based on the difference. If earnings decrease, amount will be deducted. If earnings increase, amount will be credited."})}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"1st Prize"}),l.jsx("p",{className:"text-sm font-bold text-yellow-400",children:we(h.prize1||0)})]}),l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"2nd Prize"}),l.jsx("p",{className:"text-sm font-bold text-gray-300",children:we(h.prize2||0)})]}),l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"3rd Prize"}),l.jsx("p",{className:"text-sm font-bold text-orange-400",children:we(h.prize3||0)})]}),l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Per Kill"}),l.jsx("p",{className:"text-sm font-bold text-red-400",children:we(h.perKillPrize||0)})]})]}),l.jsxs("div",{className:"mb-4 p-4 bg-dark-400 rounded-lg",children:[ke()&&l.jsx("div",{className:"mb-3 p-2 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:l.jsxs("p",{className:"text-purple-400 text-xs",children:[" Team Mode (",(Yt=h==null?void 0:h.matchType)==null?void 0:Yt.toUpperCase(),"): Select winning TEAM (Slot). Prize will be split equally among team members."]})}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:[" 1st Place ",ke()&&l.jsxs("span",{className:"text-yellow-400",children:["(",we(jt((h==null?void 0:h.prize1)||0,parseInt(S.first)||0))," each)"]})]}),l.jsxs("select",{value:S.first,onChange:R=>j({...S,first:R.target.value}),className:"w-full px-3 py-2 bg-dark-300 border border-dark-200 rounded-lg text-white text-sm focus:border-yellow-500 focus:outline-none",children:[l.jsx("option",{value:"",children:ke()?"Select Winning Team":"Select Winner"}),ke()?Object.entries(We()).sort((R,q)=>Number(R[0])-Number(q[0])).map(([R,q])=>l.jsxs("option",{value:R,disabled:R===S.second||R===S.third,children:["Slot #",R," (",q.map(G=>G.odeuName).join(", "),")"]},R)):w.map(R=>l.jsxs("option",{value:R.odeuId,disabled:R.odeuId===S.second||R.odeuId===S.third,children:[R.odeuName," (",R.odeuGameId,")"]},R.odeuId))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:[" 2nd Place ",ke()&&l.jsxs("span",{className:"text-gray-300",children:["(",we(jt((h==null?void 0:h.prize2)||0,parseInt(S.second)||0))," each)"]})]}),l.jsxs("select",{value:S.second,onChange:R=>j({...S,second:R.target.value}),className:"w-full px-3 py-2 bg-dark-300 border border-dark-200 rounded-lg text-white text-sm focus:border-gray-400 focus:outline-none",children:[l.jsx("option",{value:"",children:ke()?"Select 2nd Team":"Select Runner-up"}),ke()?Object.entries(We()).sort((R,q)=>Number(R[0])-Number(q[0])).map(([R,q])=>l.jsxs("option",{value:R,disabled:R===S.first||R===S.third,children:["Slot #",R," (",q.map(G=>G.odeuName).join(", "),")"]},R)):w.map(R=>l.jsxs("option",{value:R.odeuId,disabled:R.odeuId===S.first||R.odeuId===S.third,children:[R.odeuName," (",R.odeuGameId,")"]},R.odeuId))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:[" 3rd Place ",ke()&&l.jsxs("span",{className:"text-orange-400",children:["(",we(jt((h==null?void 0:h.prize3)||0,parseInt(S.third)||0))," each)"]})]}),l.jsxs("select",{value:S.third,onChange:R=>j({...S,third:R.target.value}),className:"w-full px-3 py-2 bg-dark-300 border border-dark-200 rounded-lg text-white text-sm focus:border-orange-500 focus:outline-none",children:[l.jsx("option",{value:"",children:ke()?"Select 3rd Team":"Select 2nd Runner-up"}),ke()?Object.entries(We()).sort((R,q)=>Number(R[0])-Number(q[0])).map(([R,q])=>l.jsxs("option",{value:R,disabled:R===S.first||R===S.second,children:["Slot #",R," (",q.map(G=>G.odeuName).join(", "),")"]},R)):w.map(R=>l.jsxs("option",{value:R.odeuId,disabled:R.odeuId===S.first||R.odeuId===S.second,children:[R.odeuName," (",R.odeuGameId,")"]},R.odeuId))]})]})]})]}),w.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(mr,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400",children:"No participants to show results for"})]}):l.jsx("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"sticky top-0 bg-dark-500",children:l.jsxs("tr",{className:"border-b border-dark-200",children:[l.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-400",children:"#"}),l.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-400",children:"Player"}),l.jsx("th",{className:"text-left py-2 px-2 text-xs font-medium text-gray-400",children:"Game ID"}),l.jsx("th",{className:"text-center py-2 px-2 text-xs font-medium text-gray-400",children:"Kills"}),l.jsx("th",{className:"text-center py-2 px-2 text-xs font-medium text-gray-400",children:"Kill Earnings"}),l.jsx("th",{className:"text-center py-2 px-2 text-xs font-medium text-gray-400",children:"Position"}),l.jsx("th",{className:"text-right py-2 px-2 text-xs font-medium text-gray-400",children:"Total"})]})}),l.jsx("tbody",{children:w.map((R,q)=>l.jsxs("tr",{className:"border-b border-dark-200 hover:bg-dark-400/50",children:[l.jsx("td",{className:"py-2 px-2 text-gray-400 text-sm",children:q+1}),l.jsx("td",{className:"py-2 px-2",children:l.jsx("p",{className:"font-medium text-white text-sm",children:R.odeuName})}),l.jsx("td",{className:"py-2 px-2",children:l.jsx("span",{className:"font-mono text-primary-400 text-xs bg-primary-500/10 px-2 py-1 rounded",children:R.odeuGameId})}),l.jsx("td",{className:"py-2 px-2",children:l.jsx("input",{type:"number",min:"0",value:R.kills||0,onChange:G=>De(R.odeuId,G.target.value),className:"w-16 mx-auto block px-2 py-1 bg-dark-300 border border-dark-200 rounded text-white text-center text-sm focus:border-primary-500 focus:outline-none"})}),l.jsx("td",{className:"py-2 px-2 text-center",children:l.jsx("span",{className:"text-red-400 text-sm font-medium",children:we(tt(R.kills||0))})}),l.jsxs("td",{className:"py-2 px-2 text-center",children:[S.first===R.odeuId&&l.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded",children:" 1st"}),S.second===R.odeuId&&l.jsx("span",{className:"text-xs bg-gray-500/20 text-gray-300 px-2 py-1 rounded",children:" 2nd"}),S.third===R.odeuId&&l.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:" 3rd"})]}),l.jsx("td",{className:"py-2 px-2 text-right",children:l.jsx("span",{className:"text-green-400 font-bold text-sm",children:we(_n(R))})})]},R.odeuId))})]})}),l.jsxs("div",{className:"mt-4 p-3 bg-dark-400 rounded-lg flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Total Payout:"}),l.jsx("span",{className:"text-xl font-bold text-green-400",children:we(w.reduce((R,q)=>R+_n(q),0))})]}),l.jsxs("div",{className:"flex gap-3 mt-4",children:[l.jsx(Y,{variant:"secondary",onClick:()=>M(!1),className:"flex-1",children:"Cancel"}),l.jsx(Y,{variant:"success",onClick:nr,loading:A,className:"flex-1",icon:cv,children:P?"Update Result":"Announce Result & Credit Winnings"})]})]})})]})}function bm({value:t,onChange:e,placeholder:n="Search...",className:r=""}){return l.jsxs("div",{className:`relative ${r}`,children:[l.jsx(y4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),l.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:n,className:"w-full pl-10 pr-10 py-2.5 rounded-lg bg-dark-200 border border-dark-100 text-white placeholder-gray-500 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors"}),t&&l.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-dark-100 rounded",children:l.jsx(Ir,{className:"w-4 h-4 text-gray-500"})})]})}function Bj(){var H,te,se,Se;const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(!0),[a,u]=D.useState(!1),[c,d]=D.useState(!1),[p,g]=D.useState(!1),[h,E]=D.useState(null),[A,C]=D.useState(!1),[v,x]=D.useState(""),[y,k]=D.useState({displayName:"",email:"",password:"",phone:"",walletBalance:"",status:"active"}),[b,M]=D.useState(!1),[L,_]=D.useState({operation:"deposit",walletType:"deposited",amount:"",note:""});D.useEffect(()=>{w()},[]),D.useEffect(()=>{if(v){const B=v.toLowerCase();r(t.filter(J=>{var De,tt,We;return((De=J.displayName)==null?void 0:De.toLowerCase().includes(B))||((tt=J.email)==null?void 0:tt.toLowerCase().includes(B))||((We=J.phone)==null?void 0:We.includes(B))}))}else r(t)},[v,t]);const w=async()=>{try{const J=(await Ue(Ke(ce(W,"users"),Jn("createdAt","desc")))).docs.map(De=>({id:De.id,...De.data()}));e(J),r(J)}catch(B){console.error("Error fetching users:",B)}finally{i(!1)}},I=(B=null)=>{var J;B?(E(B),k({displayName:B.displayName||"",email:B.email||"",password:"",phone:B.phone||"",walletBalance:((J=B.walletBalance)==null?void 0:J.toString())||"0",status:B.status||"active"})):(E(null),k({displayName:"",email:"",password:"",phone:"",walletBalance:"0",status:"active"})),u(!0)},S=()=>{u(!1),E(null)},j=async B=>{B.preventDefault(),C(!0);try{if(h){const J={displayName:y.displayName,phone:y.phone,status:y.status,updatedAt:ee()};await Me(de(W,"users",h.id),J)}else{const J={displayName:y.displayName,email:y.email,phone:y.phone,walletBalance:parseFloat(y.walletBalance)||0,depositedBalance:0,winningBalance:0,bonusBalance:parseFloat(y.walletBalance)||0,status:y.status,role:"user",referralCode:P(),matchesPlayed:0,totalKills:0,totalWinnings:0,createdAt:ee(),updatedAt:ee()};await Qt(ce(W,"users"),J)}await w(),S()}catch(J){console.error("Error saving user:",J)}finally{C(!1)}},P=()=>"LZL"+Math.random().toString(36).substring(2,8).toUpperCase(),N=async()=>{if(h){C(!0);try{await ii(de(W,"users",h.id)),await w(),g(!1),E(null)}catch(B){console.error("Error deleting user:",B)}finally{C(!1)}}},pe=B=>{E(B),d(!0)},Pt=B=>{E(B),_({operation:"deposit",walletType:"deposited",amount:"",note:""}),M(!0)},vn=()=>{M(!1),E(null)},Rt=async B=>{if(B.preventDefault(),!(!h||!L.amount)){C(!0);try{const J=parseFloat(L.amount);if(isNaN(J)||J<=0){alert("Please enter a valid amount"),C(!1);return}const De=h.walletBalance||0,tt=h.depositedBalance||0,We=h.winningBalance||0,ke=h.bonusBalance||0;let jt=De,Cr=tt,_n=We,nr=ke;const Yt=L.operation==="deposit";L.walletType==="deposited"?Cr=Yt?tt+J:Math.max(0,tt-J):L.walletType==="winning"?_n=Yt?We+J:Math.max(0,We-J):L.walletType==="bonus"&&(nr=Yt?ke+J:Math.max(0,ke-J)),jt=Yt?De+J:Math.max(0,De-J),await Me(de(W,"users",h.id),{walletBalance:jt,depositedBalance:Cr,winningBalance:_n,bonusBalance:nr,updatedAt:ee()});const R=Yt?"manual_credit":"manual_debit",q=L.walletType==="deposited"?"Deposit":L.walletType==="winning"?"Winning":"Bonus";await Qt(ce(W,"transactions"),{userId:h.id,userName:h.displayName||"Unknown",userEmail:h.email||"",type:R,amount:J,walletType:L.walletType,description:`Admin ${Yt?"added":"removed"} ${q} balance${L.note?": "+L.note:""}`,balanceAfter:jt,createdAt:ee()}),await w(),vn()}catch(J){console.error("Error processing fund operation:",J),alert("Failed to process the operation. Please try again.")}finally{C(!1)}}};return s?l.jsx(bt,{text:"Loading users..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Users"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage registered users"})]}),l.jsx(Y,{icon:Pn,onClick:()=>I(),children:"Add User"})]}),l.jsx("div",{className:"mb-4",children:l.jsx(bm,{value:v,onChange:x,placeholder:"Search by name, email or phone...",className:"max-w-md"})}),n.length===0?l.jsx(er,{icon:mr,title:v?"No users found":"No users yet",description:v?"Try a different search term":"Users will appear here when they register"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-dark-200",children:[l.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"User"}),l.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400 hidden sm:table-cell",children:"Email"}),l.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Wallet"}),l.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400 hidden md:table-cell",children:"Status"}),l.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Actions"})]})}),l.jsx("tbody",{children:n.map(B=>{var J,De;return l.jsxs("tr",{className:"border-b border-dark-200 hover:bg-dark-400/50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-medium",children:((De=(J=B.displayName)==null?void 0:J.charAt(0))==null?void 0:De.toUpperCase())||"U"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-white",children:B.displayName||"Unknown"}),l.jsx("p",{className:"text-sm text-gray-500 sm:hidden",children:B.email})]})]})}),l.jsx("td",{className:"py-3 px-4 text-gray-300 hidden sm:table-cell",children:B.email}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:"text-green-400 font-medium",children:we(B.walletBalance||0)})}),l.jsx("td",{className:"py-3 px-4 hidden md:table-cell",children:l.jsx(hs,{status:B.status||"active"})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx("button",{onClick:()=>pe(B),className:"p-2 hover:bg-dark-200 rounded-lg transition-colors",title:"View Details",children:l.jsx(ha,{className:"w-4 h-4 text-gray-400"})}),l.jsx("button",{onClick:()=>Pt(B),className:"p-2 hover:bg-green-600/20 rounded-lg transition-colors",title:"Manage Funds",children:l.jsx(l4,{className:"w-4 h-4 text-green-400"})}),l.jsx("button",{onClick:()=>I(B),className:"p-2 hover:bg-dark-200 rounded-lg transition-colors",title:"Edit User",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400"})}),l.jsx("button",{onClick:()=>{E(B),g(!0)},className:"p-2 hover:bg-red-600/20 rounded-lg transition-colors",title:"Delete User",children:l.jsx(oi,{className:"w-4 h-4 text-red-400"})})]})})]},B.id)})})]})}),l.jsx(Ct,{isOpen:a,onClose:S,title:h?"Edit User":"Add User",children:l.jsxs("form",{onSubmit:j,children:[l.jsx(ue,{label:"Display Name",value:y.displayName,onChange:B=>k({...y,displayName:B.target.value}),required:!0}),l.jsx(ue,{label:"Email",type:"email",value:y.email,onChange:B=>k({...y,email:B.target.value}),disabled:!!h,required:!h}),!h&&l.jsx(ue,{label:"Password",type:"password",value:y.password,onChange:B=>k({...y,password:B.target.value}),required:!0}),l.jsx(ue,{label:"Phone",value:y.phone,onChange:B=>k({...y,phone:B.target.value})}),!h&&l.jsx(ue,{label:"Initial Balance ()",type:"number",value:y.walletBalance,onChange:B=>k({...y,walletBalance:B.target.value})}),l.jsx(is,{label:"Status",value:y.status,onChange:B=>k({...y,status:B.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"banned",label:"Banned"}]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:S,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:A,className:"flex-1",children:[h?"Update":"Add"," User"]})]})]})}),l.jsx(Ct,{isOpen:c,onClose:()=>d(!1),title:"User Details",size:"lg",children:h&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-dark-200",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-2xl text-white font-bold",children:((te=(H=h.displayName)==null?void 0:H.charAt(0))==null?void 0:te.toUpperCase())||"U"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:h.displayName}),l.jsx("p",{className:"text-gray-400",children:h.email}),l.jsx(hs,{status:h.status||"active",className:"mt-1"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(Xe,{className:"bg-dark-400",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Total Balance"}),l.jsx("p",{className:"text-xl font-bold text-green-400",children:we(h.walletBalance||0)})]}),l.jsxs(Xe,{className:"bg-dark-400",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Deposited"}),l.jsx("p",{className:"text-xl font-bold text-blue-400",children:we(h.depositedBalance||0)})]}),l.jsxs(Xe,{className:"bg-dark-400",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Winnings"}),l.jsx("p",{className:"text-xl font-bold text-yellow-400",children:we(h.winningBalance||0)})]}),l.jsxs(Xe,{className:"bg-dark-400",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Bonus"}),l.jsx("p",{className:"text-xl font-bold text-purple-400",children:we(h.bonusBalance||0)})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-dark-200",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:h.matchesPlayed||0}),l.jsx("p",{className:"text-sm text-gray-400",children:"Matches"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:h.totalKills||0}),l.jsx("p",{className:"text-sm text-gray-400",children:"Kills"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-green-400",children:we(h.totalWinnings||0)}),l.jsx("p",{className:"text-sm text-gray-400",children:"Total Won"})]})]}),l.jsxs("div",{className:"pt-4 border-t border-dark-200 space-y-2",children:[l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Phone:"})," ",l.jsx("span",{className:"text-white",children:h.phone||"N/A"})]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Referral Code:"})," ",l.jsx("span",{className:"text-white",children:h.referralCode||"N/A"})]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Joined:"})," ",l.jsx("span",{className:"text-white",children:Uj(h.createdAt)})]})]})]})}),l.jsx(Ct,{isOpen:b,onClose:vn,title:"Manage User Funds",children:h&&l.jsxs("form",{onSubmit:Rt,children:[l.jsxs("div",{className:"mb-4 p-4 bg-dark-400 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-medium",children:((Se=(se=h.displayName)==null?void 0:se.charAt(0))==null?void 0:Se.toUpperCase())||"U"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-white",children:h.displayName}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Current Balance: ",we(h.walletBalance||0)]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-center text-xs",children:[l.jsxs("div",{className:"bg-dark-300 p-2 rounded",children:[l.jsx("p",{className:"text-blue-400 font-medium",children:we(h.depositedBalance||0)}),l.jsx("p",{className:"text-gray-500",children:"Deposited"})]}),l.jsxs("div",{className:"bg-dark-300 p-2 rounded",children:[l.jsx("p",{className:"text-yellow-400 font-medium",children:we(h.winningBalance||0)}),l.jsx("p",{className:"text-gray-500",children:"Winning"})]}),l.jsxs("div",{className:"bg-dark-300 p-2 rounded",children:[l.jsx("p",{className:"text-purple-400 font-medium",children:we(h.bonusBalance||0)}),l.jsx("p",{className:"text-gray-500",children:"Bonus"})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Operation Type"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{type:"button",onClick:()=>_({...L,operation:"deposit"}),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${L.operation==="deposit"?"border-green-500 bg-green-500/20 text-green-400":"border-dark-200 bg-dark-300 text-gray-400 hover:border-dark-100"}`,children:[l.jsx(dl,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:"Deposit"})]}),l.jsxs("button",{type:"button",onClick:()=>_({...L,operation:"withdraw"}),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 transition-all ${L.operation==="withdraw"?"border-red-500 bg-red-500/20 text-red-400":"border-dark-200 bg-dark-300 text-gray-400 hover:border-dark-100"}`,children:[l.jsx(hl,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:"Withdraw"})]})]})]}),l.jsx(is,{label:"Wallet Type",value:L.walletType,onChange:B=>_({...L,walletType:B.target.value}),options:[{value:"deposited",label:"Deposited Balance"},{value:"winning",label:"Winning Balance"},{value:"bonus",label:"Bonus Balance"}]}),l.jsx(ue,{label:"Amount ()",type:"number",value:L.amount,onChange:B=>_({...L,amount:B.target.value}),placeholder:"Enter amount",required:!0,min:"1",step:"0.01"}),l.jsx(ue,{label:"Note (Optional)",value:L.note,onChange:B=>_({...L,note:B.target.value}),placeholder:"Reason for this transaction"}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:vn,className:"flex-1",children:"Cancel"}),l.jsx(Y,{type:"submit",loading:A,className:`flex-1 ${L.operation==="deposit"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:L.operation==="deposit"?"Add Funds":"Remove Funds"})]})]})}),l.jsx(Qs,{isOpen:p,onClose:()=>g(!1),onConfirm:N,title:"Delete User",message:`Are you sure you want to delete "${h==null?void 0:h.displayName}"? This action cannot be undone.`,loading:A})]})}function Pm({tabs:t,activeTab:e,onChange:n,className:r=""}){return l.jsx("div",{className:`flex gap-1 p-1 bg-dark-400 rounded-lg ${r}`,children:t.map(s=>l.jsxs("button",{onClick:()=>n(s.value),className:`
            flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all
            ${e===s.value?"bg-primary-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-200"}
          `,children:[s.label,s.count!==void 0&&l.jsx("span",{className:`ml-2 px-1.5 py-0.5 rounded text-xs ${e===s.value?"bg-primary-700":"bg-dark-200"}`,children:s.count})]},s.value))})}function $j(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[s,i]=D.useState("pending"),[a,u]=D.useState(!1),[c,d]=D.useState(!1),[p,g]=D.useState(null),[h,E]=D.useState(!1),[A,C]=D.useState("");D.useEffect(()=>{v()},[]);const v=async()=>{try{const w=(await Ue(Ke(ce(W,"deposit_requests"),Jn("createdAt","desc")))).docs.map(I=>({id:I.id,...I.data()}));e(w)}catch(_){console.error("Error fetching deposits:",_)}finally{r(!1)}},x=t.filter(_=>_.status===s),y=[{value:"pending",label:"Pending",count:t.filter(_=>_.status==="pending").length},{value:"approved",label:"Approved",count:t.filter(_=>_.status==="approved").length},{value:"rejected",label:"Rejected",count:t.filter(_=>_.status==="rejected").length}],k=_=>{g(_),u(!0)},b=async _=>{E(!0);try{await Me(de(W,"deposit_requests",_.id),{status:"approved",approvedAt:ee(),updatedAt:ee()});const w=de(W,"users",_.userId);await Me(w,{walletBalance:dn(_.amount),depositedBalance:dn(_.amount),updatedAt:ee()}),(await Ue(Ke(ce(W,"transactions"),Lt("referenceId","==",_.id),Lt("status","==","pending")))).docs.forEach(async S=>{await Me(de(W,"transactions",S.id),{status:"completed",description:`Deposit Approved - UTR: ${_.utr}`,updatedAt:ee()})}),await v(),u(!1)}catch(w){console.error("Error approving deposit:",w),alert("Failed to approve deposit")}finally{E(!1)}},M=_=>{g(_),C(""),d(!0)},L=async()=>{if(!(!p||!A)){E(!0);try{await Me(de(W,"deposit_requests",p.id),{status:"rejected",rejectReason:A,rejectedAt:ee(),updatedAt:ee()}),(await Ue(Ke(ce(W,"transactions"),Lt("referenceId","==",p.id),Lt("status","==","pending")))).docs.forEach(async w=>{await Me(de(W,"transactions",w.id),{status:"rejected",description:`Deposit Rejected - ${A}`,updatedAt:ee()})}),await v(),d(!1),u(!1)}catch(_){console.error("Error rejecting deposit:",_)}finally{E(!1)}}};return n?l.jsx(bt,{text:"Loading deposits..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Deposits"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage deposit requests"})]}),l.jsx(Pm,{tabs:y,activeTab:s,onChange:i,className:"mb-6"}),x.length===0?l.jsx(er,{icon:dl,title:`No ${s} deposits`,description:`There are no ${s} deposit requests`}):l.jsx("div",{className:"space-y-4",children:x.map(_=>l.jsxs(Xe,{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"font-medium text-white",children:_.userName||"Unknown User"}),l.jsx(hs,{status:_.status})]}),l.jsx("p",{className:"text-sm text-gray-400",children:_.userEmail}),l.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 text-sm",children:[l.jsx("span",{className:"text-green-400 font-semibold",children:we(_.amount)}),l.jsxs("span",{className:"text-gray-500",children:["UTR: ",_.utr]}),l.jsx("span",{className:"text-gray-500",children:Xs(_.createdAt)})]}),_.status==="rejected"&&_.rejectReason&&l.jsxs("p",{className:"text-sm text-red-400 mt-2",children:["Reason: ",_.rejectReason]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Y,{variant:"secondary",size:"sm",icon:ha,onClick:()=>k(_),children:"View"}),_.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{variant:"success",size:"sm",icon:ea,onClick:()=>b(_),loading:h,children:"Approve"}),l.jsx(Y,{variant:"danger",size:"sm",icon:Ir,onClick:()=>M(_),children:"Reject"})]})]})]},_.id))}),l.jsx(Ct,{isOpen:a,onClose:()=>u(!1),title:"Deposit Details",size:"lg",children:p&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"User"}),l.jsx("p",{className:"text-white font-medium",children:p.userName})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),l.jsx("p",{className:"text-white",children:p.userEmail})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Amount"}),l.jsx("p",{className:"text-green-400 font-bold text-xl",children:we(p.amount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"UTR / Transaction ID"}),l.jsx("p",{className:"text-white font-mono",children:p.utr})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),l.jsx(hs,{status:p.status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Requested At"}),l.jsx("p",{className:"text-white",children:Xs(p.createdAt)})]})]}),p.screenshot&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Payment Screenshot"}),l.jsx("div",{className:"bg-dark-400 rounded-lg p-2",children:l.jsx("img",{src:p.screenshot,alt:"Payment Screenshot",className:"max-w-full max-h-96 mx-auto rounded-lg"})})]}),p.status==="rejected"&&p.rejectReason&&l.jsxs("div",{className:"p-3 bg-red-500/20 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Rejection Reason"}),l.jsx("p",{className:"text-red-400",children:p.rejectReason})]}),p.status==="pending"&&l.jsxs("div",{className:"flex gap-3 pt-4 border-t border-dark-200",children:[l.jsx(Y,{variant:"success",icon:ea,onClick:()=>b(p),loading:h,className:"flex-1",children:"Approve Deposit"}),l.jsx(Y,{variant:"danger",icon:Ir,onClick:()=>M(p),className:"flex-1",children:"Reject Deposit"})]})]})}),l.jsx(Ct,{isOpen:c,onClose:()=>d(!1),title:"Reject Deposit",size:"sm",children:l.jsxs("div",{children:[l.jsxs("p",{className:"text-gray-400 mb-4",children:["Please provide a reason for rejecting this deposit request of ",we((p==null?void 0:p.amount)||0),"."]}),l.jsx(cn,{label:"Rejection Reason",value:A,onChange:_=>C(_.target.value),placeholder:"Enter reason for rejection...",required:!0}),l.jsxs("div",{className:"flex gap-3 mt-4",children:[l.jsx(Y,{variant:"secondary",onClick:()=>d(!1),className:"flex-1",children:"Cancel"}),l.jsx(Y,{variant:"danger",onClick:L,loading:h,disabled:!A,className:"flex-1",children:"Reject Deposit"})]})]})})]})}function Wj(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(!0),[a,u]=D.useState(""),[c,d]=D.useState("all");D.useEffect(()=>{p()},[]),D.useEffect(()=>{let C=t;if(c!=="all"&&(C=C.filter(v=>v.type===c)),a){const v=a.toLowerCase();C=C.filter(x=>{var y,k,b;return((y=x.userName)==null?void 0:y.toLowerCase().includes(v))||((k=x.userEmail)==null?void 0:k.toLowerCase().includes(v))||((b=x.description)==null?void 0:b.toLowerCase().includes(v))})}r(C)},[a,c,t]);const p=async()=>{try{const v=(await Ue(Ke(ce(W,"transactions"),Jn("createdAt","desc")))).docs.map(x=>({id:x.id,...x.data()}));e(v),r(v)}catch(C){console.error("Error fetching transactions:",C)}finally{i(!1)}},g=C=>({deposit:dl,withdrawal:hl,entry_fee:Kn,winning:Wo,bonus:Wo,manual_credit:Pf,manual_debit:Pf})[C]||bf,h=C=>({deposit:"text-green-400 bg-green-500/20",withdrawal:"text-red-400 bg-red-500/20",entry_fee:"text-orange-400 bg-orange-500/20",winning:"text-yellow-400 bg-yellow-500/20",bonus:"text-purple-400 bg-purple-500/20",manual_credit:"text-blue-400 bg-blue-500/20",manual_debit:"text-orange-400 bg-orange-500/20"})[C]||"text-gray-400 bg-gray-500/20",E=C=>["deposit","winning","bonus","manual_credit"].includes(C),A=[{value:"all",label:"All"},{value:"deposit",label:"Deposit"},{value:"withdrawal",label:"Withdrawal"},{value:"entry_fee",label:"Entry Fee"},{value:"winning",label:"Winning"},{value:"bonus",label:"Bonus"},{value:"manual_credit",label:"Manual Credit"},{value:"manual_debit",label:"Manual Debit"}];return s?l.jsx(bt,{text:"Loading transactions..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Transactions"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"View all transaction history"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[l.jsx(bm,{value:a,onChange:u,placeholder:"Search by user or description...",className:"flex-1"}),l.jsx("select",{value:c,onChange:C=>d(C.target.value),className:"px-4 py-2.5 rounded-lg bg-dark-200 border border-dark-100 text-white focus:border-primary-500",children:A.map(C=>l.jsx("option",{value:C.value,children:C.label},C.value))})]}),n.length===0?l.jsx(er,{icon:bf,title:"No transactions found",description:a||c!=="all"?"Try different filters":"Transactions will appear here"}):l.jsx("div",{className:"space-y-3",children:n.map(C=>{const v=g(C.type),x=h(C.type),y=E(C.type);return l.jsxs(Xe,{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x}`,children:l.jsx(v,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("h3",{className:"font-medium text-white capitalize",children:C.type.replace("_"," ")})}),l.jsx("p",{className:"text-sm text-gray-400 truncate",children:C.description||C.userName}),l.jsx("p",{className:"text-xs text-gray-500",children:Xs(C.createdAt)})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:`font-bold ${y?"text-green-400":"text-red-400"}`,children:[y?"+":"-",we(C.amount)]}),l.jsx("p",{className:"text-xs text-gray-500",children:C.userEmail})]})]},C.id)})})]})}function qj(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[s,i]=D.useState("pending"),[a,u]=D.useState(!1),[c,d]=D.useState(!1),[p,g]=D.useState(null),[h,E]=D.useState(!1),[A,C]=D.useState("");D.useEffect(()=>{v()},[]);const v=async()=>{try{const w=(await Ue(Ke(ce(W,"withdrawals"),Jn("createdAt","desc")))).docs.map(I=>({id:I.id,...I.data()}));e(w)}catch(_){console.error("Error fetching withdrawals:",_)}finally{r(!1)}},x=t.filter(_=>_.status===s),y=[{value:"pending",label:"Pending",count:t.filter(_=>_.status==="pending").length},{value:"completed",label:"Completed",count:t.filter(_=>_.status==="completed").length},{value:"rejected",label:"Rejected",count:t.filter(_=>_.status==="rejected").length}],k=_=>{g(_),u(!0)},b=async _=>{E(!0);try{await Me(de(W,"withdrawals",_.id),{status:"completed",completedAt:ee(),updatedAt:ee()}),(await Ue(Ke(ce(W,"transactions"),Lt("referenceId","==",_.id),Lt("status","==","pending")))).docs.forEach(async I=>{await Me(de(W,"transactions",I.id),{status:"completed",description:`Withdrawal Completed - ${_.paymentMethod}`,updatedAt:ee()})}),await v(),u(!1)}catch(w){console.error("Error approving withdrawal:",w),alert("Failed to approve withdrawal")}finally{E(!1)}},M=_=>{g(_),C(""),d(!0)},L=async()=>{if(!(!p||!A)){E(!0);try{await Me(de(W,"withdrawals",p.id),{status:"rejected",rejectReason:A,rejectedAt:ee(),updatedAt:ee()});const _=de(W,"users",p.userId);await Me(_,{walletBalance:dn(p.amount),winningBalance:dn(p.amount),updatedAt:ee()}),(await Ue(Ke(ce(W,"transactions"),Lt("referenceId","==",p.id),Lt("status","==","pending")))).docs.forEach(async I=>{await Me(de(W,"transactions",I.id),{status:"rejected",description:`Withdrawal Rejected - ${A}`,updatedAt:ee()})}),await Qt(ce(W,"transactions"),{userId:p.userId,userName:p.userName,userEmail:p.userEmail,type:"refund",amount:p.amount,description:`Withdrawal Refund - ${A}`,status:"completed",referenceId:p.id,createdAt:ee()}),await v(),d(!1),u(!1)}catch(_){console.error("Error rejecting withdrawal:",_)}finally{E(!1)}}};return n?l.jsx(bt,{text:"Loading withdrawals..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Withdrawals"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage withdrawal requests"})]}),l.jsx(Pm,{tabs:y,activeTab:s,onChange:i,className:"mb-6"}),x.length===0?l.jsx(er,{icon:hl,title:`No ${s} withdrawals`,description:`There are no ${s} withdrawal requests`}):l.jsx("div",{className:"space-y-4",children:x.map(_=>l.jsxs(Xe,{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"font-medium text-white",children:_.userName||"Unknown User"}),l.jsx(hs,{status:_.status})]}),l.jsx("p",{className:"text-sm text-gray-400",children:_.userEmail}),l.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 text-sm",children:[l.jsx("span",{className:"text-red-400 font-semibold",children:we(_.amount)}),l.jsx("span",{className:"text-gray-500",children:_.paymentMethod}),l.jsx("span",{className:"text-gray-500",children:Xs(_.createdAt)})]}),_.status==="rejected"&&_.rejectReason&&l.jsxs("p",{className:"text-sm text-red-400 mt-2",children:["Reason: ",_.rejectReason]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Y,{variant:"secondary",size:"sm",icon:ha,onClick:()=>k(_),children:"View"}),_.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx(Y,{variant:"success",size:"sm",icon:ea,onClick:()=>b(_),loading:h,children:"Approve"}),l.jsx(Y,{variant:"danger",size:"sm",icon:Ir,onClick:()=>M(_),children:"Reject"})]})]})]},_.id))}),l.jsx(Ct,{isOpen:a,onClose:()=>u(!1),title:"Withdrawal Details",size:"md",children:p&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"User"}),l.jsx("p",{className:"text-white font-medium",children:p.userName})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),l.jsx("p",{className:"text-white",children:p.userEmail})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Amount"}),l.jsx("p",{className:"text-red-400 font-bold text-xl",children:we(p.amount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),l.jsx(hs,{status:p.status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Payment Method"}),l.jsx("p",{className:"text-white",children:p.paymentMethod})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Requested At"}),l.jsx("p",{className:"text-white",children:Xs(p.createdAt)})]})]}),p.upiId&&l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"UPI ID"}),l.jsx("p",{className:"text-white font-mono",children:p.upiId})]}),p.bankDetails&&l.jsxs("div",{className:"p-3 bg-dark-400 rounded-lg space-y-2",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Bank Details"}),p.bankDetails.bankName&&l.jsxs("p",{className:"text-white",children:[l.jsx("span",{className:"text-gray-500",children:"Bank:"})," ",p.bankDetails.bankName]}),l.jsxs("p",{className:"text-white",children:[l.jsx("span",{className:"text-gray-500",children:"Account:"})," ",p.bankDetails.accountNumber]}),l.jsxs("p",{className:"text-white",children:[l.jsx("span",{className:"text-gray-500",children:"IFSC:"})," ",p.bankDetails.ifsc]}),l.jsxs("p",{className:"text-white",children:[l.jsx("span",{className:"text-gray-500",children:"Name:"})," ",p.bankDetails.accountName]})]}),p.status==="rejected"&&p.rejectReason&&l.jsxs("div",{className:"p-3 bg-red-500/20 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Rejection Reason"}),l.jsx("p",{className:"text-red-400",children:p.rejectReason})]}),p.status==="pending"&&l.jsxs("div",{className:"flex gap-3 pt-4 border-t border-dark-200",children:[l.jsx(Y,{variant:"success",icon:ea,onClick:()=>b(p),loading:h,className:"flex-1",children:"Approve & Mark Paid"}),l.jsx(Y,{variant:"danger",icon:Ir,onClick:()=>M(p),className:"flex-1",children:"Reject"})]})]})}),l.jsx(Ct,{isOpen:c,onClose:()=>d(!1),title:"Reject Withdrawal",size:"sm",children:l.jsxs("div",{children:[l.jsxs("p",{className:"text-gray-400 mb-4",children:["Please provide a reason for rejecting this withdrawal request of ",we((p==null?void 0:p.amount)||0),"."]}),l.jsx(cn,{label:"Rejection Reason",value:A,onChange:_=>C(_.target.value),placeholder:"Enter reason for rejection...",required:!0}),l.jsxs("div",{className:"flex gap-3 mt-4",children:[l.jsx(Y,{variant:"secondary",onClick:()=>d(!1),className:"flex-1",children:"Cancel"}),l.jsx(Y,{variant:"danger",onClick:L,loading:h,disabled:!A,className:"flex-1",children:"Reject Withdrawal"})]})]})})]})}function Hj(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(!0),[a,u]=D.useState(!1),[c,d]=D.useState(!1),[p,g]=D.useState(!1),[h,E]=D.useState(null),[A,C]=D.useState(!1),[v,x]=D.useState(""),[y,k]=D.useState({title:"",description:"",image:"",prizeAmount:"",entryFee:"",status:"upcoming"});D.useEffect(()=>{b()},[]);const b=async()=>{try{const[P,N]=await Promise.all([Ue(Ke(ce(W,"lotteries"),Jn("createdAt","desc"))),Ue(ce(W,"users"))]);e(P.docs.map(pe=>({id:pe.id,...pe.data()}))),r(N.docs.map(pe=>({id:pe.id,...pe.data()})))}catch(P){console.error("Error fetching data:",P)}finally{i(!1)}},M=(P=null)=>{var N,pe;P?(E(P),k({title:P.title||"",description:P.description||"",image:P.image||"",prizeAmount:((N=P.prizeAmount)==null?void 0:N.toString())||"",entryFee:((pe=P.entryFee)==null?void 0:pe.toString())||"",status:P.status||"upcoming"})):(E(null),k({title:"",description:"",image:"",prizeAmount:"",entryFee:"",status:"upcoming"})),u(!0)},L=()=>{u(!1),E(null)},_=async P=>{P.preventDefault(),C(!0);try{const N={title:y.title,description:y.description,image:y.image,prizeAmount:parseFloat(y.prizeAmount)||0,entryFee:parseFloat(y.entryFee)||0,status:y.status,updatedAt:ee()};h?await Me(de(W,"lotteries",h.id),N):(N.createdAt=ee(),N.winnerId=null,N.winnerName=null,N.participants=[],N.participantCount=0,await Qt(ce(W,"lotteries"),N)),await b(),L()}catch(N){console.error("Error saving lottery:",N)}finally{C(!1)}},w=async()=>{if(h){C(!0);try{await ii(de(W,"lotteries",h.id)),await b(),g(!1),E(null)}catch(P){console.error("Error deleting lottery:",P)}finally{C(!1)}}},I=P=>{E(P),x(""),d(!0)},S=async P=>{C(!0);try{await Me(de(W,"lotteries",h.id),{winnerId:P.id,winnerName:P.displayName,winnerEmail:P.email,status:"finished",finishedAt:ee(),updatedAt:ee()});const N=de(W,"users",P.id);await Me(N,{walletBalance:dn(h.prizeAmount),winningBalance:dn(h.prizeAmount),totalWinnings:dn(h.prizeAmount),updatedAt:ee()}),await Qt(ce(W,"transactions"),{userId:P.id,userName:P.displayName,userEmail:P.email,type:"winning",amount:h.prizeAmount,description:`Lottery Winner - ${h.title}`,status:"completed",createdAt:ee()}),await b(),d(!1)}catch(N){console.error("Error selecting winner:",N),alert("Failed to select winner")}finally{C(!1)}},j=()=>h!=null&&h.participants?n.filter(P=>{var N,pe;return h.participants.some(Pt=>Pt.odeuUserId===P.id)&&(((N=P.displayName)==null?void 0:N.toLowerCase().includes(v.toLowerCase()))||((pe=P.email)==null?void 0:pe.toLowerCase().includes(v.toLowerCase())))}):[];return s?l.jsx(bt,{text:"Loading lotteries..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Lottery"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage lucky draws"})]}),l.jsx(Y,{icon:Pn,onClick:()=>M(),children:"Create Lottery"})]}),t.length===0?l.jsx(er,{icon:Wo,title:"No lotteries found",description:"Create your first lottery",action:l.jsx(Y,{icon:Pn,onClick:()=>M(),children:"Create Lottery"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(P=>l.jsxs(Xe,{className:"relative",children:[P.image&&l.jsx("div",{className:"aspect-video rounded-lg overflow-hidden mb-3 bg-dark-200",children:l.jsx("img",{src:P.image,alt:P.title,className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[l.jsx("h3",{className:"font-semibold text-white",children:P.title}),l.jsx(hs,{status:P.status})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-3 line-clamp-2",children:P.description}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Prize"}),l.jsx("p",{className:"text-lg font-bold text-yellow-400",children:we(P.prizeAmount)})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Entry Fee"}),l.jsx("p",{className:"text-sm font-medium text-white",children:we(P.entryFee||0)})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Participants"}),l.jsx("p",{className:"text-sm font-medium text-blue-400",children:P.participantCount||0})]})]}),P.winnerName&&l.jsxs("div",{className:"mb-3 p-2 bg-green-500/10 rounded-lg border border-green-500/30",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Winner"}),l.jsx("p",{className:"text-sm text-green-400 font-medium",children:P.winnerName})]}),l.jsxs("div",{className:"flex gap-2",children:[P.status!=="finished"&&l.jsx(Y,{variant:"success",size:"sm",icon:Kn,onClick:()=>I(P),className:"flex-1",children:"Select Winner"}),l.jsx(Y,{variant:"secondary",size:"sm",icon:Ks,onClick:()=>M(P),children:"Edit"}),l.jsx(Y,{variant:"danger",size:"sm",icon:oi,onClick:()=>{E(P),g(!0)},children:"Delete"})]})]},P.id))}),l.jsx(Ct,{isOpen:a,onClose:L,title:h?"Edit Lottery":"Create Lottery",children:l.jsxs("form",{onSubmit:_,children:[l.jsx(ue,{label:"Title",value:y.title,onChange:P=>k({...y,title:P.target.value}),required:!0}),l.jsx(cn,{label:"Description",value:y.description,onChange:P=>k({...y,description:P.target.value}),rows:3}),l.jsx(qo,{label:"Image",value:y.image,onChange:P=>k({...y,image:P})}),l.jsx(ue,{label:"Prize Amount ()",type:"number",value:y.prizeAmount,onChange:P=>k({...y,prizeAmount:P.target.value}),required:!0}),l.jsx(ue,{label:"Entry Fee ()",type:"number",value:y.entryFee,onChange:P=>k({...y,entryFee:P.target.value}),placeholder:"0 for free entry"}),l.jsx(is,{label:"Status",value:y.status,onChange:P=>k({...y,status:P.target.value}),options:[{value:"upcoming",label:"Upcoming"},{value:"ongoing",label:"Ongoing"},{value:"finished",label:"Finished"}]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:L,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:A,className:"flex-1",children:[h?"Update":"Create"," Lottery"]})]})]})}),l.jsx(Ct,{isOpen:c,onClose:()=>d(!1),title:"Select Winner",size:"lg",children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 p-3 bg-dark-400 rounded-lg",children:[l.jsxs("p",{className:"text-sm text-gray-400",children:["Lottery: ",l.jsx("span",{className:"text-white",children:h==null?void 0:h.title})]}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Prize: ",l.jsx("span",{className:"text-yellow-400 font-bold",children:we((h==null?void 0:h.prizeAmount)||0)})]}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Participants: ",l.jsx("span",{className:"text-blue-400 font-bold",children:(h==null?void 0:h.participantCount)||0})]})]}),l.jsx(bm,{value:v,onChange:x,placeholder:"Search participant by name or email...",className:"mb-4"}),j().length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(mr,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400",children:"No participants yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Users need to join the lottery first"})]}):l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:j().map(P=>{var N,pe;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-400 rounded-lg hover:bg-dark-300 cursor-pointer",onClick:()=>S(P),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-medium",children:((pe=(N=P.displayName)==null?void 0:N.charAt(0))==null?void 0:pe.toUpperCase())||"U"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-white",children:P.displayName}),l.jsx("p",{className:"text-sm text-gray-400",children:P.email})]})]}),l.jsx(Y,{variant:"success",size:"sm",loading:A,children:"Select"})]},P.id)})})]})}),l.jsx(Qs,{isOpen:p,onClose:()=>g(!1),onConfirm:w,title:"Delete Lottery",message:`Are you sure you want to delete "${h==null?void 0:h.title}"?`,loading:A})]})}const Gj="last-zone-91af9",Kj="firebase-adminsdk-fbsvc@last-zone-91af9.iam.gserviceaccount.com",dc=`-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCwTWTLQMxBPJoc
iulG+5o6xZUxz8NsyLq92h3D+5yNzstrOPAniEAi683jSdbcVk0QhbzABYULeKT3
06Yes4CAeQ+UL4/ORd05Cyve2S8AxTuwLEhJJoQOGgXHaBkVlAgXqXPCfDjW8BXA
r4AwmyUBDbKwvjD/gvKP68pk6PESkeIY8yuDk2L7bbW0jMP7kh9wkCZp0Vwf4AnA
8qDH1Ys7tn4/MTI7Bx1d7q6Ld1C43LJWL0eAboK76mF1z352oPbckksqfS3LMcAt
vNeXhKqc1oPkWUhYxDCWcVEWvy2NKkErmkK/4BN5c8WXQCb1uuMERr4MeT8Z5roD
lq5F84bhAgMBAAECggEABOA3E+n4XCuFZZmv5u8pbkutmyGQWY9ZnsuL/DIWu9NG
y/HYrnc1suGLoagWoaRfYEAansLoUY9mHJaFZx72xFbUx/fixcUn355/+ZtPEfni
czZeT2uZxlwQ4dlurCqaaLEeivftiIA+UcRoyq9XwCY1VW8FIuPnunQ+djj9BdLo
Q9Q30eiyjSiNJFdRZkQnJJI7jjXN0E6l4e6kEE8tbSrJjov5LnJfsFMfRVJfWRTR
sHGBQySbXvvkSpTNLWOcZTh7EyjjwG0u4sCOc5nM79Zx4T+2eWT97locLNRsa1tC
GoT8NU5DtDj1m0TmwL5QBeGLih42lOcICJX+QY6J2QKBgQDin74YNj67ME8xFaIE
cHW5ROBVQyyTWqvKRIXZQGDRxR8wIa8UCjKzKcr4a5iVw1J/xsRhqoLwPtLdDu0j
vs441E+/TCENBVM6Q2xUSu+e+xc5VWf0dn/VvUPj5Jrar5n2zVAaJXSUbF+Je+uz
mGA6Jcw/mm7GYaV7VZS80CHPFQKBgQDHJ8i448ATOlUQv1ZpKZOMjoCx8dbZ2Ebv
iDcbt01/Jwq9A1/VrLDNifhoTvQszmRypZCmm/WHGxqV620WZqOrM0kShbxlg0h7
DIDJ5csitIyOC1z+Ipt0b2HArZKrLCOueB/THG+7bwHBnkJwcuJa4GAp47RbU0BV
981seXMrnQKBgQDE0eOw93un6x78DEO4A0va6hzDMCIIoBjPBJASzLzJsp+Rl8+M
YgcCX2uuMRRGDWsbGi/4erRZntZXstz1zIMiDBJum9mgi11rHp943dQaiQv0eV5d
jIUdxtCtnh93ikb3d/z3mEwVk8Gtj/h29AGuvqETJDbNCIVGBl+1VDXouQKBgHU7
VAqR9lTbN4u+Ne19jd9lWxhkVaayiz8hHd9wzWuV3dpZjCZJm2HCX7l3EID3lWVv
VHDeyW8YY1Pw26weCyYR8Ge41aej2hykxYMTg7oQMdTDl5/5Wyz1C8PR6M5eEzr2
dzVcPeFFfPEuacmrttbr0W+XHGnN3cc9MW0zKLp5AoGBANC/rg0PoFgeCmujSu/Y
5G3wdm6aCW/F1bq821jauBupUnT5kERSj4wjKHlJXEWkhoGm/449tSKJgR/Jf7Wf
aCkURFTKnCjqibzLUFJnrEwr14u5q1QwnlQW+ob7dDgmATG2N4zI7osCJTecFtG7
3OOijou7HIu/kO5acr2E7oHn
-----END PRIVATE KEY-----
`.replace(/\\n/g,`
`),Rf=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),Qj=t=>{const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return Rf(n)},Yj=async t=>{const e=t.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\s/g,""),n=Uint8Array.from(atob(e),r=>r.charCodeAt(0));return await crypto.subtle.importKey("pkcs8",n,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!1,["sign"])},Xj=async()=>{const t=Math.floor(Date.now()/1e3),e={alg:"RS256",typ:"JWT"},n={iss:Kj,scope:"https://www.googleapis.com/auth/firebase.messaging",aud:"https://oauth2.googleapis.com/token",iat:t,exp:t+3600},r=Rf(JSON.stringify(e)),s=Rf(JSON.stringify(n)),i=`${r}.${s}`,a=await Yj(dc),u=await crypto.subtle.sign("RSASSA-PKCS1-v1_5",a,new TextEncoder().encode(i)),c=Qj(u);return`${i}.${c}`};let Jl=null,vv=0;const Jj=async()=>{if(Jl&&Date.now()<vv)return Jl;const t=await Xj(),n=await(await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&assertion=${t}`})).json();if(n.access_token)return Jl=n.access_token,vv=Date.now()+(n.expires_in-60)*1e3,Jl;throw new Error(n.error_description||"Failed to get access token")},Zj=async(t,e,n,r={})=>{var s;if(!dc)return console.warn("FCM service account not configured"),{success:!1,error:"FCM not configured"};try{const i=await Jj(),a={message:{token:t,notification:{title:e,body:n},data:Object.fromEntries(Object.entries(r).map(([d,p])=>[d,String(p)])),android:{priority:"high",notification:{sound:"default",channel_id:"default"}},apns:{payload:{aps:{sound:"default"}}}}},u=await fetch(`https://fcm.googleapis.com/v1/projects/${Gj}/messages:send`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await u.json();return u.ok?{success:!0,messageId:c.name}:{success:!1,error:((s=c.error)==null?void 0:s.message)||"Failed to send"}}catch(i){return console.error("FCM Error:",i),{success:!1,error:i.message}}},eD=async(t,e,n,r={})=>{const s={success:0,failed:0,errors:[]};for(const i of t){const a=await Zj(i,e,n,r);a.success?s.success++:(s.failed++,s.errors.push({token:i.substring(0,20)+"...",error:a.error}))}return s},tD=()=>!!(dc&&dc!==`-----BEGIN PRIVATE KEY-----
YOUR_PRIVATE_KEY_HERE
-----END PRIVATE KEY-----
`);function nD(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(!0),[a,u]=D.useState(!1),[c,d]=D.useState({title:"",message:"",target:"all",tournamentId:"",sendPush:!0}),p=tD();D.useEffect(()=>{g()},[]);const g=async()=>{try{const[v,x]=await Promise.all([Ue(Ke(ce(W,"notifications"),Jn("createdAt","desc"))),Ue(ce(W,"tournaments"))]);e(v.docs.map(y=>({id:y.id,...y.data()}))),r(x.docs.map(y=>({id:y.id,...y.data()})))}catch(v){console.error("Error fetching data:",v)}finally{i(!1)}},h=async v=>{if(!p)return console.warn("FCM not configured, skipping push notification"),{success:0,failed:0};try{const x=await Ue(Ke(ce(W,"users")));let y=[];if(x.docs.forEach(b=>{const M=b.data();M.fcmTokens&&Array.isArray(M.fcmTokens)&&(y=[...y,...M.fcmTokens])}),y=[...new Set(y)],y.length===0)return console.log("No FCM tokens found to send push."),{success:0,failed:0};console.log(`Sending push to ${y.length} devices...`);const k=await eD(y,v.title,v.message,{id:v.id,url:"/notifications"});return console.log("FCM Results:",k),k}catch(x){throw console.error("Error sending push:",x),x}},E=async v=>{v.preventDefault(),u(!0);try{const x={title:c.title,message:c.message,target:c.target,tournamentId:c.target==="tournament"?c.tournamentId:null,sendPush:c.sendPush,sentAt:ee(),createdAt:ee()},y=await Qt(ce(W,"notifications"),x);let k=null;c.sendPush&&p&&(k=await h({...x,id:y.id})),d({title:"",message:"",target:"all",tournamentId:"",sendPush:!0}),await g(),alert(k?` Notification saved!

Push Results:
 Sent: ${k.success}
 Failed: ${k.failed}`:" Notification saved!"+(p?"":`

 Push notifications not sent (FCM not configured)`))}catch(x){console.error("Error sending notification:",x),alert("Failed to save notification: "+x.message)}finally{u(!1)}},A=v=>{if(v.target==="all")return"All Users";if(v.target==="tournament"){const x=n.find(y=>y.id===v.tournamentId);return x?`Tournament: ${x.name}`:"Tournament Users"}return v.target},C=async v=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await ii(de(W,"notifications",v)),e(t.filter(x=>x.id!==v))}catch(x){console.error("Error deleting notification:",x),alert("Failed to delete notification")}};return s?l.jsx(bt,{text:"Loading notifications..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Notifications"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Send in-app and browser push notifications to users"})]}),!p&&l.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg flex items-start gap-3",children:[l.jsx(s4,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-yellow-400 font-medium",children:"FCM Not Configured"}),l.jsx("p",{className:"text-xs text-yellow-400/70 mt-1",children:"Add your service account credentials to admin/.env to enable push notifications. Required: VITE_FCM_PROJECT_ID, VITE_FCM_CLIENT_EMAIL, VITE_FCM_PRIVATE_KEY"})]})]}),p&&l.jsxs("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg flex items-start gap-3",children:[l.jsx(Cm,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-green-400 font-medium",children:"FCM Configured"}),l.jsx("p",{className:"text-xs text-green-400/70 mt-1",children:"Push notifications are ready to send via FCM HTTP v1 API."})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Xe,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(fv,{className:"w-5 h-5 text-primary-400"}),"Send Notification"]}),l.jsxs("form",{onSubmit:E,children:[l.jsx(ue,{label:"Title",value:c.title,onChange:v=>d({...c,title:v.target.value}),placeholder:"Notification title",required:!0}),l.jsx(cn,{label:"Message",value:c.message,onChange:v=>d({...c,message:v.target.value}),placeholder:"Notification message",rows:4,required:!0}),l.jsx(is,{label:"Target Audience",value:c.target,onChange:v=>d({...c,target:v.target.value}),options:[{value:"all",label:"All Users"},{value:"tournament",label:"Tournament Participants"}]}),c.target==="tournament"&&l.jsx(is,{label:"Select Tournament",value:c.tournamentId,onChange:v=>d({...c,tournamentId:v.target.value}),options:n.map(v=>({value:v.id,label:v.name})),required:!0}),l.jsxs("div",{className:"mt-4 p-4 bg-dark-400 rounded-lg",children:[l.jsx(Am,{label:"Send as Browser Push Notification",checked:c.sendPush,onChange:v=>d({...c,sendPush:v}),disabled:!p}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:p?"Users who have allowed notifications will receive a browser push notification.":"Configure FCM credentials to enable push notifications."})]}),l.jsx(Y,{type:"submit",loading:a,icon:fv,className:"w-full mt-4",children:"Send Notification"})]}),l.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-400",children:[l.jsx("strong",{children:" How push notifications work:"})," Users need to enable notifications in their browser. They'll see a permission prompt when they visit the website. Once allowed, they'll receive browser notifications even when the site tab is in background."]})})]}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Af,{className:"w-5 h-5 text-primary-400"}),"Recent Notifications"]}),t.length===0?l.jsx(er,{icon:Af,title:"No notifications sent",description:"Sent notifications will appear here"}):l.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:t.map(v=>l.jsxs(Xe,{className:"bg-dark-400",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[l.jsx("h3",{className:"font-medium text-white",children:v.title}),l.jsxs("div",{className:"flex items-center gap-2",children:[v.sendPush&&l.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400 bg-green-500/10 px-2 py-0.5 rounded",children:[l.jsx(w4,{className:"w-3 h-3"}),"Push"]}),l.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Xs(v.createdAt)})]})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:v.message}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[v.target==="all"?l.jsx(mr,{className:"w-4 h-4 text-blue-400"}):l.jsx(Kn,{className:"w-4 h-4 text-yellow-400"}),l.jsx("span",{className:"text-xs text-gray-500",children:A(v)})]}),l.jsx("button",{onClick:()=>C(v.id),className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-400 transition-colors",title:"Delete notification",children:l.jsx(oi,{className:"w-4 h-4"})})]})]},v.id))})]})]})]})}const rD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),sD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12a12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472c-.18 1.898-.962 6.502-1.36 8.627c-.168.9-.499 1.201-.82 1.23c-.696.065-1.225-.46-1.9-.902c-1.056-.693-1.653-1.124-2.678-1.8c-1.185-.78-.417-1.21.258-1.91c.177-.184 3.247-2.977 3.307-3.23c.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345c-.48.33-.913.49-1.302.48c-.428-.008-1.252-.241-1.865-.44c-.752-.245-1.349-.374-1.297-.789c.027-.216.325-.437.893-.663c3.498-1.524 5.83-2.529 6.998-3.014c3.332-1.386 4.025-1.627 4.476-1.635z"})}),iD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967c-.273-.099-.471-.148-.67.15c-.197.297-.767.966-.94 1.164c-.173.199-.347.223-.644.075c-.297-.15-1.255-.463-2.39-1.475c-.883-.788-1.48-1.761-1.653-2.059c-.173-.297-.018-.458.13-.606c.134-.133.298-.347.446-.52c.149-.174.198-.298.298-.497c.099-.198.05-.371-.025-.52c-.075-.149-.669-1.612-.916-2.207c-.242-.579-.487-.5-.669-.51c-.173-.008-.371-.01-.57-.01c-.198 0-.52.074-.792.372c-.272.297-1.04 1.016-1.04 2.479c0 1.462 1.065 2.875 1.213 3.074c.149.198 2.096 3.2 5.077 4.487c.709.306 1.262.489 1.694.625c.712.227 1.36.195 1.871.118c.571-.085 1.758-.719 2.006-1.413c.248-.694.248-1.289.173-1.413c-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214l-3.741.982l.998-3.648l-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884c2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"})}),aD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),oD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 0C8.74 0 8.333.015 7.053.072C5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053C.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913c.306.788.717 1.459 1.384 2.126c.667.666 1.336 1.079 2.126 1.384c.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558c.788-.306 1.459-.718 2.126-1.384c.666-.667 1.079-1.335 1.384-2.126c.296-.765.499-1.636.558-2.913c.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913c-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071c1.17.055 1.805.249 2.227.415c.562.217.96.477 1.382.896c.419.42.679.819.896 1.381c.164.422.36 1.057.413 2.227c.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227c-.224.562-.479.96-.899 1.382c-.419.419-.824.679-1.38.896c-.42.164-1.065.36-2.235.413c-1.274.057-1.649.07-4.859.07c-3.211 0-3.586-.015-4.859-.074c-1.171-.061-1.816-.256-2.236-.421c-.569-.224-.96-.479-1.379-.899c-.421-.419-.69-.824-.9-1.38c-.165-.42-.359-1.065-.42-2.235c-.045-1.26-.061-1.649-.061-4.844c0-3.196.016-3.586.061-4.861c.061-1.17.255-1.814.42-2.234c.21-.57.479-.96.9-1.381c.419-.419.81-.689 1.379-.898c.42-.166 1.051-.361 2.221-.421c1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162c0 3.405 2.76 6.162 6.162 6.162c3.405 0 6.162-2.76 6.162-6.162c0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4s4 1.79 4 4s-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44c-.795 0-1.44-.646-1.44-1.44c0-.794.646-1.439 1.44-1.439c.793-.001 1.44.645 1.44 1.439z"})}),lD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26l8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),uD=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669c1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),ih=[{key:"discord",name:"Discord",Icon:rD,color:"bg-indigo-500",placeholder:"https://discord.gg/your-server"},{key:"telegram",name:"Telegram",Icon:sD,color:"bg-blue-500",placeholder:"https://t.me/your-channel"},{key:"whatsapp",name:"WhatsApp",Icon:iD,color:"bg-green-500",placeholder:"https://wa.me/919876543210"},{key:"instagram",name:"Instagram",Icon:oD,color:"bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",placeholder:"https://instagram.com/your-handle"},{key:"youtube",name:"YouTube",Icon:aD,color:"bg-red-600",placeholder:"https://youtube.com/@your-channel"},{key:"twitter",name:"Twitter/X",Icon:lD,color:"bg-black",placeholder:"https://twitter.com/your-handle"},{key:"facebook",name:"Facebook",Icon:uD,color:"bg-blue-600",placeholder:"https://facebook.com/your-page"}];function cD(){const[t,e]=D.useState(!0),[n,r]=D.useState(!1),[s,i]=D.useState("general"),[a,u]=D.useState({appName:"",logoUrl:"",logoImage:"",minDeposit:"",minWithdrawal:"",referralBonus:"",supportEmail:"",supportPhone:"",upiId:"",upiQrImage:"",privacyPolicy:"",termsConditions:"",refundPolicy:"",fairPlayPolicy:"",aboutUs:"",contactInfo:"",socialLinks:{discord:"",telegram:"",whatsapp:"",instagram:"",youtube:"",twitter:"",facebook:""}});D.useEffect(()=>{c()},[]);const c=async()=>{try{const h=de(W,"app_settings","main"),E=await Qa(h);if(E.exists()){const A=E.data();u({...a,...A,socialLinks:{discord:"",telegram:"",whatsapp:"",instagram:"",youtube:"",twitter:"",facebook:"",...A.socialLinks||{}}})}}catch(h){console.error("Error fetching settings:",h)}finally{e(!1)}},d=async()=>{r(!0);try{const h=de(W,"app_settings","main");await Sm(h,{...a,minDeposit:parseFloat(a.minDeposit)||0,minWithdrawal:parseFloat(a.minWithdrawal)||0,referralBonus:parseFloat(a.referralBonus)||0,updatedAt:ee()},{merge:!0}),alert("Settings saved successfully!")}catch(h){console.error("Error saving settings:",h),alert("Failed to save settings")}finally{r(!1)}},p=(h,E)=>{u({...a,socialLinks:{...a.socialLinks,[h]:E}})},g=[{value:"general",label:"General"},{value:"payment",label:"Payment"},{value:"social",label:"Social Links"},{value:"policies",label:"Policies"}];return t?l.jsx(bt,{text:"Loading settings..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Settings"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Configure app settings"})]}),l.jsx(Y,{icon:hv,onClick:d,loading:n,children:"Save Changes"})]}),l.jsx(Pm,{tabs:g,activeTab:s,onChange:i,className:"mb-6"}),s==="general"&&l.jsxs(Xe,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(c4,{className:"w-5 h-5 text-primary-400"}),"General Settings"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(ue,{label:"App Name",value:a.appName,onChange:h=>u({...a,appName:h.target.value}),placeholder:"Last Zone Legends"}),l.jsx(ue,{label:"Support Email",type:"email",value:a.supportEmail,onChange:h=>u({...a,supportEmail:h.target.value}),placeholder:"support@example.com"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[l.jsx(ue,{label:"Support Phone",value:a.supportPhone,onChange:h=>u({...a,supportPhone:h.target.value}),placeholder:"+91 9876543210"}),l.jsx("div",{children:l.jsx(qo,{label:"App Logo (Upload)",value:a.logoImage,onChange:h=>u({...a,logoImage:h})})})]}),l.jsx(ue,{label:"Or Logo URL",value:a.logoUrl,onChange:h=>u({...a,logoUrl:h.target.value}),placeholder:"https://example.com/logo.png",className:"mt-4"}),l.jsx(cn,{label:"About Us",value:a.aboutUs,onChange:h=>u({...a,aboutUs:h.target.value}),placeholder:"About your platform...",rows:4,className:"mt-4"}),l.jsx(cn,{label:"Contact Information",value:a.contactInfo,onChange:h=>u({...a,contactInfo:h.target.value}),placeholder:"Contact details, address, etc.",rows:3,className:"mt-4"})]}),s==="payment"&&l.jsxs(Xe,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Pf,{className:"w-5 h-5 text-primary-400"}),"Payment Settings"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(ue,{label:"Minimum Deposit ()",type:"number",value:a.minDeposit,onChange:h=>u({...a,minDeposit:h.target.value}),placeholder:"100"}),l.jsx(ue,{label:"Minimum Withdrawal ()",type:"number",value:a.minWithdrawal,onChange:h=>u({...a,minWithdrawal:h.target.value}),placeholder:"200"}),l.jsx(ue,{label:"Referral Bonus ()",type:"number",value:a.referralBonus,onChange:h=>u({...a,referralBonus:h.target.value}),placeholder:"50"})]}),l.jsxs("div",{className:"mt-6 p-4 bg-dark-400 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-white mb-4",children:"UPI Payment Details"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(ue,{label:"UPI ID",value:a.upiId,onChange:h=>u({...a,upiId:h.target.value}),placeholder:"yourname@upi"}),l.jsx("div",{children:l.jsx(qo,{label:"UPI QR Code",value:a.upiQrImage,onChange:h=>u({...a,upiQrImage:h}),maxWidth:400,quality:.9})})]})]})]}),s==="social"&&l.jsxs(Xe,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(v4,{className:"w-5 h-5 text-primary-400"}),"Social Media Links"]}),l.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Add your social media links. These will be displayed on the Contact Us page. Leave empty to hide."}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ih.map(h=>l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx("span",{className:`w-6 h-6 ${h.color} rounded flex items-center justify-center`,children:l.jsx(h.Icon,{className:"w-4 h-4 text-white"})}),h.name]})}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"url",value:a.socialLinks[h.key]||"",onChange:E=>p(h.key,E.target.value),placeholder:h.placeholder,className:"w-full px-4 py-3 pr-10 bg-dark-300 border border-dark-200 rounded-xl text-white placeholder-gray-500 focus:border-primary-500 focus:outline-none"}),a.socialLinks[h.key]&&l.jsx("a",{href:a.socialLinks[h.key],target:"_blank",rel:"noopener noreferrer",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary-400",children:l.jsx(mE,{className:"w-4 h-4"})})]})]},h.key))}),l.jsxs("div",{className:"mt-8 p-4 bg-dark-400 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-white mb-4",children:"Preview - Contact Us Page Buttons"}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[ih.filter(h=>a.socialLinks[h.key]).map(h=>l.jsxs("a",{href:a.socialLinks[h.key],target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 ${h.color} text-white rounded-full font-medium text-sm hover:opacity-90 transition-opacity flex items-center gap-2`,children:[l.jsx(h.Icon,{className:"w-4 h-4"}),h.name]},h.key)),!ih.some(h=>a.socialLinks[h.key])&&l.jsx("p",{className:"text-gray-500 text-sm",children:"No social links added yet. Add links above to see preview."})]})]})]}),s==="policies"&&l.jsx("div",{className:"space-y-6",children:l.jsxs(Xe,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(u4,{className:"w-5 h-5 text-primary-400"}),"Legal Policies"]}),l.jsx(cn,{label:"Privacy Policy",value:a.privacyPolicy,onChange:h=>u({...a,privacyPolicy:h.target.value}),placeholder:"Enter your privacy policy...",rows:8}),l.jsx(cn,{label:"Terms & Conditions",value:a.termsConditions,onChange:h=>u({...a,termsConditions:h.target.value}),placeholder:"Enter your terms and conditions...",rows:8,className:"mt-4"}),l.jsx(cn,{label:"Refund Policy",value:a.refundPolicy,onChange:h=>u({...a,refundPolicy:h.target.value}),placeholder:"Enter your refund policy...",rows:6,className:"mt-4"}),l.jsx(cn,{label:"Fair Play Policy",value:a.fairPlayPolicy,onChange:h=>u({...a,fairPlayPolicy:h.target.value}),placeholder:"Enter your fair play policy...",rows:6,className:"mt-4"})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx(Y,{icon:hv,onClick:d,loading:n,children:"Save All Changes"})})]})}const dD={apiKey:"AIzaSyCdrH2241iaDDuo33lS7gEswhmwwiEDXWw",authDomain:"last-zone-91af9.firebaseapp.com",projectId:"last-zone-91af9",storageBucket:"last-zone-91af9.firebasestorage.app",messagingSenderId:"58463070590",appId:"1:58463070590:web:4b67aab1defe19cb176b2f"},_v="SecondarySubAdmin",hD=Yk().find(t=>t.name===_v)||Rp(dD,_v),wv=Lx(hD),fD=[{key:"games",label:"Games",description:"Manage games (add, edit, delete)"},{key:"tournaments",label:"Tournaments",description:"Manage tournaments (create, edit, results)"}];function pD(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[s,i]=D.useState(!1),[a,u]=D.useState(!1),[c,d]=D.useState(null),[p,g]=D.useState(!1),[h,E]=D.useState(!1),[A,C]=D.useState(""),[v,x]=D.useState({name:"",email:"",password:"",permissions:[],status:"active"});D.useEffect(()=>{y()},[]);const y=async()=>{try{const I=await Ue(Ke(ce(W,"subadmins"),Jn("createdAt","desc")));e(I.docs.map(S=>({id:S.id,...S.data()})))}catch(I){console.error("Error fetching subadmins:",I)}finally{r(!1)}},k=(I=null)=>{C(""),I?(d(I),x({name:I.name||"",email:I.email||"",password:"",permissions:I.permissions||[],status:I.status||"active"})):(d(null),x({name:"",email:"",password:"",permissions:[],status:"active"})),i(!0)},b=()=>{i(!1),d(null),C("")},M=I=>{x(S=>({...S,permissions:S.permissions.includes(I)?S.permissions.filter(j=>j!==I):[...S.permissions,I]}))},L=async I=>{I.preventDefault(),C(""),g(!0);try{if(c){const S={name:v.name,permissions:v.permissions,status:v.status,updatedAt:ee()};await Me(de(W,"subadmins",c.id),S)}else{if(!v.email||!v.password){C("Email and password are required"),g(!1);return}if(v.password.length<6){C("Password must be at least 6 characters"),g(!1);return}if(v.permissions.length===0){C("Please select at least one permission"),g(!1);return}const j=(await rN(wv,v.email,v.password)).user.uid;await wv.signOut(),await Sm(de(W,"subadmins",j),{uid:j,name:v.name,email:v.email,permissions:v.permissions,status:"active",createdAt:ee(),updatedAt:ee()})}await y(),b()}catch(S){console.error("Error saving subadmin:",S),S.code==="auth/email-already-in-use"?C("This email is already registered"):S.code==="auth/invalid-email"?C("Invalid email address"):S.code==="auth/weak-password"?C("Password is too weak"):C(S.message||"Failed to save subadmin")}finally{g(!1)}},_=async()=>{if(c){g(!0);try{await ii(de(W,"subadmins",c.id)),await y(),u(!1),d(null)}catch(I){console.error("Error deleting subadmin:",I)}finally{g(!1)}}},w=async I=>{try{const S=I.status==="active"?"inactive":"active";await Me(de(W,"subadmins",I.id),{status:S,updatedAt:ee()}),await y()}catch(S){console.error("Error toggling status:",S)}};return n?l.jsx(bt,{text:"Loading sub-admins..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sub-Admins"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Manage sub-admin accounts with limited permissions"})]}),l.jsx(Y,{icon:Pn,onClick:()=>k(),children:"Add Sub-Admin"})]}),l.jsx(Xe,{className:"mb-6 bg-gradient-to-r from-primary-600/20 to-purple-600/20 border-primary-500/30",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(_4,{className:"w-6 h-6 text-primary-400 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white",children:"Sub-Admin Permissions"}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Sub-admins can only access Games and Tournaments pages. They cannot view user data, financials, or settings."})]})]})}),t.length===0?l.jsx(er,{icon:yE,title:"No sub-admins found",description:"Create sub-admin accounts to delegate tournament management",action:l.jsx(Y,{icon:Pn,onClick:()=>k(),children:"Add Sub-Admin"})}):l.jsx("div",{className:"grid gap-4",children:t.map(I=>{var S,j,P;return l.jsxs(Xe,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-lg font-bold text-white",children:((j=(S=I.name)==null?void 0:S.charAt(0))==null?void 0:j.toUpperCase())||"S"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-white",children:I.name||"Unnamed"}),l.jsx("p",{className:"text-sm text-gray-400",children:I.email}),l.jsx("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:(P=I.permissions)==null?void 0:P.map(N=>l.jsx("span",{className:"px-2 py-0.5 bg-primary-500/20 text-primary-400 rounded text-xs capitalize",children:N},N))})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${I.status==="active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:I.status==="active"?"Active":"Inactive"}),l.jsx(Y,{variant:"secondary",size:"sm",icon:I.status==="active"?Ir:ea,onClick:()=>w(I),children:I.status==="active"?"Disable":"Enable"}),l.jsx(Y,{variant:"secondary",size:"sm",icon:Ks,onClick:()=>k(I),children:"Edit"}),l.jsx(Y,{variant:"danger",size:"sm",icon:oi,onClick:()=>{d(I),u(!0)},children:"Delete"})]})]},I.id)})}),l.jsx(Ct,{isOpen:s,onClose:b,title:c?"Edit Sub-Admin":"Add Sub-Admin",children:l.jsxs("form",{onSubmit:L,children:[A&&l.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:l.jsx("p",{className:"text-red-400 text-sm",children:A})}),l.jsx(ue,{label:"Name",value:v.name,onChange:I=>x({...v,name:I.target.value}),placeholder:"Sub-admin name",required:!0}),l.jsx(ue,{label:"Email",type:"email",value:v.email,onChange:I=>x({...v,email:I.target.value}),placeholder:"subadmin@example.com",disabled:!!c,required:!c,className:"mt-4"}),!c&&l.jsxs("div",{className:"mt-4 relative",children:[l.jsx(ue,{label:"Password",type:h?"text":"password",value:v.password,onChange:I=>x({...v,password:I.target.value}),placeholder:"Minimum 6 characters",required:!0}),l.jsx("button",{type:"button",onClick:()=>E(!h),className:"absolute right-3 top-9 text-gray-400 hover:text-white",children:h?l.jsx(Nm,{className:"w-5 h-5"}):l.jsx(ha,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Permissions ",l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsx("div",{className:"space-y-3",children:fD.map(I=>l.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-all ${v.permissions.includes(I.key)?"bg-primary-500/20 border border-primary-500/50":"bg-dark-400 border border-dark-200 hover:border-dark-100"}`,children:[l.jsx("input",{type:"checkbox",checked:v.permissions.includes(I.key),onChange:()=>M(I.key),className:"w-5 h-5 rounded border-dark-200 bg-dark-300 text-primary-500 focus:ring-primary-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-white",children:I.label}),l.jsx("p",{className:"text-xs text-gray-400",children:I.description})]})]},I.key))})]}),c&&l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),l.jsxs("select",{value:v.status,onChange:I=>x({...v,status:I.target.value}),className:"w-full px-4 py-3 bg-dark-300 border border-dark-200 rounded-xl text-white focus:border-primary-500 focus:outline-none",children:[l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(Y,{variant:"secondary",onClick:b,className:"flex-1",children:"Cancel"}),l.jsxs(Y,{type:"submit",loading:p,className:"flex-1",children:[c?"Update":"Create"," Sub-Admin"]})]})]})}),l.jsx(Qs,{isOpen:a,onClose:()=>u(!1),onConfirm:_,title:"Delete Sub-Admin",message:`Are you sure you want to delete "${c==null?void 0:c.name}"? This action cannot be undone.`,loading:p})]})}function mD(){const[t,e]=D.useState({games:!1,tournaments:!1,settings:!1,users:!1}),[n,r]=D.useState({games:!1,tournaments:!1,settings:!1,users:!1}),s=[{name:"BGMI",image:"https://play-lh.googleusercontent.com/JgLzWkBrWMlvqhGrMpGG0xqJxqPqmPjzqjGJWgPj0Tuk-qnMdy4Nrwp-MqjpjRCWQIE=w240-h480-rw"},{name:"Free Fire MAX",image:"https://play-lh.googleusercontent.com/WWcssdzTZvx0OsKvPqbUCLOBqmGBpCPJqbTfaI0LBzLlpKLCmzpHgDnDYBb0JMhbpg=w240-h480-rw"},{name:"Call of Duty Mobile",image:"https://play-lh.googleusercontent.com/PWvwDLJFl_2HKZF4KYCjBXmO7pPjiCz5MZXGAD0KYv7IbaFKsrD6HPdnMJBVGXNhEg=w240-h480-rw"},{name:"PUBG New State",image:"https://play-lh.googleusercontent.com/xB3nhb-vcPsHdNfhMvMeXl_hP5-zMg-tCx7EMN-J8DkjUwBXtasxUw2-aHLOR44v4cc=w240-h480-rw"},{name:"Clash Royale",image:"https://play-lh.googleusercontent.com/rIvZQ_H3hfmexC8vurmLczLtMNBFtxCEdmb2NwkSPz2ZuJJ5nRPD0HbSJ9i4YPnFBg=w240-h480-rw"},{name:"Valorant Mobile",image:"https://images.contentstack.io/v3/assets/bltb6530b271fddd0b1/blt3f072336e3f3ade4/63096d7be4a8c30e088e7720/Valorant_2022_E5A2_PlayVALORANT_ContentStackThumbnail_1200x625_MB01.png"}],i=async()=>{e({...t,games:!0});try{const p=ce(W,"games");if((await Ue(p)).size>0){alert("Games already exist in database"),e({...t,games:!1});return}for(const h of s)await Qt(p,{...h,createdAt:ee(),updatedAt:ee()});r({...n,games:!0})}catch(p){console.error("Error adding demo games:",p),alert("Failed to add demo games")}finally{e({...t,games:!1})}},a=async()=>{e({...t,tournaments:!0});try{const p=ce(W,"tournaments");if((await Ue(p)).size>0){alert("Tournaments already exist in database"),e({...t,tournaments:!1});return}const E=(await Ue(ce(W,"games"))).docs.map(C=>({id:C.id,...C.data()}));if(E.length===0){alert("Please add games first"),e({...t,tournaments:!1});return}const A=[{name:"BGMI Solo Championship",entryFee:50,prizePool:5e3,perKillPrize:10,maxPlayers:100,status:"upcoming",tags:["solo","ranked"],description:"Solo battle royale championship",rules:`1. No teaming
2. No hacks
3. Fair play only`},{name:"Free Fire Squad Wars",entryFee:100,prizePool:1e4,perKillPrize:15,maxPlayers:50,status:"upcoming",tags:["squad","premium"],description:"Squad tournament with massive prizes",rules:`1. 4 players per squad
2. No emulators
3. Stream sniping banned`},{name:"COD Mobile TDM",entryFee:25,prizePool:2500,perKillPrize:5,maxPlayers:0,status:"live",tags:["tdm","beginner"],description:"Team deathmatch tournament",rules:`1. Standard TDM rules
2. No glitches`}];for(let C=0;C<A.length;C++){const v=E[C%E.length],x=new Date;x.setDate(x.getDate()+C+1),x.setHours(20,0,0,0),await Qt(p,{...A[C],gameId:v.id,gameName:v.name,gameImage:v.image,startDateTime:x,roomId:"",roomPassword:"",showRoomDetails:!1,participants:[],participantCount:0,createdAt:ee(),updatedAt:ee()})}r({...n,tournaments:!0})}catch(p){console.error("Error adding demo tournaments:",p),alert("Failed to add demo tournaments")}finally{e({...t,tournaments:!1})}},u=async()=>{e({...t,settings:!0});try{const p=de(W,"app_settings","main");await Sm(p,{appName:"Last Zone Legends",logoUrl:"",minDeposit:100,minWithdrawal:200,referralBonus:50,supportEmail:"support@lastzonelegends.com",upiId:"lastzonelegends@upi",upiQrImage:"",privacyPolicy:"Your privacy is important to us. This privacy policy explains how we collect, use, and protect your personal information...",termsConditions:"By using Last Zone Legends, you agree to these terms and conditions...",refundPolicy:"Refunds are processed within 7 working days for eligible requests...",fairPlayPolicy:"We are committed to fair play. Any form of cheating, hacking, or exploitation will result in permanent ban...",aboutUs:"Last Zone Legends is the ultimate gaming tournament platform for mobile gamers.",contactInfo:`Email: support@lastzonelegends.com
Phone: +91 9876543210`,createdAt:ee(),updatedAt:ee()},{merge:!0}),r({...n,settings:!0})}catch(p){console.error("Error adding demo settings:",p),alert("Failed to add demo settings")}finally{e({...t,settings:!1})}},c=async()=>{e({...t,users:!0});try{const p=ce(W,"users");if((await Ue(p)).size>0){alert("Users already exist in database"),e({...t,users:!1});return}const h=[{displayName:"Pro Gamer",email:"progamer@demo.com",walletBalance:500},{displayName:"Noob Player",email:"noob@demo.com",walletBalance:100},{displayName:"Champion",email:"champion@demo.com",walletBalance:2e3}];for(const E of h)await Qt(p,{...E,depositedBalance:E.walletBalance,winningBalance:0,bonusBalance:0,status:"active",role:"user",referralCode:"LZL"+Math.random().toString(36).substring(2,8).toUpperCase(),matchesPlayed:Math.floor(Math.random()*50),totalKills:Math.floor(Math.random()*200),totalWinnings:Math.floor(Math.random()*5e3),createdAt:ee(),updatedAt:ee()});r({...n,users:!0})}catch(p){console.error("Error adding demo users:",p),alert("Failed to add demo users")}finally{e({...t,users:!1})}},d=[{title:"Demo Games",description:"Add 6 popular mobile games",icon:$o,color:"from-pink-500 to-rose-600",action:i,loading:t.games,completed:n.games},{title:"Demo Tournaments",description:"Add 3 sample tournaments",icon:Kn,color:"from-yellow-500 to-orange-600",action:a,loading:t.tournaments,completed:n.tournaments},{title:"App Settings",description:"Initialize default settings",icon:gE,color:"from-blue-500 to-cyan-600",action:u,loading:t.settings,completed:n.settings},{title:"Demo Users",description:"Add 3 sample users",icon:mr,color:"from-green-500 to-emerald-600",action:c,loading:t.users,completed:n.users}];return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Add Demo Data"}),l.jsx("p",{className:"text-gray-400 mt-1",children:"Populate database with sample data for testing"})]}),l.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4 mb-6",children:l.jsxs("p",{className:"text-yellow-400 text-sm",children:[l.jsx("strong",{children:"Warning:"})," This will add demo data to your database. Only use this for testing purposes. Data will only be added if the collection is empty."]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((p,g)=>l.jsxs(Xe,{className:"relative overflow-hidden",children:[l.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-br ${p.color} opacity-10 rounded-bl-full`}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${p.color} rounded-lg flex items-center justify-center flex-shrink-0`,children:l.jsx(p.icon,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-white",children:p.title}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:p.description}),l.jsx(Y,{onClick:p.action,loading:p.loading,disabled:p.completed,variant:p.completed?"success":"primary",size:"sm",className:"mt-3",icon:p.completed?Cm:pE,children:p.completed?"Added":"Add Data"})]})]})]},g))})]})}function gD({children:t}){const{currentUser:e,loading:n}=ai();return n?l.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:l.jsx(bt,{text:"Loading..."})}):e?t:l.jsx(zn,{to:"/login"})}function xv({children:t,permission:e}){const{currentUser:n,loading:r,hasPermission:s,isAdmin:i,getAllowedPages:a}=ai();if(r)return l.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:l.jsx(bt,{text:"Loading..."})});if(!n)return l.jsx(zn,{to:"/login"});if(!i&&!s(e)){const u=a();return u.length>0?l.jsx(zn,{to:`/${u[0]}`}):l.jsx(zn,{to:"/login"})}return t}function On({children:t}){const{currentUser:e,loading:n,isAdmin:r,getAllowedPages:s}=ai();if(n)return l.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:l.jsx(bt,{text:"Loading..."})});if(!e)return l.jsx(zn,{to:"/login"});if(!r){const i=s();return i.length>0?l.jsx(zn,{to:`/${i[0]}`}):l.jsx(zn,{to:"/login"})}return t}function yD({children:t}){const{currentUser:e,loading:n}=ai();return n?l.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:l.jsx(bt,{text:"Loading..."})}):e?l.jsx(zn,{to:"/dashboard"}):t}function vD(){return l.jsxs(hS,{children:[l.jsx(ct,{path:"/login",element:l.jsx(yD,{children:l.jsx(N4,{})})}),l.jsx(ct,{path:"/",element:l.jsx(zn,{to:"/dashboard"})}),l.jsx(ct,{path:"/dashboard",element:l.jsx(gD,{children:l.jsx(Zt,{children:l.jsx(A4,{})})})}),l.jsx(ct,{path:"/games",element:l.jsx(xv,{permission:"games",children:l.jsx(Zt,{children:l.jsx(P4,{})})})}),l.jsx(ct,{path:"/promotions",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(R4,{})})})}),l.jsx(ct,{path:"/tournaments",element:l.jsx(xv,{permission:"tournaments",children:l.jsx(Zt,{children:l.jsx(zj,{})})})}),l.jsx(ct,{path:"/users",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(Bj,{})})})}),l.jsx(ct,{path:"/deposits",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx($j,{})})})}),l.jsx(ct,{path:"/transactions",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(Wj,{})})})}),l.jsx(ct,{path:"/withdrawals",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(qj,{})})})}),l.jsx(ct,{path:"/lottery",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(Hj,{})})})}),l.jsx(ct,{path:"/notifications",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(nD,{})})})}),l.jsx(ct,{path:"/subadmins",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(pD,{})})})}),l.jsx(ct,{path:"/settings",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(cD,{})})})}),l.jsx(ct,{path:"/demo-data",element:l.jsx(On,{children:l.jsx(Zt,{children:l.jsx(mD,{})})})}),l.jsx(ct,{path:"*",element:l.jsx(zn,{to:"/dashboard"})})]})}function _D(){return l.jsx(wS,{children:l.jsx(t4,{children:l.jsx(vD,{})})})}ah.createRoot(document.getElementById("root")).render(l.jsx(Rv.StrictMode,{children:l.jsx(_D,{})}));
